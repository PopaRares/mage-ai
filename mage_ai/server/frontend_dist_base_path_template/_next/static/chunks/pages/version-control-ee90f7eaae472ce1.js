(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2858],{4230:function(e,n,t){"use strict";t.d(n,{Z:function(){return I}});var r=t(82394),i=t(21831),o=t(82684),l=t(50724),s=t(1402),c=t(97618),u=t(70613),a=t(31557),d=t(68899),h=t(28598);function f(e,n){var t=e.children,r=e.noPadding;return(0,h.jsx)(d.HS,{noPadding:r,ref:n,children:t})}var m=o.forwardRef(f),v=t(62547),j=t(82571),x=t(77417),p=t(46684),b=t(98464),Z=t(70515),g=t(53808),w=t(19183);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var C=25*Z.iI,_=2*C;function O(e,n,t){var r=t.disable,i=t.refOther,l=t.setWidth,s=t.width,c=t.widthOverride,u=t.widthWindow,a=(0,o.useMemo)((function(){return"".concat(e,"_width")}),[e]),d=(0,g.U2)(a),h=(0,o.useState)(!1),f=h[0],m=h[1],v=(0,o.useState)(d||s),j=v[0],x=v[1],p=(0,o.useMemo)((function(){var e="undefined"!==typeof s&&c?s:j;return n.current=P(P({},n.current),{},{widthOverride:c,widthProp:s}),e||C}),[l,c,s,j]),Z=(0,o.useCallback)((function(e){if(!r){var t,o,s,c,d,h=Math.max(u-(_+(null!==i&&void 0!==i&&null!==(t=i.current)&&void 0!==t&&t.disable?0:(null!==i&&void 0!==i&&null!==(o=i.current)&&void 0!==o&&o.widthOverride?null===i||void 0===i||null===(s=i.current)||void 0===s?void 0:s.widthProp:null===i||void 0===i||null===(c=i.current)||void 0===c?void 0:c.width)||C)),C+_+(null!==i&&void 0!==i&&null!==(d=i.current)&&void 0!==d&&d.disable?0:C)),f=Math.max(C,Math.min(h,e));e&&(x(f),(0,g.uN)(a,f),l&&l(f)),n.current=P(P({},n.current),{},{disable:r,width:f})}}),[r,a,i,l,u]),w=(0,b.Z)(u);(0,o.useEffect)((function(){u!==w&&Z(u*(p/w))}),[p,u,w]);var y=(0,b.Z)(s);return(0,o.useEffect)((function(){!r&&c&&y!==s&&Z(s)}),[r,Z,c,s,y]),{mousedownActive:f,setMousedownActive:m,setWidth:Z,width:p}}function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,r=e.afterHeader,f=e.afterHidden,b=e.afterWidth,Z=e.afterWidthOverride,g=e.appendBreadcrumbs,y=e.before,P=e.beforeHeader,C=e.beforeWidth,k=e.breadcrumbs,S=e.children,I=e.contained,H=e.errors,A=e.headerMenuItems,E=e.headerOffset,D=e.hideAfterCompletely,R=e.mainContainerHeader,B=e.navigationItems,F=e.setAfterHidden,N=e.setAfterWidth,V=e.setBeforeWidth,T=e.setErrors,U=e.subheaderChildren,L=e.subheaderNoPadding,W=e.title,q=function(e,n){var t=n.disableAfter,r=n.disableBefore,i=n.setWidthAfter,l=n.setWidthBefore,s=n.widthAfter,c=n.widthBefore,u=n.widthOverrideAfter,a=n.widthOverrideBefore,d=(0,w.i)().width,h=(0,o.useMemo)((function(){return"layout_after_".concat(e)}),[e]),f=(0,o.useMemo)((function(){return"layout_before_".concat(e)}),[e]),m=(0,o.useRef)(null),v=(0,o.useState)(null),j=v[0],x=v[1],p=((0,o.useMemo)((function(){return Math.max(j-_,_)}),[j]),(0,o.useRef)({disable:t,widthOverride:u,width:null,widthProp:s})),b=(0,o.useRef)({disable:r,widthOverride:a,width:null,widthProp:c}),Z=O(h,p,{disable:t,refOther:b,setWidth:i,width:s,widthOverride:u,widthWindow:d}),g=Z.mousedownActive,y=Z.setMousedownActive,P=Z.setWidth,C=Z.width,k=O(f,b,{disable:r,refOther:p,setWidth:l,width:c,widthOverride:a,widthWindow:d}),M=k.mousedownActive,S=k.setMousedownActive,I=k.setWidth,H=k.width;return(0,o.useEffect)((function(){b.current={disable:r,width:H,widthOverride:a,widthProp:c}}),[r,H,a]),(0,o.useEffect)((function(){var e,n;null===m||void 0===m||!m.current||g||M||null===x||void 0===x||x(null===m||void 0===m||null===(e=m.current)||void 0===e||null===(n=e.getBoundingClientRect())||void 0===n?void 0:n.width)}),[g,M,x,C,H,d]),{mainContainerRef:m,mousedownActiveAfter:g,mousedownActiveBefore:M,setMousedownActiveAfter:y,setMousedownActiveBefore:S,setWidthAfter:P,setWidthBefore:I,widthAfter:C,widthBefore:H}}(e.uuid,{setWidthAfter:N,setWidthBefore:V,widthAfter:b,widthBefore:C,widthOverrideAfter:Z}),z=q.mainContainerRef,G=q.mousedownActiveAfter,Q=q.mousedownActiveBefore,K=q.setMousedownActiveAfter,X=q.setMousedownActiveBefore,Y=q.setWidthAfter,J=q.setWidthBefore,$=q.widthAfter,ee=q.widthBefore,ne=(0,x.Z)().project,te=[];return k&&te.push.apply(te,(0,i.Z)(k)),null!==k&&void 0!==k&&k.length&&!g||!ne||null!==k&&void 0!==k&&k.length||te.unshift({bold:!g,label:function(){return W}}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Z,{title:W}),(0,h.jsx)(a.Z,{breadcrumbs:te,menuItems:A}),(0,h.jsxs)(d.Nk,{ref:n,children:[0!==(null===B||void 0===B?void 0:B.length)&&(0,h.jsx)(d.lm,{showMore:!0,children:(0,h.jsx)(j.Z,{navigationItems:B,showMore:!0})}),(0,h.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,h.jsxs)(v.Z,{after:t,afterHeader:r,afterHeightOffset:p.Mz,afterHidden:f,afterMousedownActive:G,afterWidth:$,before:y,beforeHeader:P,beforeHeightOffset:p.Mz,beforeMousedownActive:Q,beforeWidth:y?ee:d.k1,contained:I,headerOffset:E,hideAfterCompletely:!t||!F||D,leftOffset:y?d.k1:null,mainContainerHeader:R,mainContainerRef:z,setAfterHidden:F,setAfterMousedownActive:K,setAfterWidth:Y,setBeforeMousedownActive:X,setBeforeWidth:J,children:[U&&(0,h.jsx)(m,{noPadding:L,children:U}),S]})})]}),H&&(0,h.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===T||void 0===T?void 0:T(null)},children:(0,h.jsx)(s.Z,M(M({},H),{},{onClose:function(){return null===T||void 0===T?void 0:T(null)}}))})]})}var I=o.forwardRef(S)},40109:function(e,n,t){"use strict";t.d(n,{f:function(){return x},h:function(){return v}});var r=t(82394),i=t(82684),o=t(34376),l=t(93369),s=t(72473),c=t(70515),u=t(69419),a=t(53808),d=t(28598);var h=function(e){var n=e.oauthResponse,t=(0,o.useRouter)(),r=(0,i.useMemo)((function(){return n||{}}),[n]),h=r.url,f=r.redirect_query_params,m=void 0===f?{}:f;return(0,d.jsx)(d.Fragment,{children:h&&(0,d.jsx)(l.ZP,{beforeElement:(0,d.jsx)(s.GoogleIcon,{size:2*c.iI}),bold:!0,inline:!0,onClick:function(){var e=(0,u.iV)(h).state;(0,a.t8)(e,m),t.push(h)},uuid:"SignForm/google",children:"Sign in with Google"})})};var f=function(e){var n=e.oauthResponse,t=(0,o.useRouter)(),r=(0,i.useMemo)((function(){return n||{}}),[n]),h=r.url,f=r.redirect_query_params,m=void 0===f?{}:f;return(0,d.jsx)(d.Fragment,{children:h&&(0,d.jsx)(l.ZP,{beforeElement:(0,d.jsx)(s.MicrosoftIcon,{size:2*c.iI}),bold:!0,inline:!0,onClick:function(){var e=(0,u.iV)(h).state;m&&(0,a.t8)(e,m),t.push(h)},uuid:"SignForm/active_directory",children:"Sign in with Microsoft"})})};var m,v,j=function(e){var n=e.oauthResponse,t=(0,o.useRouter)(),r=(0,i.useMemo)((function(){return n||{}}),[n]),s=r.url,c=r.redirect_query_params,h=void 0===c?{}:c;return(0,d.jsx)(d.Fragment,{children:s&&(0,d.jsx)(l.ZP,{bold:!0,inline:!0,onClick:function(){var e=(0,u.iV)(s).state;(0,a.t8)(e,h),t.push(s)},uuid:"SignForm/okta",children:"Sign in with Okta"})})};!function(e){e.ACTIVE_DIRECTORY="active_directory",e.BITBUCKET="bitbucket",e.GITHUB="github",e.GOOGLE="google",e.OKTA="okta"}(v||(v={}));var x=(m={},(0,r.Z)(m,v.ACTIVE_DIRECTORY,f),(0,r.Z)(m,v.GOOGLE,h),(0,r.Z)(m,v.OKTA,j),m)},37520:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Fe}});var r=t(77837),i=t(38860),o=t.n(i),l=t(93808),s=t(82394),c=t(75582),u=t(82684),a=t(69864),d=t(71180),h=t(15338),f=t(55485),m=t(85854),v=t(44085),j=t(38276),x=t(4190),p=t(30160),b=t(35576),Z=t(17488),g=t(12468),w=t(35686),y=t(72473),P="clone",C="delete",_="fetch",O="merge",k="pull",M="push",S="rebase",I="git_remote_name",H="git_repository_name",A={uuid:"Branches"},E={uuid:"Commit"},D={uuid:"Push & Pull Requests"},R={uuid:"Remote & Auth"},B=[R,A,E,D],F=t(70515),N=t(81728),V=t(72619),T=t(28598);var U=function(e){var n=e.actionRemoteName,t=e.branch,r=e.branches,i=e.fetchBranch,o=e.fetchBranches,l=e.remotes,s=e.setActionRemoteName,P=e.showError,_=(0,u.useState)(""),k=_[0],M=_[1],I=(0,u.useState)(null),H=I[0],A=I[1],D=(0,u.useState)(null),B=D[0],U=D[1],L=(0,u.useState)(null),W=L[0],q=L[1],z=(0,u.useState)(""),G=z[0],Q=z[1],K=(0,u.useMemo)((function(){return null===l||void 0===l?void 0:l.find((function(e){return e.name===n}))}),[n,l]),X=(0,u.useMemo)((function(){return(null===r||void 0===r?void 0:r.concat((null===K||void 0===K?void 0:K.refs)||[]))||[]}),[r,K]),Y=(0,a.Db)(w.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){i(),o(),Q("")},onErrorCallback:function(e,n){return P({errors:n,response:e})}})}}),J=(0,c.Z)(Y,2),$=J[0],ee=J[1].isLoading,ne=(0,a.Db)(w.ZP.git_custom_branches.useCreate(),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){i()},onErrorCallback:function(e,n){return P({errors:n,response:e})}})}}),te=(0,c.Z)(ne,2),re=te[0],ie=te[1].isLoading,oe=(0,a.Db)(w.ZP.git_custom_branches.useUpdate(null===t||void 0===t?void 0:t.name),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(e){var n=e.git_custom_branch.progress;i(),M(""),A(""),U(n),q("")},onErrorCallback:function(e,n){return P({errors:n,response:e})}})}}),le=(0,c.Z)(oe,2),se=le[0],ce=le[1].isLoading;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsxs)(m.Z,{children:["Branches",r?" (".concat(null===r||void 0===r?void 0:r.length,")"):""]}),(0,T.jsx)(j.Z,{mt:F.Mq,children:(0,T.jsxs)(f.ZP,{children:[(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Remote"})}),(0,T.jsx)(v.Z,{beforeIcon:(0,T.jsx)(y.MultiShare,{}),beforeIconSize:1.5*F.iI,monospace:!0,onChange:function(e){return s(e.target.value)},placeholder:"Choose a remote",value:n||"",children:null===l||void 0===l?void 0:l.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(0,T.jsxs)(f.ZP,{alignItems:"center",children:[(0,T.jsx)(g.Z,{fullSize:!0,label:"Choose a different branch to switch branches",widthFitContent:!0,children:(0,T.jsx)(v.Z,{beforeIcon:(0,T.jsx)(y.Branch,{muted:!1}),beforeIconSize:2*F.iI,monospace:!0,onChange:function(e){return re({git_custom_branch:{name:e.target.value}})},value:null===t||void 0===t?void 0:t.name,children:(null===t||void 0===t?void 0:t.name)&&(null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)})))})}),(0,T.jsx)(j.Z,{mr:F.cd}),ie&&(0,T.jsx)(x.Z,{inverted:!0})]})]})]})}),(0,T.jsx)(j.Z,{mt:F.Mq,children:(0,T.jsxs)(f.ZP,{alignItems:"center",children:[(0,T.jsx)(Z.Z,{label:"New branch name",monospace:!0,onChange:function(e){var n;return Q(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:G||""}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(d.ZP,{beforeIcon:(0,T.jsx)(y.Add,{size:2*F.iI}),disabled:!G,loading:ee,onClick:function(){$({git_custom_branch:{name:G}})},primary:!0,children:"Create new branch"})]})})]}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(m.Z,{children:"Actions"}),(0,T.jsxs)(j.Z,{mt:F.Mq,children:[(0,T.jsxs)(j.Z,{mb:F.Mq,children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),(null===t||void 0===t?void 0:t.name)&&(0,T.jsx)(p.ZP,{monospace:!0,children:null===t||void 0===t?void 0:t.name})]}),(0,T.jsxs)(f.ZP,{alignItems:"center",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Base branch"})}),(0,T.jsx)(v.Z,{beforeIcon:(0,T.jsx)(y.Branch,{}),beforeIconSize:1.5*F.iI,monospace:!0,onChange:function(e){return q(e.target.value)},placeholder:"Choose a branch",value:W,children:null===X||void 0===X?void 0:X.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Action"})}),(0,T.jsxs)(v.Z,{onChange:function(e){return A(e.target.value)},placeholder:"Choose action",value:H||"",children:[(0,T.jsx)("option",{value:O,children:(0,N.vg)(O)}),(0,T.jsx)("option",{value:S,children:(0,N.vg)(S)}),(0,T.jsx)("option",{value:C,children:(0,N.vg)(C)})]})]})]}),H&&[O,S].includes(H)&&(0,T.jsxs)(j.Z,{mt:F.cd,children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsxs)(p.ZP,{bold:!0,muted:!0,children:["Message for ",H]})}),(0,T.jsx)(b.Z,{monospace:!0,onChange:function(e){return M(e.target.value)},value:k||""})]}),(0,T.jsxs)(j.Z,{mt:F.cd,children:[(0,T.jsx)(d.ZP,{beforeIcon:(0,T.jsx)(y.Lightning,{size:2*F.iI}),disabled:!H||!W,loading:ce,onClick:function(){(C!==H||"undefined"!==typeof location&&window.confirm("Are you sure you want to delete branch ".concat(W,"?")))&&se({git_custom_branch:{action_payload:{base_branch:W},action_type:H,message:k}})},primary:!0,children:H?(0,N.vg)(H):"Execute action"}),B&&(0,T.jsx)(j.Z,{mt:F.cd,children:(0,T.jsx)(p.ZP,{default:!0,monospace:!0,preWrap:!0,children:B})})]})]})]}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(j.Z,{mb:F.HN,children:(0,T.jsx)(h.Z,{light:!0})}),(0,T.jsxs)(f.ZP,{children:[(0,T.jsx)(d.ZP,{beforeIcon:(0,T.jsx)(y.PaginateArrowLeft,{}),linkProps:{href:"/version-control?tab=".concat(R.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:R.uuid}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsxs)(d.ZP,{afterIcon:(0,T.jsx)(y.PaginateArrowRight,{}),linkProps:{href:"/version-control?tab=".concat(E.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",E.uuid]})]})]})]})},L=t(90299),W=t(32013),q=t(98777),z=t(48670),G=t(75499);function Q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X={base_branch:null,body:null,compare_branch:null,repository:null,title:null};var Y=function(e){var n=e.actionRemoteName,t=e.branch,r=e.branches,i=e.fetchBranch,o=e.loading,l=e.remotes,s=e.repositories,g=e.repositoryName,P=e.setActionRemoteName,C=e.setRepositoryName,_=e.showError,O=(0,u.useState)((null===t||void 0===t?void 0:t.name)||""),k=O[0],S=O[1],I=(0,u.useState)(null),H=I[0],A=I[1],D=(0,u.useState)(null),R=D[0],B=D[1],U=(0,u.useState)(X),L=U[0],Q=U[1],Y=(0,a.Db)(w.ZP.git_custom_branches.useUpdate(null===t||void 0===t?void 0:t.name),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(e){var n=e.git_custom_branch,t=n.error,r=n.progress;t?(A(t),B(null)):(i(),A(null),B(r))},onErrorCallback:function(e,n){return _({errors:n,response:e})}})}}),J=(0,c.Z)(Y,2),$=J[0],ee=J[1].isLoading,ne=(0,u.useMemo)((function(){var e;return null===s||void 0===s||null===(e=s.find((function(e){return e.name===g})))||void 0===e?void 0:e.url}),[s,g]),te=w.ZP.pull_requests.list({remote_url:ne,repository:g},{},{pauseFetch:!g}),re=te.data,ie=te.mutate,oe=(0,u.useMemo)((function(){return(null===re||void 0===re?void 0:re.pull_requests)||[]}),[re]),le=(0,u.useMemo)((function(){return(0,T.jsx)(G.Z,{columnFlex:[null,null,null,null],columns:[{uuid:"Title"},{uuid:"Author"},{uuid:"Created"},{uuid:"Last modified"}],onClickRow:function(e){var n,t=null===oe||void 0===oe||null===(n=oe[e])||void 0===n?void 0:n.url;t&&window.open(t,"_blank")},rows:null===oe||void 0===oe?void 0:oe.map((function(e){var n=e.created_at,t=e.last_modified,r=e.title,i=e.url,o=e.user;return[(0,T.jsx)(z.Z,{default:!0,href:i,monospace:!0,openNewWindow:!0,small:!0,children:r},"title"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:o},"user"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:n},"createdAt"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:t||"-"},"lastModified")]})),uuid:"pull-requests"})}),[oe]),se=w.ZP.git_custom_branches.list({remote_url:ne,repository:g},{},{pauseFetch:!g}).data,ce=(0,u.useMemo)((function(){return(null===se||void 0===se?void 0:se.git_custom_branches)||[]}),[se]);(0,u.useEffect)((function(){null!==L&&void 0!==L&&L.compare_branch||null===ce||void 0===ce||!ce.find((function(e){return e.name===(null===t||void 0===t?void 0:t.name)}))||Q((function(e){return K(K({},e),{},{compare_branch:null===t||void 0===t?void 0:t.name})}))}),[t,ce,L]);var ue=(0,a.Db)(w.ZP.pull_requests.useCreate(),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){ie(),Q(X)},onErrorCallback:function(e,n){return _({errors:n,response:e})}})}}),ae=(0,c.Z)(ue,2),de=ae[0],he=ae[1].isLoading;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(m.Z,{children:(0,N.vg)(M)})}),(0,T.jsxs)(j.Z,{mt:F.Mq,children:[(0,T.jsxs)(f.ZP,{children:[(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Remote"})}),o&&(0,T.jsx)(x.Z,{inverted:!0}),!o&&(0,T.jsx)(v.Z,{beforeIcon:(0,T.jsx)(y.MultiShare,{}),beforeIconSize:1.5*F.iI,monospace:!0,onChange:function(e){return P(e.target.value)},placeholder:"Choose remote",value:n||"",children:null===l||void 0===l?void 0:l.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Branch"})}),(0,T.jsxs)(v.Z,{beforeIcon:(0,T.jsx)(y.Branch,{}),beforeIconSize:1.5*F.iI,monospace:!0,onChange:function(e){return S(e.target.value)},placeholder:"Choose branch",value:k||"",children:[(0,T.jsx)("option",{value:""}),null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,T.jsx)(j.Z,{mt:F.cd,children:(0,T.jsxs)(d.ZP,{beforeIcon:(0,T.jsx)(y.Lightning,{size:2*F.iI}),disabled:!n||!k,loading:ee,onClick:function(){B(null),$({git_custom_branch:{action_payload:{branch:k,remote:n},action_type:M}})},primary:!0,children:[(0,N.vg)(M)," ",n," ",n&&k]})}),(R||H)&&(0,T.jsx)(j.Z,{mt:F.cd,children:(0,T.jsx)(p.ZP,{danger:!!H,default:!!R,monospace:!0,preWrap:!0,children:R||H})})]})]}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(m.Z,{children:"Create pull request"})}),(0,T.jsxs)(j.Z,{mt:F.Mq,children:[o&&(0,T.jsx)(x.Z,{inverted:!0}),!o&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(f.ZP,{children:[(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Repository"})}),(0,T.jsx)(v.Z,{monospace:!0,onChange:function(e){return C(e.target.value)},placeholder:"Choose repository",value:g||"",children:null===s||void 0===s?void 0:s.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Base branch"})}),g&&!se&&(0,T.jsx)(x.Z,{inverted:!0}),(!g||se)&&(0,T.jsx)(v.Z,{beforeIcon:(0,T.jsx)(y.Branch,{}),beforeIconSize:1.5*F.iI,disabled:!g,monospace:!0,onChange:function(e){return Q((function(n){return K(K({},n),{},{base_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===L||void 0===L?void 0:L.base_branch)||"",children:null===ce||void 0===ce?void 0:ce.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})]}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsxs)("div",{children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),g&&!se&&(0,T.jsx)(x.Z,{inverted:!0}),(!g||se||(null===L||void 0===L?void 0:L.compare_branch))&&(0,T.jsxs)(v.Z,{beforeIcon:(0,T.jsx)(y.Branch,{}),beforeIconSize:1.5*F.iI,disabled:!g,monospace:!0,onChange:function(e){return Q((function(n){return K(K({},n),{},{compare_branch:e.target.value})}))},placeholder:"Choose branch",value:(null===L||void 0===L?void 0:L.compare_branch)||"",children:[!(null!==ce&&void 0!==ce&&ce.length)&&(null===L||void 0===L?void 0:L.compare_branch)&&(0,T.jsx)("option",{value:null===L||void 0===L?void 0:L.compare_branch,children:null===L||void 0===L?void 0:L.compare_branch}),null===ce||void 0===ce?void 0:ce.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,T.jsx)(j.Z,{mt:1,children:(0,T.jsx)(Z.Z,{label:"Title",monospace:!0,onChange:function(e){return Q((function(n){return K(K({},n),{},{title:e.target.value})}))},value:(null===L||void 0===L?void 0:L.title)||""})}),(0,T.jsx)(j.Z,{mt:1,children:(0,T.jsx)(b.Z,{label:"Description",monospace:!0,onChange:function(e){return Q((function(n){return K(K({},n),{},{body:e.target.value})}))},value:(null===L||void 0===L?void 0:L.body)||""})}),(0,T.jsx)(j.Z,{mt:F.cd,children:(0,T.jsx)(d.ZP,{beforeIcon:(0,T.jsx)(y.Lightning,{size:2*F.iI}),disabled:!g||!(null!==L&&void 0!==L&&L.title)||!(null!==L&&void 0!==L&&L.base_branch)||!(null!==L&&void 0!==L&&L.compare_branch),loading:he,onClick:function(){de({pull_request:K(K({},L),{},{remote_url:ne,repository:g})})},primary:!0,children:"Create new pull request"})})]})]}),(0,T.jsx)(j.Z,{mt:F.Mq,children:(0,T.jsx)(W.Z,{visibleMapping:{0:!g},children:(0,T.jsxs)(q.Z,{noPaddingContent:!0,title:re?"Pull requests (".concat(null===oe||void 0===oe?void 0:oe.length,")"):"Pull requests",children:[!g&&(0,T.jsx)(j.Z,{p:F.cd,children:(0,T.jsx)(p.ZP,{muted:!0,children:"Please select a repository to view open pull requests."})}),g&&(0,T.jsxs)(T.Fragment,{children:[!re&&(0,T.jsx)(j.Z,{p:F.cd,children:(0,T.jsx)(x.Z,{inverted:!0})}),re&&le]})]})})})]}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(j.Z,{mb:F.HN,children:(0,T.jsx)(h.Z,{light:!0})}),(0,T.jsx)(f.ZP,{children:(0,T.jsx)(d.ZP,{beforeIcon:(0,T.jsx)(y.PaginateArrowLeft,{}),linkProps:{href:"/version-control?tab=".concat(E.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:E.uuid})})]})]})},J=t(4230),$=t(52479),ee=t(70652),ne=t(97618),te=t(25976),re=te.default.div.withConfig({displayName:"indexstyle__SpacingStyle",componentId:"sc-el09vr-0"})(["margin-top:","px;"],.5*F.iI),ie=t(42122);function oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var se,ce=function(e){var n=e.branch,t=e.fetchBranch,r=e.modifiedFiles,i=e.setSelectedFilePath,o=e.showError,l=e.stagedFiles,s=e.untrackedFiles,v=(0,u.useRef)(null),Z=(0,u.useState)(""),g=Z[0],P=Z[1],C=(0,u.useState)({}),_=C[0],O=C[1],k=(0,u.useState)({}),M=k[0],S=k[1],I=(0,u.useMemo)((function(){return Object.keys(r).concat(Object.keys(s)).sort()}),[r,s]),H=(0,u.useMemo)((function(){return Object.keys(l||{})}),[l]),E=(0,u.useMemo)((function(){return H.length}),[H]),R=(0,u.useMemo)((function(){return Object.keys(_).length===(null===I||void 0===I?void 0:I.length)}),[_,I]),B=(0,u.useMemo)((function(){return Object.keys(M).length===(null===H||void 0===H?void 0:H.length)}),[M,H]),U=(0,u.useMemo)((function(){return{onErrorCallback:function(e,n){return o({errors:n,response:e})}}}),[o]),L=(0,u.useMemo)((function(){return{onSuccess:function(e){return(0,V.wD)(e,le({callback:function(){t(),O({})}},U))}}}),[t,U]),Q=(0,u.useMemo)((function(){return w.ZP.git_custom_branches.useUpdate(null===n||void 0===n?void 0:n.name)}),[n]),K=(0,a.Db)(Q,L),X=(0,c.Z)(K,2),Y=X[0],J=X[1].isLoading,$=(0,a.Db)(Q,L),te=(0,c.Z)($,2),oe=te[0],se=te[1].isLoading,ce=(0,a.Db)(Q,{onSuccess:function(e){return(0,V.wD)(e,le({callback:function(){t(),S({})}},U))}}),ue=(0,c.Z)(ce,2),ae=ue[0],de=ue[1].isLoading,he=(0,u.useCallback)((function(e,n,t,r,i){var o=(null===e||void 0===e?void 0:e.length)>=1;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(z.Z,{block:!0,noHoverUnderline:!0,onClick:function(){t(i?{}:r)},preventDefault:!0,children:(0,T.jsxs)(f.ZP,{alignItems:"center",flexDirection:"row",children:[(0,T.jsx)(ee.Z,{checked:o&&i,disabled:!o}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(p.ZP,{bold:!0,children:o&&i?"Unselect all":"Select all"})]})}),e.map((function(e){return(0,T.jsx)(re,{children:(0,T.jsx)(z.Z,{block:!0,noHoverUnderline:!0,onClick:function(){return t((function(n){var t=le({},n);return!(null!==t&&void 0!==t&&t[e])?t[e]=!0:delete t[e],t}))},preventDefault:!0,children:(0,T.jsxs)(f.ZP,{alignItems:"center",flexDirection:"row",children:[(0,T.jsx)(ee.Z,{checked:!(null===n||void 0===n||!n[e])}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,children:e})]})})},e)}))]})}),[]),fe=(0,u.useMemo)((function(){return(0,ie.Qr)(_)}),[_]),me=w.ZP.git_custom_branches.detail("with_logs",{_format:"with_logs"}),ve=me.data,je=me.mutate,xe=(0,u.useMemo)((function(){var e;return(null===ve||void 0===ve||null===(e=ve.git_custom_branch)||void 0===e?void 0:e.logs)||[]}),[ve]),pe=(0,a.Db)(w.ZP.git_custom_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){je(),t(),P("")},onErrorCallback:function(e,n){return o({errors:n,response:e})}})}}),be=(0,c.Z)(pe,2),Ze=be[0],ge=be[1].isLoading,we=(0,u.useMemo)((function(){return(0,T.jsx)(G.Z,{columnFlex:[1,1,1],columns:[{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:xe.map((function(e){var n=e.author,t=e.date,r=e.message;return[(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===n||void 0===n?void 0:n.name},"author"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:t},"date"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:r},"message")]})),uuid:"git-branch-logs"})}),[xe]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.Z,{mb:F.HN,children:(0,T.jsxs)(f.ZP,{children:[(0,T.jsxs)(ne.Z,{flex:1,flexDirection:"column",children:[(0,T.jsxs)(m.Z,{children:["Not staged ",(null===I||void 0===I?void 0:I.length)>=1&&"(".concat(null===I||void 0===I?void 0:I.length,")")]}),(0,T.jsx)(j.Z,{my:F.cd,children:(0,T.jsx)(h.Z,{light:!0})}),(0,T.jsx)(j.Z,{mb:F.cd,children:(0,T.jsxs)(f.ZP,{flexDirection:"row",children:[(0,T.jsx)(d.ZP,{compact:!0,disabled:fe||de||se,loading:J,onClick:function(){Y({git_custom_branch:{action_type:"add",files:Object.keys(_)}}).then((function(e){var n,t=e.data;null!==t&&void 0!==t&&t.git_custom_branch&&(null===v||void 0===v||null===(n=v.current)||void 0===n||n.focus())}))},primary:!0,children:"Add files"}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(d.ZP,{compact:!0,disabled:fe||J||de,loading:se,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to undo all changes in the selected files?")&&oe({git_custom_branch:{action_type:"checkout",files:Object.keys(_)}})},children:"Checkout files"})]})}),he(I,_,O,le(le({},r),s),R)]}),(0,T.jsx)(j.Z,{mr:F.cd}),(0,T.jsxs)(ne.Z,{flex:1,flexDirection:"column",children:[(0,T.jsxs)(m.Z,{children:["Staged files ",(null===H||void 0===H?void 0:H.length)>=1&&"(".concat(null===H||void 0===H?void 0:H.length,")")]}),(0,T.jsx)(j.Z,{my:F.cd,children:(0,T.jsx)(h.Z,{light:!0})}),(0,T.jsx)(j.Z,{mb:F.cd,children:(0,T.jsx)(f.ZP,{flexDirection:"row",children:(0,T.jsx)(d.ZP,{compact:!0,disabled:(0,ie.Qr)(M)||J||se,loading:de,onClick:function(){ae({git_custom_branch:{action_type:"reset",files:Object.keys(M)}})},secondary:!0,children:"Reset files"})})}),he(H,M,S,l,B)]})]})}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(m.Z,{children:"Commit"})}),(0,T.jsx)(j.Z,{mb:F.cd,children:(0,T.jsx)(W.Z,{children:(0,T.jsx)(q.Z,{noPaddingContent:!0,title:E>=1?"Staged files (".concat(E,")"):"No staged files",children:null===H||void 0===H?void 0:H.map((function(e){return(0,T.jsx)(j.Z,{my:1,px:F.cd,children:(0,T.jsxs)(f.ZP,{justifyContent:"space-between",children:[(0,T.jsx)(z.Z,{default:!0,monospace:!0,onClick:function(){return i((function(n){return n===e?null:e}))},warning:null===r||void 0===r?void 0:r[e],children:e}),(0,T.jsx)(j.Z,{mr:1}),(null===r||void 0===r?void 0:r[e])&&(0,T.jsx)(p.ZP,{warning:!0,children:"Modified after staging"})]})},e)}))})})}),(0,T.jsx)(b.Z,{label:"Commit message",monospace:!0,onChange:function(e){return P(e.target.value)},ref:v,value:g||""}),(0,T.jsx)(j.Z,{mt:F.cd,children:(0,T.jsxs)(f.ZP,{alignItems:"center",children:[(0,T.jsxs)(d.ZP,{disabled:0===E||!((null===g||void 0===g?void 0:g.length)>=1),loading:ge,onClick:function(){Ze({git_custom_branch:{action_type:"commit",message:g}})},primary:!0,children:["Commit ",(0,N._6)("file",E,!0)," with message"]}),0===E&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(p.ZP,{danger:!0,small:!0,children:"Please stage at least 1 file before committing."})]})]})})]}),(0,T.jsx)(j.Z,{mb:F.HN,children:(0,T.jsx)(W.Z,{children:(0,T.jsxs)(q.Z,{noPaddingContent:!0,title:"Logs",children:[!ve&&(0,T.jsx)(j.Z,{p:F.cd,children:(0,T.jsx)(x.Z,{inverted:!0})}),ve&&we]})})}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(j.Z,{mb:F.HN,children:(0,T.jsx)(h.Z,{light:!0})}),(0,T.jsxs)(f.ZP,{children:[(0,T.jsx)(d.ZP,{beforeIcon:(0,T.jsx)(y.PaginateArrowLeft,{}),linkProps:{href:"/version-control?tab=".concat(A.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:A.uuid}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsxs)(d.ZP,{afterIcon:(0,T.jsx)(y.PaginateArrowRight,{}),linkProps:fe?{href:"/version-control?tab=".concat(D.uuid)}:null,noHoverUnderline:!0,primary:fe,sameColorAsText:!0,secondary:!fe,children:["Next: ",D.uuid]})]})]})]})},ue=t(23531),ae=t(12691),de=t.n(ae),he=t(34376),fe=t(63403),me=te.default.svg.withConfig({displayName:"BitbucketWithText__SVGStyle",componentId:"sc-wdje9z-0"})([""]),ve=function(e){var n=e.fill,t=e.opacity,r=e.size,i=void 0===r?fe.C:r,o=e.style,l=e.viewBox,s=void 0===l?"0 0 299 42":l;return(0,T.jsxs)(me,{fill:n,height:i,opacity:t,style:o,viewBox:s,width:i,children:[(0,T.jsx)("path",{d:"M63.3372 2.9978H79.5353C87.4335 2.9978 91.2488 6.77741 91.2488 12.8379C91.2488 17.3994 89.1068 20.2016 84.756 21.179C90.4455 22.0914 93.3237 25.1542 93.3237 30.4978C93.3237 36.4931 89.1737 40.6637 80.4724 40.6637H63.3372V2.9978ZM68.625 19.0939H78.799C83.8191 19.0939 85.894 16.8782 85.894 13.2289C85.894 9.57954 83.6852 7.82008 78.799 7.82008H68.625V19.0939ZM68.625 23.7206V35.4504H80.673C85.7601 35.4504 88.036 33.6909 88.036 29.9113C88.036 25.871 85.827 23.7206 80.5393 23.7206H68.625Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M101.958 0.977783C104.033 0.977783 105.506 2.21592 105.506 4.43157C105.506 6.58205 104.033 7.88536 101.958 7.88536C99.8833 7.88536 98.4106 6.6472 98.4106 4.43157C98.4106 2.21592 99.8833 0.977783 101.958 0.977783ZM99.3478 11.9907H104.435V40.6638H99.3478V11.9907Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M123.779 36.0376C124.984 36.0376 126.055 35.7769 126.992 35.6466V40.4037C126.121 40.6643 125.117 40.8599 123.578 40.8599C117.286 40.8599 114.207 37.2756 114.207 31.9321V16.5529H109.455V11.9912H114.207V5.93091H119.16V11.9912H126.992V16.5529H119.16V31.7367C119.093 34.2781 120.633 36.0376 123.779 36.0376Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M138.504 35.5806V40.5982H133.417V0H138.504V17.1386C140.378 13.359 143.926 11.4039 148.477 11.4039C156.309 11.4039 160.258 17.8554 160.258 26.3271C160.258 34.4076 156.108 41.25 147.875 41.25C143.524 41.25 140.244 39.3602 138.504 35.5806ZM147.072 16.0309C142.52 16.0309 138.504 18.8329 138.504 25.2191V27.5001C138.504 33.8863 142.186 36.6883 146.536 36.6883C152.226 36.6883 155.171 33.0392 155.171 26.3921C155.171 19.4194 152.36 16.0309 147.072 16.0309Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M165.546 11.991H170.633V29.3252C170.633 34.4733 172.775 36.7541 177.594 36.7541C182.279 36.7541 185.559 33.6913 185.559 27.8915V11.991H190.647V40.664H185.559V35.972C183.685 39.3607 180.204 41.2505 176.255 41.2505C169.495 41.2505 165.613 36.6888 165.613 28.8039V11.991H165.546Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M219.027 39.8814C217.287 40.7938 214.542 41.1847 211.864 41.1847C201.355 41.1847 196.469 34.9941 196.469 26.1967C196.469 17.5296 201.355 11.3389 211.864 11.3389C214.542 11.3389 216.55 11.6647 218.892 12.7072V17.2689C217.019 16.4218 215.011 15.9006 212.266 15.9006C204.636 15.9006 201.49 20.5924 201.49 26.1967C201.49 31.8009 204.702 36.4929 212.401 36.4929C215.412 36.4929 217.287 36.1018 219.092 35.4502V39.8814H219.027Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M224.783 40.6635V0H229.87V25.4147L242.52 11.9904H249.147L235.29 26.0664L249.681 40.6635H242.789L229.802 27.2392V40.6635H224.783Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M266.483 41.2506C255.437 41.2506 250.619 35.0599 250.619 26.2624C250.619 17.5954 255.572 11.4045 264.541 11.4045C273.644 11.4045 277.259 17.5302 277.259 26.2624V28.4781H255.773C256.51 33.3655 259.722 36.4935 266.684 36.4935C270.096 36.4935 272.974 35.8418 275.652 34.9296V39.4911C273.175 40.7944 269.494 41.2506 266.483 41.2506ZM255.706 24.2423H272.172C271.904 18.8987 269.427 15.9012 264.34 15.9012C258.919 15.9012 256.242 19.2897 255.706 24.2423Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M294.929 36.0376C296.134 36.0376 297.205 35.7769 298.142 35.6466V40.4037C297.272 40.6643 296.267 40.8599 294.728 40.8599C288.437 40.8599 285.359 37.2756 285.359 31.9321V16.5529H280.606V11.9912H285.359V5.93091H290.311V11.9912H298.142V16.5529H290.311V31.7367C290.245 34.2781 291.784 36.0376 294.929 36.0376Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M1.36497 4.1062C0.556341 4.1062 -0.117513 4.82301 0.0172582 5.605L5.74501 39.1654C5.87979 40.0127 6.62103 40.6642 7.56442 40.6642H34.9903C35.6641 40.6642 36.2032 40.208 36.338 39.5565L42.0658 5.605C42.2006 4.82301 41.594 4.1062 40.718 4.1062H1.36497ZM25.4889 28.3479H16.7288L14.3704 16.3573H27.6453L25.4889 28.3479Z",fill:n||"white"}),(0,T.jsx)("path",{d:"M40.2462 16.3572H27.5775L25.4886 28.3478H16.7286L6.3512 40.2079C6.3512 40.2079 6.82289 40.6641 7.56413 40.6641H34.99C35.6639 40.6641 36.2029 40.2079 36.3377 39.5562L40.2462 16.3572Z",fill:"url(#paint0_linear_13549_1163)"}),(0,T.jsx)("defs",{children:(0,T.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint0_linear_13549_1163",x1:"43.1513",x2:"22.7826",y1:"19.7256",y2:"36.1667",children:[(0,T.jsx)("stop",{offset:"0.176",stopColor:"#0052CC"}),(0,T.jsx)("stop",{offset:"1",stopColor:"#2684FF"})]})})]})},je=t(40109),xe=t(69419),pe=t(53808),be=(se={},(0,s.Z)(se,je.h.GITHUB,y.GitHubWithTextIcon),(0,s.Z)(se,je.h.BITBUCKET,ve),se);function Ze(e){var n=e.isLoadingCreateOauth,t=e.oauth,r=e.provider,i=e.showError,o=(0,he.useRouter)(),l=(0,a.Db)(w.ZP.oauths.useUpdate(r),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){return window.location.href=window.location.href.split("?")[0]},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),s=(0,c.Z)(l,2),u=s[0],h=s[1].isLoading,m=be[r];return(0,T.jsxs)(f.ZP,{justifyContent:"space-between",children:[(0,T.jsx)(ne.Z,{children:(0,T.jsx)(m,{size:12*F.iI})}),(0,T.jsx)(ne.Z,{alignItems:"center",children:null!==t&&void 0!==t&&t.authenticated?(0,T.jsx)(d.ZP,{loading:h,onClick:function(){return u({oauth:{action_type:"reset"}})},warning:!0,children:"Reset"}):(0,T.jsx)(d.ZP,{loading:n,onClick:function(){var e=null===t||void 0===t?void 0:t.url,n=(0,xe.iV)(e).state;(0,pe.t8)(n,(null===t||void 0===t?void 0:t.redirect_query_params)||{}),o.push(e)},primary:!0,children:"Authenticate"})})]})}var ge=function(e){var n=e.branch,t=e.isLoadingCreateOauth,r=e.showError,i=w.ZP.oauths.list({type:"git",redirect_uri:encodeURIComponent(window.location.href)}),o=i.data,l=(i.mutate,w.ZP.oauths.detail(je.h.GITHUB,{redirect_uri:encodeURIComponent(window.location.href)})),s=l.data,a=(l.mutate,(0,u.useMemo)((function(){return(null===s||void 0===s?void 0:s.oauth)||{}}),[s])),f=(0,u.useMemo)((function(){return null===n||void 0===n?void 0:n.access_token_exists}),[n]),v=(0,u.useMemo)((function(){var e,n=(null===o||void 0===o||null===(e=o.oauths)||void 0===e?void 0:e.reduce((function(e,n){return e[n.provider]=n,e}),{}))||{};return a&&(n[je.h.GITHUB]=a),n}),[o,a]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(m.Z,{children:"Authentication"}),(0,T.jsxs)(j.Z,{mt:F.Mq,children:[f&&(0,T.jsxs)(j.Z,{mb:2,children:[(0,T.jsx)(d.ZP,{disabled:!0,children:"Using access token from Git Settings"}),(0,T.jsx)(j.Z,{mt:1,children:(0,T.jsx)(p.ZP,{muted:!0,children:"Some features may not work unless you authenticate with a Git client."})})]}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(j.Z,{mb:F.Mq,children:(0,T.jsx)(p.ZP,{muted:!0,children:"Authenticating with the apps below will allow you to easily pull, push, and create pull requests."})}),(0,T.jsxs)(j.Z,{mb:F.Mq,style:{maxWidth:"600px"},children:[(0,T.jsx)(h.Z,{muted:!0}),Object.entries(v||{}).map((function(e){var n=(0,c.Z)(e,2),i=n[0],o=n[1];return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ze,{isLoadingCreateOauth:t,oauth:o,provider:i,showError:r},i),(0,T.jsx)(h.Z,{muted:!0})]})}))]})]})]})]})},we=t(77417);var ye=function(e){var n,t,r,i,o=e.actionRemoteName,l=e.branch,s=e.fetchBranch,b=e.loading,g=e.remotes,C=e.setActionRemoteName,O=e.showError,M=(0,he.useRouter)(),S=(0,we.Z)().project,I=(0,u.useRef)(null),H=(0,u.useState)(null),E=H[0],D=H[1],R=(0,u.useState)(null),B=R[0],U=R[1],L=(0,u.useState)(null),Q=L[0],K=L[1],X=(0,u.useState)(null),Y=X[0],J=X[1],$=(0,u.useState)(!1),ee=$[0],te=$[1],re=(0,u.useState)(null),ie=re[0],oe=re[1],le=(0,u.useState)(""),se=le[0],ce=le[1],ue=(0,u.useState)(""),ae=ue[0],fe=ue[1],me=(0,u.useState)(null),ve=me[0],pe=me[1],be=(0,u.useMemo)((function(){return!(null===l||void 0===l||!l.name)}),[l]);(0,u.useMemo)((function(){return null===l||void 0===l?void 0:l.access_token_exists}),[l]),(0,u.useEffect)((function(){var e,n;!ve&&(null!==l&&void 0!==l&&null!==(e=l.sync_config)&&void 0!==e&&e.repo_path||null!==S&&void 0!==S&&S.repo_path)&&pe((null===l||void 0===l||null===(n=l.sync_config)||void 0===n?void 0:n.repo_path)||(null===S||void 0===S?void 0:S.repo_path))}),[l,S,ve]);var Ze=(0,u.useMemo)((function(){var e,n;return null===g||void 0===g||null===(e=g.find((function(e){return e.name===o})))||void 0===e||null===(n=e.refs)||void 0===n?void 0:n.map((function(e){var n=e.name.split("/");return{name:n[n.length-1]}}))}),[o,g]),ye=(0,a.Db)(w.ZP.syncs.useCreate(),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){s(),te(!1)},onErrorCallback:function(e,n){return O({errors:n,response:e})}})}}),Pe=(0,c.Z)(ye,2),Ce=Pe[0],_e=Pe[1].isLoading,Oe=(0,a.Db)(w.ZP.oauths.useUpdate("github"),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){return window.location.href=window.location.href.split("?")[0]},onErrorCallback:function(e,n){return O({errors:n,response:e})}})}}),ke=(0,c.Z)(Oe,2),Me=(ke[0],ke[1].isLoading,(0,a.Db)(w.ZP.git_custom_branches.useUpdate(null===l||void 0===l?void 0:l.name),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(e){var n=e.git_custom_branch,t=n.error,r=n.progress;t?(U(t),J(null)):(s(),D(null),U(null),K(null),J(r))},onErrorCallback:function(e,n){return O({errors:n,response:e})}})}})),Se=(0,c.Z)(Me,2),Ie=Se[0],He=Se[1].isLoading,Ae=(0,a.Db)(w.ZP.git_custom_branches.useUpdate(null===l||void 0===l?void 0:l.name),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){s(),ce(""),fe("")},onErrorCallback:function(e,n){return O({errors:n,response:e})}})}}),Ee=(0,c.Z)(Ae,2),De=Ee[0],Re=Ee[1].isLoading,Be=(0,a.Db)(w.ZP.git_custom_branches.useUpdate(null===l||void 0===l?void 0:l.name),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){s(),oe(null)},onErrorCallback:function(e,n){oe(null),O({errors:n,response:e})}})}}),Fe=(0,c.Z)(Be,2),Ne=Fe[0],Ve=Fe[1].isLoading,Te=(0,a.Db)(w.ZP.oauths.useCreate(),{onSuccess:function(e){return(0,V.wD)(e,{callback:function(){return window.location.href="".concat(M.basePath,"/version-control")},onErrorCallback:function(e,n){O({errors:n,response:e})}})}}),Ue=(0,c.Z)(Te,2),Le=Ue[0],We=Ue[1].isLoading,qe=(0,xe.iV)()||{},ze=qe.access_token,Ge=qe.provider;(0,u.useEffect)((function(){ze&&Le({oauth:{provider:Ge||je.h.GITHUB,token:ze}})}),[ze,Le,Ge]);var Qe=(0,u.useMemo)((function(){return null===g||void 0===g?void 0:g.map((function(e){var n=e.name,t=e.refs,r=e.urls;return(0,T.jsxs)(j.Z,{mt:F.Mq,children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsxs)(f.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,T.jsxs)(ne.Z,{alignItems:"center",children:[(0,T.jsx)(p.ZP,{bold:!0,children:n}),(0,T.jsx)(j.Z,{mx:1,children:(0,T.jsx)(y.ChevronRight,{muted:!0})}),null===r||void 0===r?void 0:r.map((function(e){return(0,T.jsx)(j.Z,{mr:1,children:(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:e})},e)}))]}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(d.ZP,{compact:!0,disabled:Ve&&ie!==n,iconOnly:!0,loading:Ve&&ie===n,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to remove remote ".concat(n,"?"))&&(oe(n),Ne({git_custom_branch:{action_type:"remove_remote",action_payload:{name:n}}}).then((function(){o===n&&C(null)})))},small:!0,title:"Remote remote ".concat(n),children:(0,T.jsx)(y.Trash,{})})]})}),(0,T.jsx)(W.Z,{children:(0,T.jsxs)(q.Z,{noPaddingContent:!0,smallTitle:!0,title:"Refs (".concat(null===t||void 0===t?void 0:t.length,")"),children:[0===(null===t||void 0===t?void 0:t.length)&&(0,T.jsx)(j.Z,{p:F.cd,children:(0,T.jsx)(p.ZP,{muted:!0,children:"This remote has no refs."})}),(null===t||void 0===t?void 0:t.length)>=1&&(0,T.jsx)(G.Z,{columnFlex:[1,1,1],columns:[{uuid:"Ref"},{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:t.map((function(e){var n,t=e.commit,r=e.name;return[(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:r},"ref-name"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===t||void 0===t||null===(n=t.author)||void 0===n?void 0:n.name},"author"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===t||void 0===t?void 0:t.date},"date"),(0,T.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===t||void 0===t?void 0:t.message},"message")]})),uuid:"git-branch-remotes-refs"})]})}),(0,T.jsx)(j.Z,{mt:F.Mq,children:(0,T.jsx)(h.Z,{light:!0})})]},n)}))}),[Ve,ie,g,Ne]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(m.Z,{children:"Setup"}),(0,T.jsxs)(j.Z,{mt:F.Mq,children:[(0,T.jsxs)(j.Z,{mb:1,children:[(0,T.jsx)(p.ZP,{bold:!0,large:!0,children:be?"Git init directory":"Initialize Git directory"}),!be&&(0,T.jsxs)(p.ZP,{muted:!0,children:["Enter the directory you want to initialize git in.",(0,T.jsx)("br",{}),"The current project directoy is filled in for you. If you want to use that, click the save button."]}),be&&(0,T.jsxs)(p.ZP,{muted:!0,children:["If the directory below is blank, then the current working directory will be used to initialize git.",(0,T.jsx)("br",{}),"If git hasn\u2019t been initialized in the directory below, Mage will automatically run git init for you."]})]}),(0,T.jsxs)(f.ZP,{alignItems:"center",children:[(0,T.jsx)(Z.Z,{disabled:be&&!ee,fullWidth:!0,label:"Git directory",maxWidth:400,monospace:!0,onChange:function(e){return pe(e.target.value)},ref:I,value:ve||""}),(0,T.jsx)(j.Z,{mr:1}),(!be||ee)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(d.ZP,{compact:!0,disabled:!be&&!ve,loading:_e,onClick:function(){Ce({sync:{repo_path:ve}})},primary:!0,small:!0,children:"Save"}),be&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(z.Z,{onClick:function(){return te(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Cancel"})]})]}),be&&!ee&&(0,T.jsx)(z.Z,{onClick:function(){te(!0),setTimeout((function(){var e;return null===I||void 0===I||null===(e=I.current)||void 0===e?void 0:e.focus()}),1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Edit"})]})]})]}),(0,T.jsx)(j.Z,{mb:F.HN,children:(0,T.jsx)(ge,{branch:l,isLoadingCreateOauth:We,showError:O})}),be&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsxs)(m.Z,{children:["Remotes",!b&&g?" (".concat(null===g||void 0===g?void 0:g.length,")"):""]}),b&&(0,T.jsx)(j.Z,{mt:F.Mq,children:(0,T.jsx)(x.Z,{inverted:!0})}),!b&&Qe,(0,T.jsx)(j.Z,{mt:F.Mq,children:(0,T.jsxs)(f.ZP,{alignItems:"flex-start",children:[(0,T.jsx)(Z.Z,{label:"New remote name",monospace:!0,onChange:function(e){var n;return ce(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:se||""}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsxs)(f.ZP,{flexDirection:"column",children:[(0,T.jsx)(Z.Z,{label:"Remote URL",monospace:!0,onChange:function(e){var n;return fe(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:ae||""}),(0,T.jsx)(j.Z,{mt:1,children:(0,T.jsxs)(p.ZP,{muted:!0,small:!0,children:["Use the https URL if you",(0,T.jsx)("br",{}),"authenticated with GitHub above."]})})]}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(d.ZP,{beforeIcon:(0,T.jsx)(y.Add,{size:2*F.iI}),disabled:!se||!ae,loading:Re,onClick:function(){De({git_custom_branch:{action_type:"add_remote",action_payload:{name:se,url:ae}}})},primary:!0,children:"Create new remote"})]})})]}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(m.Z,{children:"Actions"}),(0,T.jsxs)(j.Z,{mt:F.Mq,children:[(0,T.jsxs)(j.Z,{mb:F.Mq,children:[(0,T.jsx)(j.Z,{mb:1,children:(0,T.jsx)(p.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(null===l||void 0===l?void 0:l.name)&&(0,T.jsxs)(f.ZP,{alignItems:"center",children:[(0,T.jsx)(p.ZP,{monospace:!0,children:null===l||void 0===l?void 0:l.name}),(0,T.jsx)(j.Z,{mr:F.cd}),(0,T.jsx)(de(),{href:"/version-control?tab=".concat(A.uuid),passHref:!0,children:(0,T.jsx)(z.Z,{small:!0,children:"Switch branch"})})]})]}),(0,T.jsxs)(f.ZP,{children:[(0,T.jsxs)(v.Z,{onChange:function(e){return K(e.target.value)},placeholder:"Action",value:Q||"",children:[(0,T.jsx)("option",{value:_,children:(0,N.vg)(_)}),(0,T.jsx)("option",{value:k,children:(0,N.vg)(k)}),(0,T.jsx)("option",{value:"reset",children:(0,N.vg)("reset --hard")}),(0,T.jsx)("option",{value:P,children:(0,N.vg)(P)})]}),(0,T.jsx)(j.Z,{mr:1}),(0,T.jsx)(v.Z,{beforeIcon:(0,T.jsx)(y.MultiShare,{}),beforeIconSize:1.5*F.iI,monospace:!0,onChange:function(e){return C(e.target.value)},placeholder:"Remote",value:o||"",children:null===g||void 0===g?void 0:g.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))}),![_,P].includes(Q)&&(0,T.jsx)(j.Z,{ml:1,children:(0,T.jsxs)(v.Z,{beforeIcon:(0,T.jsx)(y.Branch,{}),beforeIconSize:1.5*F.iI,monospace:!0,onChange:function(e){return D(e.target.value)},value:E||"",children:[(0,T.jsx)("option",{value:"",children:"All branches"}),null===Ze||void 0===Ze?void 0:Ze.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))]})})]}),P===Q&&(0,T.jsxs)(j.Z,{mt:F.cd,children:[(0,T.jsxs)(p.ZP,{muted:!0,small:!0,children:["Cloning a branch will copy all the files and folders from the remote repository and put them into the Git directory configured above:",(0,T.jsx)("br",{}),(0,T.jsx)(p.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:null===l||void 0===l||null===(n=l.sync_config)||void 0===n?void 0:n.repo_path}),"."]}),(0,T.jsx)(j.Z,{mt:1,children:(0,T.jsx)(p.ZP,{muted:!0,small:!0,children:"Cloning won\u2019t automatically create a folder that is named after the remote repository."})}),(0,T.jsx)(j.Z,{mt:1,children:(0,T.jsxs)(p.ZP,{muted:!0,small:!0,children:["For example, if you have a file named ",(0,T.jsx)(p.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"magic.py"})," in a remote repository named ",(0,T.jsx)(p.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:"project_romeo"}),(0,T.jsx)("br",{}),"then that file will be cloned here ",(0,T.jsxs)(p.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:[null===l||void 0===l||null===(t=l.sync_config)||void 0===t?void 0:t.repo_path,"/magic.py"]}),(0,T.jsx)("br",{}),"as opposed to ",(0,T.jsxs)(p.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:[null===l||void 0===l||null===(r=l.sync_config)||void 0===r?void 0:r.repo_path,"/project_romeo/magic.py"]}),"."]})}),(0,T.jsx)(j.Z,{mt:1,children:(0,T.jsxs)(p.ZP,{muted:!0,small:!0,children:["If you want to clone the content of a remote repository into a folder named after the remote repository, then change the Git init directoy above to",(0,T.jsx)("br",{}),(0,T.jsxs)(p.ZP,{default:!0,inline:!0,monospace:!0,small:!0,children:[null===l||void 0===l||null===(i=l.sync_config)||void 0===i?void 0:i.repo_path,"/",(0,T.jsx)(p.ZP,{inline:!0,monospace:!0,small:!0,children:"[remote repository name]"})]})]})})]}),(0,T.jsxs)(j.Z,{mt:F.cd,children:[(0,T.jsx)(d.ZP,{beforeIcon:(0,T.jsx)(y.Lightning,{size:2*F.iI}),disabled:!Q||!o,loading:He,onClick:function(){J(null),(Q!==P||"undefined"!==typeof location&&window.confirm("Are you sure you want to clone remote ".concat(o,"? This will ")+"overwrite all your local changes and may reset any settings you may have configured for your local Git repo. This action cannot be undone."))&&Ie({git_custom_branch:{action_payload:{branch:E,remote:o},action_type:Q}})},primary:!0,children:Q?(0,N.vg)(Q):"Execute action"}),(Y||B)&&(0,T.jsx)(j.Z,{mt:F.cd,children:(0,T.jsx)(p.ZP,{danger:!!B,default:!!Y,monospace:!0,preWrap:!0,children:Y||B})})]})]})]}),(0,T.jsxs)(j.Z,{mb:F.HN,children:[(0,T.jsx)(j.Z,{mb:F.HN,children:(0,T.jsx)(h.Z,{light:!0})}),(0,T.jsx)(f.ZP,{children:(0,T.jsxs)(d.ZP,{afterIcon:(0,T.jsx)(y.PaginateArrowRight,{}),linkProps:{href:"/version-control?tab=".concat(A.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",A.uuid]})})]})]})]})},Pe=t(68192),Ce=t(98464),_e=t(19698),Oe=t(46684),ke=t(53005),Me=t(15610),Se=(t(17717),t(74401));function Ie(e,n){var t=(0,Se.a)(e),r=Object.keys(n)||[];return null===r||void 0===r?void 0:r.find((function(e){return null===t||void 0===t?void 0:t.endsWith(e)}))}var He=t(86735),Ae=t(23780);function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function De(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Re=function(){var e=(0,u.useRef)(null),n=(0,u.useRef)(null),t=((0,_e.Z)().status,(0,Ae.VI)(null,{},[],{uuid:"VersionControlPage"})),r=(0,c.Z)(t,1)[0],i=(0,u.useState)(!0),o=i[0],l=i[1],d=(0,u.useState)(30*F.iI),f=d[0],m=d[1],b=(0,u.useState)(30*F.iI),Z=b[0],y=b[1],P=(0,u.useState)({}),C=P[0],_=P[1],O=(0,u.useState)(null),k=O[0],M=O[1],S=(0,u.useState)(null),N=S[0],V=S[1],W=(0,u.useState)(B[0]),q=W[0],z=W[1],G=(0,u.useState)({"All projects":{uuid:"All projects"},"Git directory":{uuid:"Git directory"}}),Q=G[0],K=G[1],X=(0,xe.iV)();(0,u.useEffect)((function(){null!==X&&void 0!==X&&X.tab&&z(B.find((function(e){return e.uuid===(null===X||void 0===X?void 0:X.tab)})))}),[X]);var ee=w.ZP.git_custom_branches.list({include_remote_branches:1}),ne=ee.data,te=ee.mutate,re=(0,u.useMemo)((function(){return null===ne||void 0===ne?void 0:ne.git_custom_branches}),[ne]);(0,u.useEffect)((function(){var e,n;!k&&(null===re||void 0===re?void 0:re.length)>=1&&null!==(e=re[0])&&void 0!==e&&e.name&&M(null===(n=re[0])||void 0===n?void 0:n.name)}),[k,re]);var oe=w.ZP.git_custom_branches.detail("current",{_format:"with_files"}),le=oe.data,se=oe.mutate,ae=(0,u.useMemo)((function(){return(null===le||void 0===le?void 0:le.git_custom_branch)||{}}),[le]),de=(0,u.useMemo)((function(){return(null===ae||void 0===ae?void 0:ae.files)||[]}),[ae]),he=w.ZP.git_custom_branches.detail("with_remotes",{_format:"with_remotes"}),fe=he.data,me=he.mutate,ve=(0,u.useMemo)((function(){return null===fe||void 0===fe?void 0:fe.git_custom_branch}),[fe]),je=(0,u.useMemo)((function(){return(null===ve||void 0===ve?void 0:ve.remotes)||[]}),[ve]),be=(0,u.useState)(null),Ze=be[0],ge=be[1],we=(0,u.useCallback)((function(e){(0,pe.t8)(I,e),ge(e)}),[]);(0,u.useEffect)((function(){var e=(0,pe.U2)(I,null);if(fe&&e){var n=null===je||void 0===je?void 0:je.find((function(n){return n.name===e}));we(n?null===n||void 0===n?void 0:n.name:null)}}),[fe,je,we]);var Se=(0,u.useState)((0,pe.U2)(H,"")),Ee=Se[0],Re=Se[1],Be=(0,u.useCallback)((function(e){(0,pe.t8)(H,e),Re(e)}),[]),Fe=(0,u.useMemo)((function(){return(0,He.Tw)(je.reduce((function(e,n){var t;return e.concat((null===n||void 0===n||null===(t=n.repository_names)||void 0===t?void 0:t.map((function(e){var t;return{name:e,url:null===n||void 0===n||null===(t=n.urls)||void 0===t?void 0:t[0]}})))||[])}),[]),(function(e){return e.name}))}),[je]);(0,u.useEffect)((function(){var e=(0,pe.U2)(H,null);if(fe&&e){var n=null===Fe||void 0===Fe?void 0:Fe.find((function(n){return n.name===e}));Be(n?null===n||void 0===n?void 0:n.name:null)}}),[fe,Fe,Be]);var Ne=w.ZP.git_files.detail(N?encodeURIComponent(N):null,{base_branch:k}),Ve=Ne.data,Te=Ne.mutate,Ue=(0,u.useMemo)((function(){return null===Ve||void 0===Ve?void 0:Ve.git_file}),[Ve]),Le=(0,Ce.Z)(Ue);(0,u.useEffect)((function(){if(Ue!==Le){var e,n=null===ae||void 0===ae||null===(e=ae.files_absolute_path)||void 0===e?void 0:e[N];_((function(e){var t;return De(De({},e),{},(0,s.Z)({},n,De(De({},Ue),{},{fullPath:n,relativePath:N,repoPath:null===ae||void 0===ae||null===(t=ae.sync_config)||void 0===t?void 0:t.repo_path})))}))}}),[ae,Ue,Le]),(0,u.useEffect)((function(){k&&Te()}),[k,Te]),(0,u.useEffect)((function(){null!==Ve&&void 0!==Ve&&Ve.error&&r({errors:null===Ve||void 0===Ve?void 0:Ve.error,response:Ve})}),[Ve,r]);var We=(0,u.useMemo)((function(){var e,n,t;return{modifiedFiles:null===ae||void 0===ae||null===(e=ae.modified_files)||void 0===e?void 0:e.reduce((function(e,n){return De(De({},e),{},(0,s.Z)({},n,!0))}),{}),stagedFiles:null===ae||void 0===ae||null===(n=ae.staged_files)||void 0===n?void 0:n.reduce((function(e,n){return De(De({},e),{},(0,s.Z)({},n,!0))}),{}),untrackedFiles:null===ae||void 0===ae||null===(t=ae.untracked_files)||void 0===t?void 0:t.reduce((function(e,n){return De(De({},e),{},(0,s.Z)({},n,!0))}),{})}}),[ae]),qe=We.modifiedFiles,ze=void 0===qe?{}:qe,Ge=We.stagedFiles,Qe=void 0===Ge?{}:Ge,Ke=We.untrackedFiles,Xe=void 0===Ke?{}:Ke;(0,u.useEffect)((function(){N&&(0,ie.Qr)(ze)&&(0,ie.Qr)(Qe)&&(0,ie.Qr)(Xe)&&V(null)}),[ze,N,Qe,Xe]);var Ye=(0,u.useMemo)((function(){return(null===de||void 0===de?void 0:de.length)>=1?(0,T.jsx)($.Z,{allowEmptyFolders:!0,disableContextMenu:!0,fetchFiles:se,files:de,isFileDisabled:function(){return!1},onClickFile:function(e){V((function(t){if(!t||t!==e){var r;if(!k)null===n||void 0===n||null===(r=n.current)||void 0===r||r.focus();return e}return null})),Te()},ref:e,renderAfterContent:function(e){var n,t,r=e.children,i=(null===r||void 0===r?void 0:r.length)>=1,o=(0,ke.a9)(e);i&&(o="".concat(o,"/"));var l={};return Ie(e,ze)?(n="M",t="Modified",l.warning=!0):Ie(e,Xe)?(n="U",t="Untracked",l.danger=!0):Ie(e,Qe)&&(n="S",t="Staged",l.success=!0),i&&!n?null:(0,T.jsx)(j.Z,{mx:1,children:(0,T.jsx)(g.Z,{appearBefore:!0,label:t,widthFitContent:!0,children:(0,T.jsx)(p.ZP,De(De({},l),{},{monospace:!0,rightAligned:!0,small:!0,children:n}))})})},useRootFolder:!0}):(0,T.jsx)(j.Z,{p:F.cd,children:(0,T.jsx)(p.ZP,{monospace:!0,muted:!0,children:"No files modified"})})}),[k,se,Te,e,de,ze,n,V,Qe,Xe]),Je=((0,u.useMemo)((function(){return!Ve||!Ue||N&&(null===Ue||void 0===Ue?void 0:Ue.filename)!==N}),[Ve,Ue,N]),(0,u.useMemo)((function(){return le&&null!==ae&&void 0!==ae&&ae.name?B:B.slice(0,1)}),[ae,le])),$e=(0,u.useMemo)((function(){return(0,T.jsxs)("div",{style:{marginTop:5},children:[(0,T.jsx)(L.Z,{onClickTab:function(e){var n=e.uuid;(0,Me.u)({tab:n})},selectedTabUUID:null===q||void 0===q?void 0:q.uuid,tabs:Je,underlineStyle:!0}),(0,T.jsx)(h.Z,{light:!0})]})}),[q,Je]),en=(0,u.useMemo)((function(){return(0,T.jsx)(ye,{actionRemoteName:Ze,branch:ae,fetchBranch:function(){se(),me()},loading:!fe,remotes:je,setActionRemoteName:we,showError:r})}),[Ze,ae,fe,se,me,je,we,r]),nn=(0,u.useMemo)((function(){return(0,T.jsx)(U,{actionRemoteName:Ze,branch:ae,branches:re,fetchBranch:se,fetchBranches:te,remotes:je,setActionRemoteName:we,showError:r})}),[Ze,ae,re,se,te,je,we,r]),tn=(0,u.useMemo)((function(){return(0,T.jsx)(ce,{branch:ae,fetchBranch:se,modifiedFiles:ze,setSelectedFilePath:V,showError:r,stagedFiles:Qe,untrackedFiles:Xe})}),[ae,se,ze,V,r,Qe,Xe]),rn=(0,u.useMemo)((function(){return(0,T.jsx)(Y,{actionRemoteName:Ze,branch:ae,branches:re,fetchBranch:se,loading:!fe,modifiedFiles:ze,remotes:je,repositories:Fe,repositoryName:Ee,setActionRemoteName:we,setRepositoryName:Be,showError:r,stagedFiles:Qe})}),[Ze,ae,re,fe,se,ze,je,Fe,Ee,we,Be,r,Qe]),on=(0,u.useMemo)((function(){return(0,T.jsx)(L.Z,{allowScroll:!0,onClickTab:function(e){K((function(n){return De(De({},(0,ie.gR)(n,[null===e||void 0===e?void 0:e.uuid])),null!==n&&void 0!==n&&n[null===e||void 0===e?void 0:e.uuid]?{}:(0,s.Z)({},null===e||void 0===e?void 0:e.uuid,e))}))},selectedTabUUIDs:Q,tabs:[{uuid:"All projects"},{uuid:"Git directory"}],underlineStyle:!0})}),[Q]),ln=(0,u.useCallback)((function(){Te()}),[Te]),sn=(0,u.useCallback)((function(){se()}),[se]),cn=(0,u.useMemo)((function(){var e;if(N)return null===ae||void 0===ae||null===(e=ae.files_absolute_path)||void 0===e?void 0:e[N]}),[ae,N]),un=(0,u.useCallback)((function(e){_((function(n){return(0,ie.gR)(n,[e])}))}),[]),an=(0,Pe.Z)({codeEditorMaximumHeightOffset:2*Oe.Mz+10,onClickTabClose:un,onCreateFile:sn,onUpdateFileSuccess:ln,originalContent:C,selectedFilePath:cn,showHiddenFilesSetting:!0}),dn=an.browser,hn=an.controller,fn=an.filePaths,mn=(an.menu,an.selectedFilePath),vn=an.tabs,jn=(0,a.Db)((function(e){var n=e.filePath,t=e.query;return w.ZP.git_files.detailAsync(encodeURIComponent(n),t)})),xn=(0,c.Z)(jn,2),pn=xn[0];xn[1].isLoading,(0,u.useEffect)((function(){mn&&pn({filePath:mn,query:{base_branch:k,derive:!0}}).then((function(e){return _((function(n){var t;return De(De({},n),{},(0,s.Z)({},mn,null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.git_file))}))}))}),[mn]),(0,u.useEffect)((function(){(null===fn||void 0===fn?void 0:fn.length)>=1&&l(!1)}),[fn]);var bn=(0,u.useMemo)((function(){var e=[];return"All projects"in Q&&e.push([{render:function(e){var n=e.columnWidth;return(0,T.jsx)("div",{style:{width:"".concat(n,"px")},children:dn})}}]),"Git directory"in Q&&e.push([{render:function(){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(j.Z,{p:1,children:(0,T.jsx)(v.Z,{compact:!0,label:"Base branch",onChange:function(e){return M(e.target.value)},ref:n,small:!0,value:k||"",children:null===re||void 0===re?void 0:re.map((function(e){var n=e.name;return(0,T.jsx)("option",{value:n,children:n},n)}))})}),Ye]})}}]),(0,T.jsx)(ue.Z,{columnsOfItems:e,fullHeight:!0,heightOffset:2*Oe.Mz,uuid:"version-control-all-modified-files",width:Z})}),[re,dn,Z,Ye,Q]);return(0,T.jsx)(J.Z,{after:hn,afterHeader:vn,afterHidden:o,afterWidth:f,before:bn,beforeHeader:on,beforeWidth:Z,mainContainerHeader:$e,setAfterHidden:l,setAfterWidth:m,setBeforeWidth:y,title:"Version control",uuid:"Version control/index",children:(0,T.jsxs)(j.Z,{p:F.cd,children:[!le&&(0,T.jsx)(x.Z,{inverted:!0}),le&&(0,T.jsxs)(T.Fragment,{children:[R.uuid===(null===q||void 0===q?void 0:q.uuid)&&en,A.uuid===(null===q||void 0===q?void 0:q.uuid)&&nn,E.uuid===(null===q||void 0===q?void 0:q.uuid)&&tn,D.uuid===(null===q||void 0===q?void 0:q.uuid)&&rn]})]})})};function Be(){return(0,T.jsx)(Re,{})}Be.getInitialProps=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Fe=(0,l.Z)(Be)},75302:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version-control",function(){return t(37520)}])},80022:function(e,n,t){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.d(n,{Z:function(){return r}})},15544:function(e,n,t){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.d(n,{Z:function(){return r}})},13692:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(61049);function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&(0,r.Z)(e,n)}},93189:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(12539),i=t(80022);function o(e,n){if(n&&("object"===r(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},61049:function(e,n,t){"use strict";function r(e,n){return r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},r(e,n)}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[6085,7011,1557,8038,2479,3449,8192,9774,2888,179],(function(){return n=75302,e(e.s=n);var n}));var n=e.O();_N_E=n}]);