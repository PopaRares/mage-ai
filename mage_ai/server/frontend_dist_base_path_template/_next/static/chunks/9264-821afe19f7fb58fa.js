"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9264],{85108:function(n,e,t){t.d(e,{G8:function(){return p},SR:function(){return v},VR:function(){return a},_H:function(){return h},x8:function(){return m}});var o,i,r,l,u,c,a,d=t(82394),s=t(35058);!function(n){n.COLUMNS="columns",n.METRICS="metrics",n.NUMBER="number"}(a||(a={}));var f={noCode:[{label:function(){return"time column"},settings:{maxValues:1},type:a.COLUMNS,uuid:s.eN},{label:function(){return"time interval"},options:[s.aE.ORIGINAL,s.aE.SECOND,s.aE.MINUTE,s.aE.HOUR,s.aE.DAY,s.aE.WEEK,s.aE.MONTH,s.aE.YEAR],uuid:s.Yg},{label:function(){return"metrics"},type:a.METRICS,uuid:s.bE}]},p=(o={},(0,d.Z)(o,s.oV.BAR_CHART,{noCode:[{label:function(){return"group by columns"},type:a.COLUMNS,uuid:s.eN},{label:function(){return"metrics"},type:a.METRICS,uuid:s.bE},{autoRun:!0,label:function(){return"chart style"},options:[s.JT.HORIZONTAL,s.JT.VERTICAL],uuid:s.R8},{autoRun:!0,label:function(){return"sort direction"},options:[null,s.MP.ASCENDING,s.MP.DESCENDING],uuid:s.$1}],code:[{label:function(){return"variable name of x-axis values"},monospace:!0,uuid:s.a3},{label:function(){return"variable name of y-axis values"},monospace:!0,uuid:s.rj}]}),(0,d.Z)(o,s.oV.HISTOGRAM,{noCode:[{label:function(){return"number column for chart"},settings:{maxValues:1},type:a.COLUMNS,uuid:s.eN},{autoRun:!0,label:function(){return"Number of buckets"},type:a.NUMBER,uuid:s.m7}],code:[{label:function(){return"variable name of values"},monospace:!0,uuid:s.a3}]}),(0,d.Z)(o,s.oV.LINE_CHART,{noCode:[{label:function(){return"group by columns"},settings:{maxValues:1},type:a.COLUMNS,uuid:s.eN},{label:function(){return"metrics"},type:a.METRICS,uuid:s.bE}],code:[{label:function(){return"variable name of x-axis values"},monospace:!0,uuid:s.a3},{label:function(){return"variable name of y-axis values"},monospace:!0,uuid:s.rj},{label:function(){return"labels of lines in chart (comma separated)"},uuid:s.e}]}),(0,d.Z)(o,s.oV.PIE_CHART,{noCode:[{label:function(){return"column for chart"},settings:{maxValues:1},type:a.COLUMNS,uuid:s.eN},{autoRun:!0,label:function(){return"Number of slices"},type:a.NUMBER,uuid:s.m7}],code:[{label:function(){return"variable name of values"},monospace:!0,uuid:s.a3}]}),(0,d.Z)(o,s.oV.TABLE,{noCode:[{label:function(){return"columns"},type:a.COLUMNS,uuid:s.eN},{label:function(){return"max number of rows"},type:a.NUMBER,uuid:s.PG}],code:[{label:function(){return"variable name of columns"},monospace:!0,uuid:s.a3},{label:function(){return"variable name of rows"},monospace:!0,uuid:s.rj}]}),(0,d.Z)(o,s.oV.TIME_SERIES_BAR_CHART,f),(0,d.Z)(o,s.oV.TIME_SERIES_LINE_CHART,f),o),m=(i={},(0,d.Z)(i,s.oV.BAR_CHART,{configuration:function(n){var e;return e={},(0,d.Z)(e,s.a3,"x"),(0,d.Z)(e,s.rj,"y"),(0,d.Z)(e,s.R8,s.JT.VERTICAL),e},content:function(n){return"columns = df_1.columns\nx = df_1.columns[:7]\ny = [[v] for v in [len(df_1[col].unique()) for col in x]]\n"}}),(0,d.Z)(i,s.oV.HISTOGRAM,{configuration:function(n){var e;return e={},(0,d.Z)(e,s.m7,10),(0,d.Z)(e,s.a3,"x"),e},content:function(n){return"columns = df_1.columns\ncol = list(filter(lambda x: df_1[x].dtype == float or df_1[x].dtype == int, columns))[0]\nx = df_1[col]\n"}}),(0,d.Z)(i,s.oV.LINE_CHART,{configuration:function(n){var e;return e={},(0,d.Z)(e,s.a3,"x"),(0,d.Z)(e,s.rj,"y"),e},content:function(n){return"columns = df_1.columns\ncols = list(filter(lambda x: df_1[x].dtype == float or df_1[x].dtype == int, columns))\nx = df_1[cols[0]]\ny = [df_1[cols[1]]]\n"}}),(0,d.Z)(i,s.oV.PIE_CHART,{configuration:function(n){var e;return e={},(0,d.Z)(e,s.m7,7),(0,d.Z)(e,s.a3,"x"),e},content:function(n){return"x = df_1[df_1.columns[0]]"}}),(0,d.Z)(i,s.oV.TABLE,{configuration:function(n){var e;return e={},(0,d.Z)(e,s.PG,10),(0,d.Z)(e,s.a3,"x"),(0,d.Z)(e,s.rj,"y"),e},content:function(n){return"x = df_1.columns\ny = df_1.to_numpy()"}}),(0,d.Z)(i,s.oV.TIME_SERIES_BAR_CHART,{configuration:function(n){return(0,d.Z)({},s.Yg,s.aE.ORIGINAL)}}),(0,d.Z)(i,s.oV.TIME_SERIES_LINE_CHART,{configuration:function(n){return(0,d.Z)({},s.Yg,s.aE.ORIGINAL)}}),i),v=(c={},(0,d.Z)(c,s.oV.BAR_CHART,(r={},(0,d.Z)(r,s.a3,(function(){return"must be a list of booleans, dates, integers, floats, or strings."})),(0,d.Z)(r,s.rj,(function(){return"must be a list of lists containing integers or floats."})),r)),(0,d.Z)(c,s.oV.HISTOGRAM,(0,d.Z)({},s.a3,(function(){return"must be a list of integers or floats."}))),(0,d.Z)(c,s.oV.LINE_CHART,(l={},(0,d.Z)(l,s.a3,(function(){return"must be a list of integers or floats."})),(0,d.Z)(l,s.rj,(function(){return"must be a list of lists containing integers or floats. Each list is a single line in the chart."})),l)),(0,d.Z)(c,s.oV.PIE_CHART,(0,d.Z)({},s.a3,(function(){return"must be a list of booleans, dates, integers, floats, or strings."}))),(0,d.Z)(c,s.oV.TABLE,(u={},(0,d.Z)(u,s.a3,(function(){return"must be a list of strings."})),(0,d.Z)(u,s.rj,(function(){return"must be a list of lists containing booleans, dates, integers, floats, or strings."})),u)),c),h=[{label:function(){return"% of missing values"},widgetTemplate:function(n){var e,t=n.block;return{name:"missing values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(e={},(0,d.Z)(e,s.a3,"columns_with_mising_values"),(0,d.Z)(e,s.rj,"percentage_of_missing_values"),(0,d.Z)(e,s.R8,s.JT.HORIZONTAL),(0,d.Z)(e,s.$1,s.MP.DESCENDING),(0,d.Z)(e,"chart_type",s.oV.BAR_CHART),e),content:"number_of_rows = len(df_1.index)\ncolumns_with_mising_values = []\npercentage_of_missing_values = []\nfor col in df_1.columns:\n    missing = df_1[col].isna().sum()\n    if missing > 0:\n        columns_with_mising_values.append(col)\n        percentage_of_missing_values.append(100 * missing / number_of_rows)\n"}}},{label:function(){return"Unique values"},widgetTemplate:function(n){var e,t=n.block;return{name:"unique values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(e={},(0,d.Z)(e,s.a3,"columns"),(0,d.Z)(e,s.rj,"number_of_unique_values"),(0,d.Z)(e,s.R8,s.JT.HORIZONTAL),(0,d.Z)(e,s.$1,s.MP.DESCENDING),(0,d.Z)(e,"chart_type",s.oV.BAR_CHART),e),content:"columns = df_1.columns\nnumber_of_unique_values = [df_1[col].nunique() for col in columns]\n"}}},{label:function(){return"Most frequent values"},widgetTemplate:function(n){var e,t=n.block;return{name:"most frequent values for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(e={},(0,d.Z)(e,s.JJ,3e3),(0,d.Z)(e,s.ED,"column_index"),(0,d.Z)(e,s.a3,"columns"),(0,d.Z)(e,s.rj,"rows"),(0,d.Z)(e,"chart_type",s.oV.TABLE),e),content:"columns = ['mode value', 'frequency', '% of values']\n\ncolumn_index = []\nrows = []\nfor col in df_1.columns:\n    value_counts = df_1[col].value_counts()\n    if len(value_counts.index) == 0:\n        continue\n    column_value = value_counts.index[0]\n    value = value_counts[column_value]\n    number_of_rows = df_1[col].count()\n    column_index.append(col)\n    rows.append([\n        column_value,\n        f'{round(100 * value / number_of_rows, 2)}%',\n        value,\n      ])\n"}}},{label:function(){return"Summary overview"},widgetTemplate:function(n){var e,t=n.block;return{name:"summary overview for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(e={},(0,d.Z)(e,s.JJ,3e3),(0,d.Z)(e,s.ED,"stats"),(0,d.Z)(e,s.a3,"headers"),(0,d.Z)(e,s.rj,"rows"),(0,d.Z)(e,"chart_type",s.oV.TABLE),e),content:"from mage_ai.data_cleaner.column_types.column_type_detector import infer_column_types\n\n\nheaders = ['value']\nstats = ['Columns', 'Rows']\nrows = [[len(df_1.columns)], [len(df_1.index)]]\n\ncol_counts = {}\nfor col, col_type in infer_column_types(df_1).items():\n    col_type_name = col_type.value\n    if not col_counts.get(col_type_name):\n        col_counts[col_type_name] = 0\n    col_counts[col_type_name] += 1\n\nfor col_type, count in sorted(col_counts.items()):\n    stats.append(f'# of {col_type}')\n    rows.append([count])\n"}}},{label:function(){return"Feature profiles"},widgetTemplate:function(n){var e,t=n.block;return{name:"feature profiles for ".concat(null===t||void 0===t?void 0:t.uuid),configuration:(e={},(0,d.Z)(e,s.JJ,3e3),(0,d.Z)(e,s.ED,"stats"),(0,d.Z)(e,s.a3,"columns"),(0,d.Z)(e,s.rj,"rows"),(0,d.Z)(e,"chart_type",s.oV.TABLE),e),content:"from mage_ai.data_cleaner.column_types.column_type_detector import infer_column_types\nimport statistics\n\n\ncolumns_and_types = infer_column_types(df_1).items()\ncolumns = [t[0] for t in columns_and_types]\nstats = ['Type', 'Missing values', 'Unique values', 'Min', 'Max', 'Mean', 'Median', 'Mode']\nrows = [[] for _ in stats]\n\nfor col, col_type in columns_and_types:\n    series = df_1[col]\n    min_value = None\n    max_value = None\n    mean = None\n    median = None\n\n    not_null = series[series.notnull()]\n\n    if col_type.value in ['number', 'number_with_decimals']:\n        count = len(not_null.index)\n        if count >= 1:\n            mean = round(not_null.sum() / count, 2)\n            median = sorted(not_null)[int(count / 2)]\n        min_value = round(series.min(), 2)\n        max_value = round(series.max(), 2)\n    else:\n        min_value = not_null.astype(str).min()\n        max_value = not_null.astype(str).max()\n\n    _, mode = sorted(\n      [(v, k) for k, v in not_null.value_counts().items()],\n      reverse=True,\n    )[0]\n\n    for idx, value in enumerate([\n        col_type.value,\n        len(series[series.isna()].index),\n        len(series.unique()),\n        min_value,\n        max_value,\n        mean,\n        median,\n        mode,\n    ]):\n      rows[idx].append(value)\n"}}}]},88494:function(n,e,t){t.d(e,{MB:function(){return m},Nk:function(){return a},T5:function(){return d},_A:function(){return f},a3:function(){return p},wx:function(){return s}});var o=t(38626),i=t(44897),r=t(55283),l=t(42631),u=t(70515),c=t(30160),a=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-n38rkq-0"})([""," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;overflow:hidden;"," "," "," ",""],r.Kf,(function(n){return n.addBottomPadding&&"\n    padding-bottom: ".concat(2*u.tr,"px;\n  ")}),(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).table,";\n  ")}),(function(n){return!n.executedAndIdle&&"\n    border-bottom-left-radius: ".concat(l.n_,"px;\n    border-bottom-right-radius: ").concat(l.n_,"px;\n    border-bottom-style: solid;\n    border-bottom-width: 2px;\n  ")}),(function(n){return n.showBorderTop&&"\n    border-top-left-radius: ".concat(l.n_,"px;\n    border-top-right-radius: ").concat(l.n_,"px;\n    border-top-style: solid;\n    border-top-width: 2px;\n  ")})),d=o.default.div.withConfig({displayName:"indexstyle__OutputRowStyle",componentId:"sc-n38rkq-1"})([""," "," "," ",""],(function(n){return n.first&&"\n    padding-top: ".concat(u.iI*u.cd,"px;\n  ")}),(function(n){return n.last&&"\n    padding-bottom: ".concat(u.iI*u.cd,"px;\n  ")}),(function(n){return n.contained&&!n.normalPadding&&"\n    padding-left: ".concat(r.oh,"px;\n    padding-right: ").concat(u.iI*u.cd,"px;\n  ")}),(function(n){return n.contained&&n.normalPadding&&"\n    padding-left: ".concat(u.iI*u.cd,"px;\n    padding-right: ").concat(u.iI*u.cd,"px;\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__HTMLOutputStyle",componentId:"sc-n38rkq-2"})([""," table{"," border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;}td,th{padding:0 8px;}a{","}"],c.IH,r.Kf,(function(n){return"\n      color: ".concat((n.theme.interactive||i.Z.interactive).linkPrimary,";\n    ")})),f=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoStyle",componentId:"sc-n38rkq-3"})([""," border-bottom-left-radius:","px;border-bottom-right-radius:","px;border-bottom-style:solid;border-bottom-width:2px;border-left-style:solid;border-left-width:2px;border-right-style:solid;border-right-width:2px;",""],r.Kf,l.n_,l.n_,(function(n){return"\n    background-color: ".concat((n.theme.borders||i.Z.borders).light,";\n  ")})),p=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoContentStyle",componentId:"sc-n38rkq-4"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;"],u.iI,r.oh,u.iI*u.cd,u.iI),m=o.default.div.withConfig({displayName:"indexstyle__ExtraInfoBorderStyle",componentId:"sc-n38rkq-5"})(["height:1px;width:100%;",""],(function(n){return"\n    border-top: 1px solid ".concat((n.theme.borders||i.Z.borders).medium,";\n  ")}))},12869:function(n,e,t){var o=t(21831),i=t(82394),r=t(75582),l=t(82684),u=t(89565),c=t.n(u),a=t(62302),d=t(69864),s=t(40761),f=t(44425),p=t(71180),m=t(39867),v=t(75810),h=t(93859),b=t(24138),g=t(15338),x=t(97618),j=t(55485),C=t(48339),O=t(57653),Z=t(35185),_=t(38276),E=t(30160),k=t(12468),y=t(35686),T=t(98464),S=t(72473),I=t(88494),P=t(92709),A=t(89706),R=t(65044),w=t(70515),D=t(11498),N=t(47041),M=t(55283),B=t(41429),L=t(85385),U=t(74052),F=t(81728),G=t(72619),H=t(28598);function Q(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function K(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var z={appearAbove:!0,appearBefore:!0,block:!0,size:null,widthFitContent:!0},q={basic:!0,iconOnly:!0,noPadding:!0,transparent:!0};function W(n,e){var t=n.block,i=n.blockIndex,u=n.blockMetadata,Q=n.buttonTabs,W=n.children,Y=n.childrenBelowTabs,V=n.collapsed,X=n.contained,J=void 0===X||X,$=n.dynamicBlock,nn=n.dynamicChildBlock,en=n.hasError,tn=n.hasOutput,on=n.hideExtraInfo,rn=n.hideOutput,ln=n.isInProgress,un=n.mainContainerWidth,cn=n.messages,an=n.messagesAll,dn=n.onClickSelectBlock,sn=n.openSidekickView,fn=n.outputRowNormalPadding,pn=n.pipeline,mn=n.runCount,vn=n.runEndTime,hn=n.runStartTime,bn=n.scrollTogether,gn=n.selected,xn=n.selectedTab,jn=n.setCollapsed,Cn=n.setErrors,On=n.setOutputBlocks,Zn=n.setSelectedOutputBlock,_n=n.setSelectedTab,En=n.showBorderTop,kn=n.sideBySideEnabled,yn=n.sparkEnabled,Tn=(0,l.useState)(!1),Sn=Tn[0],In=Tn[1];(0,l.useEffect)((function(){In(!0)}),[]);var Pn=(0,l.useCallback)((function(){var n=new CustomEvent(P.tK,{detail:{blockIndex:i}});window.dispatchEvent(n)}),[i]);(0,l.useEffect)((function(){Sn&&kn&&Pn()}),[an,Sn,bn,kn]);var An=t||{},Rn=An.color,wn=An.status,Dn=An.type,Nn=An.uuid,Mn=(0,l.useMemo)((function(){return{blockColor:Rn,blockType:Dn,dynamicBlock:$,dynamicChildBlock:nn,hasError:en,selected:gn}}),[Rn,Dn,$,nn,en,gn]),Bn=(0,l.useMemo)((function(){return(null===cn||void 0===cn?void 0:cn.length)||0}),[cn]),Ln=f.DA.EXECUTED===wn||!ln&&0===mn&&Bn>=1||!ln&&mn>=1&&vn>=hn,Un=(0,l.useState)(),Fn=Un[0],Gn=Un[1],Hn=(0,l.useState)(),Qn=Hn[0],Kn=Hn[1],zn=(0,l.useState)(null),qn=zn[0],Wn=zn[1],Yn=(0,l.useMemo)((function(){var n,e;return null===(n=new s.Z)||void 0===n||null===(e=n.decodedToken)||void 0===e?void 0:e.token}),[]),Vn=(0,d.Db)((function(){return y.ZP.block_outputs.pipelines.downloads.detailAsync(null===pn||void 0===pn?void 0:pn.uuid,Nn,{token:Yn},{onDownloadProgress:function(n){return Wn((Number((null===n||void 0===n?void 0:n.loaded)||0)/1e6).toFixed(3))},responseType:D.Eg.BLOB})}),{onSuccess:function(n){return(0,G.wD)(n,{callback:function(n){(0,U.uS)(n,"".concat(Nn,".").concat(A.Lu.CSV))},onErrorCallback:function(n,e){return null===Cn||void 0===Cn?void 0:Cn({errors:e,response:n})}})}}),Xn=(0,r.Z)(Vn,2),Jn=Xn[0],$n=Xn[1].isLoading;(0,l.useEffect)((function(){ln||Kn(100)}),[ln]);var ne=function(n){return Array.isArray(n)?n.join("\n"):n},ee=(0,l.useMemo)((function(){return(null===cn||void 0===cn?void 0:cn.length)>=1?cn.reduce((function(n,e){var t=n.at(-1);if(C.jU.includes(null===t||void 0===t?void 0:t.type)&&(null===t||void 0===t?void 0:t.type)===e.type&&!ne(null===e||void 0===e?void 0:e.data).match(R.Lz)){if(Array.isArray(t.data))t.data.concat(e.data);else if("string"===typeof t.data){var o=ne(e.data)||"";t.data=[t.data,o].join("\n")}}else C.jU.includes(null===e||void 0===e?void 0:e.type)&&!ne(null===e||void 0===e?void 0:e.data).match(R.Lz)?n.push(K(K({},e),{},{data:ne(e.data)})):n.push(K({},e));return n}),[]):an||[]}),[cn,an]),te=(0,l.useMemo)((function(){return!(null!==cn&&void 0!==cn&&cn.length)&&(null===an||void 0===an?void 0:an.length)>=1}),[cn,an]),oe=(0,l.useMemo)((function(){return(0,H.jsx)(Z.Z,{progress:Qn})}),[Qn]),ie=f.tf.DBT===(null===t||void 0===t?void 0:t.type),re=(0,T.Z)(en);(0,l.useEffect)((function(){ie&&!re&&en&&_n(B.Rj)}),[en,re,ie,_n]);var le=(0,l.useMemo)((function(){var n=function(n,e){var t=n.columns,o=n.index,i=n.rows,r=n.shape,l=e.borderTop,u=e.selected;return r&&Gn(r),(null===t||void 0===t?void 0:t.some((function(n){return""===n})))?(0,H.jsx)(_.Z,{mx:5,my:3,children:(0,H.jsx)(E.ZP,{monospace:!0,warning:!0,children:"Block output table could not be rendered due to empty string headers. Please check your data\u2019s column headers for empty strings."})}):i.length>=1&&(0,H.jsx)(h.Z,{columns:t,disableScrolling:!u,index:o,maxHeight:60*w.iI,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,noBorderTop:!l,rows:i,width:un-(2+w.cd*w.iI*2+2+N.nn)},"data-table-".concat(o))},e=[],t=[],i=[];return null===ee||void 0===ee||ee.forEach((function(r,l){var u,d,s,f=Array.isArray(r);if(te&&f?(d={columns:["-"],index:0,rows:null===r||void 0===r?void 0:r.map((function(n){return[(0,F.Pb)(n)?JSON.parse(n):n]})),shape:[null===r||void 0===r?void 0:r.length,1]},s=C.Gi.TABLE):"string"===typeof r?(d=r,s=C.Gi.TEXT_PLAIN):(d=null===r||void 0===r?void 0:r.data,s=null===r||void 0===r?void 0:r.type),f||d&&0!==(null===(u=d)||void 0===u?void 0:u.length)){var p=[];p=(p=Array.isArray(d)?d:[d]).filter((function(n){return n}));var m=[];p.forEach((function(n){if(s===C.Gi.TEXT_HTML)m.push(n);else if(n&&"string"===typeof n){var e=n.split("\n");m.push.apply(m,(0,o.Z)(e))}else"object"===typeof m&&m.push(n)}));var v=m.length,h=[];m.forEach((function(e,o){var r,u,d={contained:J,first:0===l&&0===o,last:l===ee.length-1&&o===v-1,normalPadding:fn,sideBySideEnabled:kn},f=l>=1;if("string"===typeof e&&e.match(R.Gr)){var p=e.split("\n"),m=[];p.forEach((function(n){if(n.match(R.Gr)){var t=n.split(R.Vc),o=t[t.length-1];(0,F.Pb)(o)&&i.push(JSON.parse(o))}else m.push(n);e=m.length>=1?m.join("\n"):null}))}if(null!==e){if("string"===typeof e&&e.match(R.Lz)){var b=e.split(R.gr),g=b[b.length-1],x=g.split("FloatProgress");if(b.length>=2&&(g=x[0]),(0,F.Pb)(g)){var j=JSON.parse(g),O=j.data,Z=j.type;if(C.Gi.TABLE===Z){!0;var _=n(O,{borderTop:f,selected:gn});t.push(_),ie||(u=_)}}}else if(s===C.Gi.TABLE){!0;var k=n((0,F.Pb)(e)?JSON.parse(e):e,{borderTop:f,selected:gn});t.push(k),ie||(u=k)}else if(C.jU.includes(s)){var y,T=null===(y=e)||void 0===y?void 0:y.split("\\n");u=(0,H.jsx)(I.T5,K(K({},d),{},{children:T.map((function(n){return(0,H.jsxs)(E.ZP,{monospace:!0,preWrap:!0,children:[(null===n||void 0===n?void 0:n.length)>=1&&(0,H.jsx)(c(),{children:n}),!(null!==n&&void 0!==n&&n.length)&&(0,H.jsx)(H.Fragment,{children:"\xa0"})]},n)}))}))}else if(s===C.Gi.TEXT_HTML)e&&(u=(0,H.jsx)(I.T5,K(K({},d),{},{children:(0,H.jsx)(I.wx,{monospace:!0,children:(0,H.jsx)(a.Z,{html:e})})})));else if(s===C.Gi.IMAGE_PNG&&(null===(r=e)||void 0===r?void 0:r.length)>=1)u=(0,H.jsx)("div",{style:{backgroundColor:"white"},children:(0,H.jsx)("img",{alt:"Image ".concat(l," from code output"),src:"data:image/png;base64, ".concat(e)})});else if(s===C.Gi.PROGRESS){var S=parseInt(e);Kn(S>90?90:S)}u&&h.push((0,H.jsx)("div",{children:u},"code-output-".concat(l,"-").concat(o)))}})),h.length>=1&&e.push(h)}})),ln&&(null===pn||void 0===pn?void 0:pn.type)===O.qL.PYSPARK&&!yn&&e.unshift([(0,H.jsx)(I.T5,{contained:!0,children:(0,H.jsx)(_.Z,{mt:1,children:oe})},"progress_bar")]),{content:e,tableContent:t,testContent:i}}),[ee,J,ie,ln,un,fn,pn,oe,te,gn,yn]),ue=le.content,ce=le.tableContent,ae=le.testContent,de=(null===Fn||void 0===Fn?void 0:Fn[1])||0,se=de>30?" (30 out of ".concat(de," columns displayed)"):"",fe=(0,l.useMemo)((function(){var n;if(ie&&xn){var e=xn.uuid;if(B.$m.uuid===e)(null===ce||void 0===ce?void 0:ce.length)>=1?n=ce:ln||(n=(0,H.jsx)(_.Z,{px:2,py:1,children:(0,H.jsx)(E.ZP,{muted:!0,children:en?"Error, check logs.":"No preview to display yet, try running the block."})}));else if(B.Rj.uuid===e)(null===ue||void 0===ue?void 0:ue.length)>=1?n=ue:ln||(n=(0,H.jsx)(_.Z,{px:2,py:1,children:(0,H.jsx)(E.ZP,{muted:!0,children:en?"Error, check logs.":"No logs to display yet, try running the block."})}));else if(B.Jt.uuid===e){var t,o=null===u||void 0===u||null===(t=u.dbt)||void 0===t?void 0:t.sql;n=o?(0,H.jsx)(v.Z,{autoHeight:!0,language:A.Lu.SQL,padding:2*w.iI,readOnly:!0,value:o,width:"100%"}):null}else if(B.gM.uuid===e){var i,r=null===u||void 0===u||null===(i=u.dbt)||void 0===i?void 0:i.lineage;n=r?(0,H.jsx)(b.ZP,{disabled:!0,enablePorts:!1,height:55*w.iI,pannable:gn,pipeline:K(K({},pn),{},{blocks:r}),zoomable:gn}):null}}else n=ue;return(0,H.jsxs)(H.Fragment,{children:[Q,Y,!rn&&n]})}),[u,Q,Y,ue,en,rn,ie,ln,pn,gn,xn,kn,ce]);return Q||en||tn||te||W?(0,H.jsx)("div",{ref:e,children:(0,H.jsxs)("div",{onClick:dn?function(){return null===dn||void 0===dn?void 0:dn()}:null,style:{paddingTop:kn?M.WC:0},children:[J&&(0,H.jsxs)(I.Nk,K(K({},Mn),{},{addBottomPadding:ln&&(null===pn||void 0===pn?void 0:pn.type)===O.qL.PYSPARK,blockType:Dn,dynamicBlock:$,dynamicChildBlock:nn,executedAndIdle:Ln,hasError:en,selected:gn,showBorderTop:En,children:[W,!V&&(null===ae||void 0===ae?void 0:ae.length)>=1&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(_.Z,{py:2,children:(0,H.jsx)(I.T5,{contained:!0,normalPadding:kn,children:ae.map((function(n,e){var t=n.error,o=n.message,i=n.stacktrace;return(0,H.jsxs)(_.Z,{mt:e>=1?3:0,children:[(0,H.jsx)(E.ZP,{monospace:!0,preWrap:!0,children:(0,H.jsx)(c(),{children:"".concat(o).concat(t?" "+t:"")})}),null===i||void 0===i?void 0:i.map((function(n){return(0,H.jsx)(E.ZP,{default:!0,monospace:!0,preWrap:!0,small:!0,children:(0,H.jsx)(c(),{children:n})},n)}))]},o)}))})}),(0,H.jsx)(_.Z,{mb:kn||en?2:0,children:(0,H.jsx)(g.Z,{medium:!0})})]}),!V&&fe]})),!J&&(0,H.jsxs)(H.Fragment,{children:[W,fe]}),Ln&&!on&&(0,H.jsxs)(I._A,K(K({},Mn),{},{blockType:Dn,dynamicBlock:$,dynamicChildBlock:nn,hasError:en,selected:gn,children:[(0,H.jsx)(I.MB,{}),(0,H.jsxs)(j.ZP,{justifyContent:"space-between",children:[(0,H.jsxs)(x.Z,{alignItems:"center",px:1,children:[jn&&(0,H.jsx)(p.ZP,K(K({},q),{},{onClick:function(){return jn(!V)},children:V?(0,H.jsxs)(j.ZP,{alignItems:"center",children:[(0,H.jsx)(S._M,{muted:!0,size:2*w.iI}),"\xa0",(0,H.jsx)(E.ZP,{default:!0,children:"Expand output"})]}):(0,H.jsxs)(j.ZP,{alignItems:"center",children:[(0,H.jsx)(S.Kh,{muted:!0,size:2*w.iI}),Fn&&(0,H.jsx)(_.Z,{ml:2,children:(0,H.jsx)(E.ZP,{children:"".concat(Fn[0]," rows x ").concat(Fn[1]," columns").concat(se)})})]})})),!jn&&(0,H.jsx)(j.ZP,{alignItems:"center",children:Fn&&(0,H.jsx)(_.Z,{pl:1,children:(0,H.jsx)(E.ZP,{children:"".concat(Fn[0]," rows x ").concat(Fn[1]," columns").concat(se)})})})]}),(0,H.jsx)(I.a3,{children:(0,H.jsxs)(j.ZP,{alignItems:"center",fullWidth:!0,justifyContent:"flex-end",children:[(0,H.jsx)(k.Z,K(K({},z),{},{label:mn>=1&&hn?"Last run at ".concat(new Date(hn.valueOf()).toLocaleString()):en?"Block executed with errors":"Block executed successfully",children:(0,H.jsxs)(j.ZP,{alignItems:"center",children:[mn>=1&&Number(vn)>Number(hn)&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(E.ZP,{small:!0,children:[(Number(vn)-Number(hn))/1e3,"s"]}),(0,H.jsx)(_.Z,{mr:1})]}),!en&&(0,H.jsx)(S.Jr,{size:2*w.iI,success:!0}),en&&(0,H.jsx)(m.Z,{danger:!0,size:2*w.iI,children:(0,H.jsx)(E.ZP,{bold:!0,monospace:!0,small:!0,children:"!"})})]})})),!en&&!f.Qj.includes(Dn)&&(0,H.jsx)(_.Z,{pl:2,children:(0,H.jsxs)(j.ZP,{alignItems:"center",children:[(0,H.jsx)(k.Z,K(K({},z),{},{label:"Expand table",children:(0,H.jsx)(p.ZP,K(K({},q),{},{onClick:function(){(0,U.OF)(null===pn||void 0===pn?void 0:pn.uuid,Nn),null===sn||void 0===sn||sn(L.cH.DATA),null===On||void 0===On||On((function(n){return n.find((function(n){return n.uuid===Nn}))?n:(null===Zn||void 0===Zn||Zn(t),n.concat(t))}))},children:(0,H.jsx)(S.M0,{muted:!0,size:1.75*w.iI})}))})),(0,H.jsx)(_.Z,{pl:2}),(0,H.jsx)(k.Z,K(K({},z),{},{forceVisible:$n,label:$n?"".concat(qn||0,"mb downloaded..."):"Save output as CSV file",children:(0,H.jsx)(p.ZP,K(K({},q),{},{compact:!0,loading:$n,onClick:function(){Wn(null),Jn()},children:(0,H.jsx)(S.vc,{muted:!0,size:1.75*w.iI})}))}))]})})]})})]})]}))]})}):null}e.Z=l.forwardRef(W)},69632:function(n,e,t){t.d(e,{JX:function(){return c},NJ:function(){return d},au:function(){return u},eQ:function(){return a}});var o=t(38626),i=t(44897),r=t(42631),l=t(70515),u=(l.iI,o.default.div.withConfig({displayName:"indexstyle__HeaderSectionStyle",componentId:"sc-nlaveq-0"})(["",""],(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).content,";\n  ")}))),c=o.default.div.withConfig({displayName:"indexstyle__StreamSectionStyle",componentId:"sc-nlaveq-1"})(["overflow:hidden;"," ",""],(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).content,";\n  ")}),(function(n){return!n.noBorderRadius&&"\n    border-bottom-left-radius: ".concat(r.n_,"px;\n    border-bottom-right-radius: ").concat(r.n_,"px;\n  ")})),a=o.default.div.withConfig({displayName:"indexstyle__EmptyCodeSpace",componentId:"sc-nlaveq-2"})(["",""],(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).codeTextarea,";\n  ")})),d=o.default.div.withConfig({displayName:"indexstyle__CalloutStyle",componentId:"sc-nlaveq-3"})(["border-radius:","px;padding:","px;",""],r.n_,l.cd*l.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).panel,";\n    border: 1px solid ").concat((n.theme.borders||i.Z.borders).light,";\n  ")}))},41429:function(n,e,t){t.d(e,{$m:function(){return i},C:function(){return m},C4:function(){return g},Jt:function(){return l},Rj:function(){return r},SD:function(){return s},Xy:function(){return c},aL:function(){return d},aj:function(){return b},gM:function(){return u},iz:function(){return p},p:function(){return f},qC:function(){return a},vT:function(){return v},zr:function(){return h}});var o=t(70515),i={uuid:"PREVIEW RESULTS"},r={uuid:"LOGS"},l={uuid:"SQL"},u={uuid:"LINEAGE"},c=function(n){var e,t,o=n.metadata,c=[r,l];return(null===o||void 0===o||null===(e=o.dbt)||void 0===e||null===(t=e.block)||void 0===t?void 0:t.snapshot)||(c.unshift(i),c.push(u)),c},a={uuid:"Jobs"},d={uuid:"Output"},s={uuid:"SQLs"},f={uuid:"Stages & Tasks"},p=function(n){return[d,a,f,s]},m=2.5*o.iI,v="CodeBlock_HiddenBlock",h={label:function(){return"CODE"},uuid:"code"},b={label:function(){return"INTERACTIONS"},uuid:"interactions"},g=[h,b]},68013:function(n,e,t){t.d(e,{z:function(){return Oe},Z:function(){return _e}});var o=t(75582),i=t(82394),r=t(21831),l=t(12691),u=t.n(l),c=t(82684),a=t(38626),d=t(10975),s=t(14567),f=t(69864),p=t(88014),m=t(79757),v=t(71180),h=t(55485),b=t(38276),g=t(30160),x=t(55283),j=t(28598);var C=function(n){var e=n.blocks,t=n.onClick,o=(0,c.useContext)(a.ThemeContext);return(0,j.jsx)(h.ZP,{alignItems:"center",children:null===e||void 0===e?void 0:e.map((function(n){var e=n.color,i=n.type,r=n.uuid,l=(0,x.qn)(i,{blockColor:e,theme:o}).accentLight;return(0,j.jsx)(b.Z,{ml:1,mt:1,children:(0,j.jsx)(v.ZP,{backgroundColor:l,compact:!0,onClick:function(){return t(n)},small:!0,children:(0,j.jsx)(g.ZP,{monospace:!0,small:!0,children:r})})},r)}))})},O=t(97618),Z=t(26084),_=t(85385),E=t(86735);function k(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function y(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?k(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var T=function(n){var e=n.block,t=n.blocks,i=n.openSidekickView,r=n.pipeline,l=(0,c.useMemo)((function(){return(0,E.HK)(t,(function(n){return n.uuid}))}),[t]),u=(0,c.useMemo)((function(){var n;return null===e||void 0===e||null===(n=e.callback_blocks)||void 0===n?void 0:n.reduce((function(n,e){var t=null===l||void 0===l?void 0:l[e];return t?n.concat(t):n}),[])}),[e,l]),a=(0,c.useMemo)((function(){var n;return null===e||void 0===e||null===(n=e.conditional_blocks)||void 0===n?void 0:n.reduce((function(n,e){var t=null===l||void 0===l?void 0:l[e];return t?n.concat(t):n}),[])}),[e,l]),d=(0,c.useMemo)((function(){var n,t=[];return null===(n=Object.entries((null===r||void 0===r?void 0:r.extensions)||{}))||void 0===n||n.forEach((function(n){var i=(0,o.Z)(n,2),r=i[0],u=i[1].blocks;null===u||void 0===u||u.forEach((function(n){var o=n.upstream_blocks,i=n.uuid;if(null!==o&&void 0!==o&&o.includes(null===e||void 0===e?void 0:e.uuid)){var u=null===l||void 0===l?void 0:l[i];u&&t.push(y(y({},u),{},{extension_uuid:r}))}}))})),t}),[e,l,r]),s=(0,c.useMemo)((function(){return null===a||void 0===a?void 0:a.length}),[a]),f=(0,c.useMemo)((function(){return null===u||void 0===u?void 0:u.length}),[u]),p=(0,c.useMemo)((function(){return null===d||void 0===d?void 0:d.length}),[d]);return s||f||p?(0,j.jsxs)(b.Z,{pb:s>=1||f>=1||p>=1?1:0,children:[s>=1&&(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(O.Z,{flexDirection:"column",children:[(0,j.jsx)(b.Z,{px:1,children:(0,j.jsx)(g.ZP,{bold:!0,muted:!0,children:"Conditionals"})}),(0,j.jsx)(C,{blocks:a,onClick:function(n){var e=n.uuid;return i(_.cH.ADDON_BLOCKS,!0,{addon:Z.Q.CONDITIONAL,blockUUID:e})}})]})}),f>=1&&(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(O.Z,{flexDirection:"column",children:[(0,j.jsx)(b.Z,{px:1,children:(0,j.jsx)(g.ZP,{bold:!0,muted:!0,children:"Callbacks"})}),(0,j.jsx)(C,{blocks:u,onClick:function(n){var e=n.uuid;return i(_.cH.ADDON_BLOCKS,!0,{addon:Z.Q.CALLBACK,blockUUID:e})}})]})}),p>=1&&(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(O.Z,{flexDirection:"column",children:[(0,j.jsx)(b.Z,{px:1,children:(0,j.jsx)(g.ZP,{bold:!0,muted:!0,children:"Extensions"})}),(0,j.jsx)(C,{blocks:d,onClick:function(n){var e=n.extension_uuid,t=n.uuid;return i(_.cH.EXTENSIONS,!0,{blockUUID:t,extension:e})}})]})})]}):null},S=t(81769),I=t(44425),P=t(90299),A=t(70652),R=t(39867),w=t(75810),D=t(12869),N=t(70374),M=t(35058),B=t(85108),L=t(70515),U=t(81728);function F(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function G(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?F(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var H=function(n){var e=n.addWidget,t=n.block,o=n.left,i=n.rightOffset,l=n.onClickCallback,u=n.open,a=n.parentRef,d=n.runBlock,s=n.topOffset,f=(0,c.useMemo)((function(){return M.CK.map((function(n){var o,i,r={configuration:{chart_type:n},language:t.language,type:I.tf.CHART,upstream_blocks:t?[t.uuid]:null},l=B.x8[n],u=(null===l||void 0===l||null===(o=l.configuration)||void 0===o?void 0:o.call(l,r))||{},c=I.t6.SQL===(null===t||void 0===t?void 0:t.language)?null:(null===l||void 0===l||null===(i=l.content)||void 0===i?void 0:i.call(l,r))||null,a=n;return t&&(a="".concat(a," for ").concat(t.uuid)),{label:function(){return(0,U.vg)(n)},onClick:function(){return e(G(G({},r),{},{name:"".concat(a," ").concat((0,U.Mp)()),configuration:G(G({},r.configuration),u),content:c}),{onCreateCallback:function(n){t&&I.t6.SQL!==t.language&&([I.DA.EXECUTED,I.DA.UPDATED].includes(t.status)?null===d||void 0===d||d({block:n,code:c,disableReset:!0}):null===d||void 0===d||d({block:t,runDownstream:!0}))}})},uuid:n}}))}),[M.CK,t,d]),p=(0,c.useMemo)((function(){return B._H.map((function(n){var o=n.label,i=G(G({},(0,n.widgetTemplate)({block:t})),{},{language:t.language,type:I.tf.CHART,upstream_blocks:t?[t.uuid]:null});return{label:o,onClick:function(){return e(i,{onCreateCallback:function(n){t&&I.t6.SQL!==t.language&&([I.DA.EXECUTED,I.DA.UPDATED].includes(t.status)?null===d||void 0===d||d({block:n,code:n.content,disableReset:!0}):null===d||void 0===d||d({block:t,runDownstream:!0}))}})},uuid:o()}}))}),[B._H,e,t,d]),m=[{isGroupingTitle:!0,label:function(){return"Custom charts"},uuid:"custom_charts"}].concat((0,r.Z)(f));return I.t6.SQL!==t.language&&m.push.apply(m,[{isGroupingTitle:!0,label:function(){return"Templates"},uuid:"chart_templates"}].concat((0,r.Z)(p))),(0,j.jsx)(N.Z,{items:m,left:o,onClickCallback:l,open:u,parentRef:a,rightOffset:i,topOffset:s,uuid:"CommandButtons/add_charts",width:25*L.iI})},Q=t(50724),K=t(63403),z=a.default.svg.withConfig({displayName:"Convert__SVGStyle",componentId:"sc-fmw0vr-0"})([""]),q=function(n){var e=n.fill,t=n.opacity,o=n.size,i=void 0===o?K.C:o,r=n.style,l=n.viewBox,u=void 0===l?"0 0 12 12":l;return(0,j.jsxs)(z,{fill:e,height:i,opacity:t,style:r,viewBox:u,width:i,children:[(0,j.jsx)("path",{clipRule:"evenodd",d:"M2.5 1C1.67157 1 1 1.67157 1 2.5v.0625c0 .27614-.223858.5-.5.5s-.5-.22386-.5-.5V2.5C0 1.11929 1.11929 0 2.5 0h7C10.8807 0 12 1.11929 12 2.5v7c0 1.3807-1.1193 2.5-2.5 2.5h-7C1.11929 12 0 10.8807 0 9.5v-.0625c0-.27614.223858-.5.5-.5s.5.22386.5.5V9.5c0 .8284.67157 1.5 1.5 1.5h7c.8284 0 1.5-.6716 1.5-1.5v-7c0-.82843-.6716-1.5-1.5-1.5h-7z",fill:"url(#paint0_linear_1332_60037)",fillRule:"evenodd"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.05806 3.55806c.24408-.24408.6398-.24408.88388 0l2 2c.24408.24408.24408.6398 0 .88388l-2 2c-.24408.24408-.6398.24408-.88388 0-.24408-.24408-.24408-.6398 0-.88388l.93306-.93306H1C.654822 6.625.375 6.34518.375 6s.279822-.625.625-.625h5.99112l-.93306-.93306c-.24408-.24408-.24408-.6398 0-.88388z",fill:"#fff"}),(0,j.jsx)("defs",{children:(0,j.jsxs)("linearGradient",{id:"paint0_linear_1332_60037",x1:"-.618557",y1:"-.000001",x2:"10.5709",y2:".83113",gradientUnits:"userSpaceOnUse",children:[(0,j.jsx)("stop",{stopColor:"#FFCC19"}),(0,j.jsx)("stop",{offset:".585938",stopColor:"#2ECDF7"}),(0,j.jsx)("stop",{offset:"1",stopColor:"#9E7BFF"})]})})]})},W=t(46732),Y=t(49130),V=t(7267),X=t(48670),J=t(65956),$=t(4190),nn=t(12468),en=t(35686),tn=t(44897),on=t(48339),rn=t(72473),ln=t(41429),un=t(39643),cn=t(57653),an=t(61709),dn=t(58325),sn=t(72619),fn=t(23780);function pn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function mn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?pn(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var vn,hn,bn,gn=function(n){var e=n.addNewBlock,t=n.addWidget,i=n.block,r=n.blockContent,l=n.blocks,u=n.deleteBlock,d=n.executionState,s=n.fetchFileTree,p=n.fetchPipeline,m=n.hideExtraButtons,C=n.interruptKernel,O=n.isEditingBlock,Z=n.openSidekickView,k=n.pipeline,y=n.project,T=n.runBlock,S=n.setBlockContent,P=n.setIsEditingBlock,A=n.savePipelineContent,w=n.setErrors,D=n.setOutputCollapsed,M=n.showConfigureProjectModal,B=(0,fn.VI)(null,{},[],{uuid:"CommandButtons/".concat(null===i||void 0===i?void 0:i.uuid)}),U=(0,o.Z)(B,1)[0],F=i.all_upstream_blocks_executed,G=void 0===F||F,K=i.color,z=i.language,pn=(i.metadata,i.type),vn=i.uuid,hn=(0,c.useRef)(null),bn=(0,c.useRef)(null),gn=(0,c.useRef)(null),xn=(0,c.useRef)(null),jn=(0,c.useRef)(null),Cn=null===k||void 0===k?void 0:k.type,On=(0,c.useState)(!1),Zn=On[0],_n=On[1],En=(0,c.useState)(!1),kn=En[0],yn=En[1],Tn=(0,c.useState)(!1),Sn=Tn[0],In=Tn[1],Pn=(0,c.useState)(!1),An=Pn[0],Rn=Pn[1],wn=(0,c.useState)(!1),Dn=wn[0],Nn=wn[1],Mn=(0,c.useContext)(a.ThemeContext),Bn=on.uF.IDLE!==d,Ln=(0,x.qn)(pn,{blockColor:K,theme:Mn}).accent,Un=(0,c.useMemo)((function(){return Cn===cn.qL.STREAMING}),[Cn]),Fn=(0,c.useMemo)((function(){return Cn===cn.qL.INTEGRATION}),[Cn]),Gn=(0,c.useMemo)((function(){return(0,an.Ts)(i,l,"CommandButtons",e).map((function(n){return mn(mn({},n),{},{onClick:function(){return A().then((function(){return n.onClick()}))}})}))}),[e,i,l,A]),Hn=(0,c.useMemo)((function(){return(0,E.HK)(l,(function(n){return n.uuid}))}),[l]),Qn=(0,c.useMemo)((function(){return I.tf.DBT===(null===i||void 0===i?void 0:i.type)}),[i]),Kn=(0,c.useMemo)((function(){return I.tf.MARKDOWN===(null===i||void 0===i?void 0:i.type)}),[i]),zn=(0,f.Db)(en.ZP.pipelines.useUpdate(null===k||void 0===k?void 0:k.uuid),{onSuccess:function(n){return(0,sn.wD)(n,{callback:function(){p()},onErrorCallback:function(n,e){return w({errors:e,response:n})}})}}),qn=(0,o.Z)(zn,2),Wn=qn[0],Yn=qn[1].isLoading,Vn=(0,f.Db)(en.ZP.llms.useCreate(),{onSuccess:function(n){return(0,sn.wD)(n,{callback:function(n){var e=n.llm;null!==e&&void 0!==e&&e.response&&S&&(null===S||void 0===S||S(null===e||void 0===e?void 0:e.response))},onErrorCallback:function(n,e){return U({errors:e,response:n})}})}}),Xn=(0,o.Z)(Vn,2),Jn=Xn[0],$n=(Xn[1].isLoading,(0,c.useMemo)((function(){var n=!(null!==y&&void 0!==y&&y.openai_api_key),e=function(n){null===M||void 0===M||M({header:(0,j.jsx)(b.Z,{mb:L.HN,children:(0,j.jsxs)(J.Z,{children:[(0,j.jsx)(g.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate blocks using AI."}),(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(g.ZP,{warning:!0,children:["Read ",(0,j.jsx)(X.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onSaveSuccess:function(e){null!==e&&void 0!==e&&e.openai_api_key&&Wn({pipeline:{llm:n}})}})},t={request:{block_uuid:null===i||void 0===i?void 0:i.uuid,pipeline_uuid:null===k||void 0===k?void 0:k.uuid}};return[{label:function(){return"Document block (beta)"},onClick:function(){t.use_case=V.z.GENERATE_DOC_FOR_BLOCK,n?e(t):Wn({pipeline:{llm:t}})},uuid:"Document block"},{label:function(){return"Document pipeline and all blocks (beta)"},onClick:function(){t.use_case=V.z.GENERATE_DOC_FOR_PIPELINE,n?e(t):Wn({pipeline:{llm:t}})},uuid:"Document pipeline and all blocks"},{label:function(){return"Add comments in code (beta)"},onClick:function(){n?e(t):Jn({llm:{request:{block_code:r},use_case:V.z.GENERATE_COMMENT_FOR_CODE}})},uuid:"Add comments in code"}]}),[i,r,Jn,k,y,M,Wn]));return(0,j.jsxs)(h.ZP,{alignItems:"center",children:[on.uF.QUEUED===d&&(0,j.jsx)($.Z,{color:(Mn||tn.Z).content.active,type:"cylon"}),on.uF.BUSY===d&&(0,j.jsx)($.Z,{color:(Mn||tn.Z).content.active}),T&&!Bn&&!Un&&(0,j.jsxs)(j.Fragment,{children:[!Qn&&(0,j.jsx)(nn.Z,{appearBefore:!0,default:!0,label:(0,j.jsxs)(g.ZP,{children:["Run block \xa0 \xa0",(0,j.jsx)(Y.Z,{inline:!0,keyTextGroups:[[(0,dn.V5)()?un.RJ:un.hE,un.Lz]],monospace:!0,uuidForKey:vn})]}),size:3*L.iI,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){G?T({block:i}):In(!0)},children:(0,j.jsx)(R.Z,{color:Ln,size:3*L.iI,children:(0,j.jsx)(rn.Py,{black:!0,size:1.5*L.iI})})})}),Qn&&(0,j.jsx)(v.ZP,{backgroundColor:Ln,beforeIcon:(0,j.jsx)(rn.Py,{size:1.5*L.iI}),compact:!0,onClick:function(){G?T({block:i}):In(!0)},small:!0,children:z===I.t6.YAML?"Run command":"Compile & preview"}),(0,j.jsx)(Q.Z,{disableEscape:!0,onClickOutside:function(){return In(!1)},open:Sn,children:(0,j.jsx)(N.Z,{items:[{label:function(){return"Execute block"},onClick:function(){return T({block:i})},uuid:"execute_block"},{label:function(){return"Execute with upstream blocks"},onClick:function(){return T({block:i,runUpstream:!0})},uuid:"execute_upstream"}],onClickCallback:function(){return In(!1)},open:Sn,parentRef:gn,rightOffset:13.25*L.iI,topOffset:4.5*L.iI,uuid:"execute_actions",width:25*L.iI})})]}),Bn&&(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(nn.Z,{appearBefore:!0,default:!0,label:(0,j.jsxs)(g.ZP,{children:["Interrupt kernel \xa0 \xa0",(0,j.jsx)(Y.Z,{inline:!0,keyTextGroups:[[un.kA],[un.kA]],monospace:!0,uuidForKey:vn})]}),size:ln.C,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return C()},children:(0,j.jsx)(R.Z,{borderSize:1.5,size:ln.C,children:(0,j.jsx)(rn.x8,{size:1*L.iI})})})})}),!m&&I.tf.SCRATCHPAD===i.type&&!Un&&(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(W.Z,{items:Gn,onClickCallback:function(){return yn(!1)},onClickOutside:function(){return yn(!1)},open:kn,parentRef:bn,rightOffset:0,topOffset:4,uuid:"CommandButtons/convert_block",children:(0,j.jsx)(nn.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(g.ZP,{children:"Convert block"}),size:ln.C,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return yn(!kn)},ref:bn,children:(0,j.jsx)(q,{size:ln.C})})})})}),!m&&[I.tf.DATA_LOADER,I.tf.TRANSFORMER].includes(i.type)&&!Un&&!Fn&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{ml:L.cd,ref:hn,children:(0,j.jsx)(nn.Z,{appearBefore:!0,default:!0,label:"Add chart",size:2.25*L.iI,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return _n((function(n){return!n}))},children:(0,j.jsx)(rn.GQ,{size:2.25*L.iI})})})}),t&&(0,j.jsx)(Q.Z,{disableEscape:!0,onClickOutside:function(){return _n(!1)},open:Zn,children:(0,j.jsx)(H,{addWidget:t,block:i,onClickCallback:function(){return _n(!1)},open:Zn,parentRef:hn,rightOffset:9*L.iI,runBlock:T,topOffset:2*L.iI})})]}),!m&&Kn&&(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(nn.Z,{appearBefore:!0,default:!0,label:O?"Close editor":"Edit",size:ln.C,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return P((function(n){return!n}))},children:O?(0,j.jsx)(rn.Jr,{size:ln.C,success:!0}):(0,j.jsx)(rn.I8,{size:ln.C})})})}),!m&&I.tf.GLOBAL_DATA_PRODUCT!==(null===i||void 0===i?void 0:i.type)&&(0,j.jsx)("div",{ref:jn,children:(0,j.jsxs)(b.Z,{ml:L.cd,children:[Yn&&(0,j.jsx)($.Z,{inverted:!0,small:!0}),!Yn&&(0,j.jsx)(nn.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(g.ZP,{children:"AI actions"}),size:ln.C,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return Nn((function(n){return!n}))},children:(0,j.jsx)(rn.xq,{default:!0,size:ln.C})})})]})}),!m&&(0,j.jsx)(Q.Z,{disableEscape:!0,onClickOutside:function(){return Nn(!1)},open:Dn,children:(0,j.jsx)(N.Z,{items:$n,onClickCallback:function(){return Nn(!1)},open:Dn,parentRef:jn,rightOffset:4.75*L.iI,topOffset:2*L.iI,uuid:"FileHeaderMenu/AI_actions"})}),!m&&(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(nn.Z,{appearBefore:!0,default:!0,label:"View and edit settings for this block",size:ln.C,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return null===Z||void 0===Z?void 0:Z(_.cH.BLOCK_SETTINGS)},children:(0,j.jsx)(rn.JG,{default:!0,size:ln.C})})})}),!m&&(0,j.jsx)("div",{ref:xn,children:(0,j.jsx)(b.Z,{ml:L.cd,children:(0,j.jsx)(nn.Z,{appearBefore:!0,default:!0,label:(0,j.jsx)(g.ZP,{children:"More actions"}),size:ln.C,widthFitContent:!0,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){return Rn((function(n){return!n}))},children:(0,j.jsx)(R.Z,{borderSize:1.5,default:!0,size:ln.C,children:(0,j.jsx)(rn.mH,{default:!0,size:L.iI})})})})})}),!m&&(0,j.jsx)(Q.Z,{disableEscape:!0,onClickOutside:function(){return Rn(!1)},open:An,children:(0,j.jsx)(N.Z,{items:(0,an.J8)(i,T,u,D,Un||Fn,{addNewBlock:e,blocksMapping:Hn,fetchFileTree:s,fetchPipeline:p,openSidekickView:Z,project:y,savePipelineContent:A,updatePipeline:Wn}),onClickCallback:function(){return Rn(!1)},open:An,parentRef:xn,rightOffset:4.75*L.iI,topOffset:2*L.iI,uuid:"FileHeaderMenu/file_items"})})]})};!function(n){n.DBT="dbt"}(vn||(vn={})),function(n){n.PROFILES="profiles",n.PROJECTS="projects",n.TARGETS="targets"}(hn||(hn={})),function(n){n.Block="Block"}(bn||(bn={}));var xn=t(15338),jn=t(85854),Cn=t(99236),On=t(75499),Zn=t(69632),_n=t(37443),En=t(61599),kn=t(53405);function yn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function Tn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?yn(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Sn,In=function(n){var e=n.block,t=n.blockContent,o=n.blocksMapping,i=(n.children,n.codeEditor),r=n.callbackEl,l=n.hasElementsBelow,u=n.onChangeBlock,a=(n.openSidekickView,n.setContent),d=n.showDataIntegrationModal,s=(e.catalog,e.language),f=e.metadata,p=e.type,m=e.upstream_blocks,C=e.uuid,Z=((null===f||void 0===f?void 0:f.data_integration)||{}).name,_=(0,c.useMemo)((function(){return(0,kn.Uc)(e,{getAll:!0})}),[e]),k=(0,c.useMemo)((function(){return null===_||void 0===_?void 0:_.filter(kn.Z5)}),[_]),y=(0,c.useMemo)((function(){return(null===_||void 0===_?void 0:_.length)||0}),[_]),T=(0,c.useMemo)((function(){return(null===k||void 0===k?void 0:k.length)||0}),[k]),S=I.tf.DATA_LOADER===p,P=S?"source":"destination",A=(0,c.useMemo)((function(){var n=[1,1,1,null],o=[{uuid:"Stream"},{center:!0,uuid:"Columns"},{center:!0,uuid:"Sync method"},{uuid:"Parallel"}];return S||(n=(0,E.Hk)(1,1,n),o=(0,E.Hk)({uuid:"Table name"},1,o)),(0,j.jsx)(On.Z,{columnFlex:n,columns:o,rows:null===k||void 0===k?void 0:k.map((function(n){var o,i,r,l=n||{},c=l.bookmark_properties,f=l.destination_table,p=l.replication_method,m=l.run_in_parallel,v=(l.tap_stream_id,(0,kn.M$)(n)),x=(0,kn.Qu)(n),C=(0,kn.WD)(n),O=(0,kn.JN)(n),Z=O.allColumns,_=O.selectedColumns,k=(null===(o=Object.keys(Z||[]))||void 0===o?void 0:o.length)||0,y=(null===(i=Object.keys(_||[]))||void 0===i?void 0:i.length)||0,T=I.t6.YAML===s&&!y,P=(0,j.jsxs)(X.Z,{danger:T,monospace:!0,onClick:function(){return d({block:Tn(Tn({},e),{},{content:t}),defaultMainNavigationTab:v,defaultMainNavigationTabSub:x,defaultSubTab:T?_n.tw.SETTINGS:_n.tw.OVERVIEW,onChangeBlock:u,setContent:a})},preventDefault:!0,sameColorAsText:!T,children:[v," ",T&&(0,j.jsx)(g.ZP,{inline:!0,default:!0,monospace:!0,children:"will fail if no columns selected"})]},"".concat(C,"-stream"));r=y>=1||I.t6.PYTHON===s?(0,j.jsxs)(g.ZP,{center:!0,default:!0,monospace:!0,children:[y," ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,children:"/"})," ",k]}):(0,j.jsx)(g.ZP,{center:!0,danger:!0,children:"No columns selected"});var A=[P,(0,j.jsx)(X.Z,{danger:T,monospace:!0,onClick:function(){return d({block:Tn(Tn({},e),{},{content:t}),defaultMainNavigationTab:v,defaultMainNavigationTabSub:x,defaultSubTab:_n.tw.SETTINGS,onChangeBlock:u,setContent:a})},preventDefault:!0,sameColorAsText:!T,children:r},"".concat(C,"-columns")),(0,j.jsxs)(h.ZP,{alignItems:"center",justifyContent:"center",children:[(0,j.jsx)(g.ZP,{center:!0,default:!0,children:p&&(0,U.vg)(p)}),En._B.INCREMENTAL===p&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:1}),!(null!==c&&void 0!==c&&c.length)&&(0,j.jsx)(g.ZP,{danger:!0,xsmall:!0,children:"No bookmark properties set"}),(null===c||void 0===c?void 0:c.length)>=1&&(null===c||void 0===c?void 0:c.map((function(n,e){return(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,muted:!0,xsmall:!0,children:[e>=1&&", ",n]},n)})))]})]},"".concat(C,"-replicationMethod")),(0,j.jsx)(h.ZP,{justifyContent:"flex-end",children:m?(0,j.jsx)(rn.Jr,{size:2*L.iI,success:!0}):(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,children:"-"})},"".concat(C,"-runInParallel"))];return S||(A=(0,E.Hk)((0,j.jsx)(g.ZP,{default:!0,monospace:!0,children:f||v},"".concat(C,"-tableName")),1,A)),A}))})}),[e,t,s,S,a,d,k]),R=(0,c.useMemo)((function(){var n,t;return(0,kn.Wi)(null===e||void 0===e||null===(n=e.upstream_blocks)||void 0===n?void 0:n.map((function(n){return null===o||void 0===o?void 0:o[n]})),null===e||void 0===e||null===(t=e.configuration)||void 0===t?void 0:t.data_integration)}),[e,o]);return(0,j.jsxs)(j.Fragment,{children:[I.t6.YAML===s&&(0,j.jsxs)(Zn.au,{children:[(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(h.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:[(0,j.jsxs)(O.Z,{flex:1,flexDirection:"column",children:[(0,j.jsx)(g.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,uppercase:!0,children:P}),(0,j.jsx)(jn.Z,{default:!0,children:Z})]}),(0,j.jsxs)(v.ZP,{compact:!0,onClick:function(){return d({block:Tn(Tn({},e),{},{content:t}),defaultMainNavigationTab:_n.uK.CONFIGURATION,onChangeBlock:u,setContent:a})},secondary:!0,children:["Configure ",P]})]})}),(0,j.jsx)(xn.Z,{light:!0}),(null===R||void 0===R?void 0:R.length)>=1&&(0,j.jsx)(Cn.Z,{inputsBlocks:R})]}),I.t6.PYTHON===s&&(0,j.jsxs)(Zn.au,{children:[(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(h.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:[(0,j.jsxs)(O.Z,{flex:1,flexDirection:"column",children:[(0,j.jsx)(g.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,uppercase:!0,children:P}),(0,j.jsx)(jn.Z,{default:!0,children:Z})]}),(0,j.jsxs)(v.ZP,{compact:!0,onClick:function(){return d({block:Tn(Tn({},e),{},{content:t}),defaultMainNavigationTab:_n.uK.CONFIGURATION,onChangeBlock:u,setContent:a})},secondary:!0,children:["Configure ",P]})]})}),(0,j.jsx)(xn.Z,{light:!0}),(null===m||void 0===m?void 0:m.length)>=1&&(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(h.ZP,{alignItems:"flex-start",justifyContent:"space-between",children:[(0,j.jsxs)(O.Z,{flex:4,flexDirection:"column",children:[(0,j.jsx)(g.ZP,{bold:!0,monospace:!0,muted:!0,small:!0,uppercase:!0,children:"Inputs"}),(0,j.jsxs)(b.Z,{mt:1,children:[(null===R||void 0===R?void 0:R.length)>=1&&(0,j.jsx)(g.ZP,{default:!0,children:"The output of these upstream blocks are used as positional arguments for decorated functions."}),!(null!==R&&void 0!==R&&R.length)&&(0,j.jsxs)(g.ZP,{default:!0,children:["There are currently no positional arguments for decorated functions.",(0,j.jsx)("br",{}),"To use the output of 1 or more upstream blocks as positional arguments for decorated functions, add and configure 1 or more inputs."]})]})]}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(O.Z,{flex:1,justifyContent:"flex-end",children:(0,j.jsx)(v.ZP,{compact:!0,onClick:function(){return d({block:Tn(Tn({},e),{},{content:t}),defaultMainNavigationTab:_n.uK.CONFIGURATION,defaultSubTab:_n.tw.UPSTREAM_BLOCK_SETTINGS,onChangeBlock:u,setContent:a})},secondary:!0,children:(null===R||void 0===R?void 0:R.length)>=1?"Configure inputs":"Add inputs"})})]})}),(null===R||void 0===R?void 0:R.length)>=1&&(0,j.jsx)(Cn.Z,{inputsBlocks:R})]}),(0,j.jsxs)(Zn.JX,{noBorderRadius:l,children:[(0,j.jsx)(b.Z,{p:L.cd,children:(0,j.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[T>=1&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(O.Z,{flex:1,flexDirection:"column",children:(0,j.jsxs)(g.ZP,{bold:!0,default:!0,large:!0,children:[T," ",(0,j.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,muted:!0,children:"/"})," ",y," ",(0,U._6)("stream",y,!1,!0)," selected"]})}),(0,j.jsx)(b.Z,{mr:1})]}),(0,j.jsxs)(v.ZP,{beforeIcon:!T&&(0,j.jsx)(rn.Zr,{size:2*L.iI}),compact:T>=1,onClick:function(){return d({block:Tn(Tn({},e),{},{content:t}),defaultMainNavigationTab:_n.uK.STREAMS,onChangeBlock:u,setContent:a})},primary:!T,secondary:T>=1,children:[T>=1&&"Edit streams",!T&&"Set up streams"]})]})}),T>=1&&A,T>=1&&(0,j.jsx)(b.Z,{mb:L.cd})]}),I.t6.PYTHON===s&&(0,j.jsxs)(j.Fragment,{children:[T>=1&&(0,j.jsx)(Zn.au,{children:(0,j.jsx)(b.Z,{pb:L.cd,px:L.cd,children:(0,j.jsx)(Zn.NJ,{children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(O.Z,{children:(0,j.jsx)(rn.uy,{size:2*L.iI,warning:!0})}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsxs)(g.ZP,{muted:!0,children:["The decorated function ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,default:!0,children:"@selected_streams"})," and ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,default:!0,children:"@catalog"})," will override any stream settings configured for ",(0,j.jsx)(g.ZP,{bold:!0,color:(0,x.qn)(null===e||void 0===e?void 0:e.type,{blockColor:null===e||void 0===e?void 0:e.color}).accent,inline:!0,monospace:!0,children:C}),"."]})]})})})}),(0,j.jsx)(Zn.eQ,{children:(0,j.jsx)(b.Z,{pb:L.cd})}),i,r]})]})};!function(n){n.APPEND="append",n.FAIL="fail",n.REPLACE="replace"}(Sn||(Sn={}));var Pn,An=[Sn.APPEND,Sn.FAIL,Sn.REPLACE];function Rn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function wn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function Dn(n,e){var t,i=n.block,r=n.blocks,l=n.onClick,u=n.onDrop,f=i.type,p=(0,d.c)((function(){return{collect:function(n){return{isDragging:!!n.isDragging()}},item:i,type:ln.vT}}),[i]),v=(0,o.Z)(p,3),C=v[0],Z=v[1],_=(v[2],(0,s.L)((function(){return{accept:ln.vT,drop:function(n){return null===u||void 0===u?void 0:u(i,n)}}}),[i])),E=(0,o.Z)(_,2)[1],k=(0,c.useContext)(a.ThemeContext),y=(0,x.qn)(f,{blockColor:i.color,theme:k}).accent,T=(0,kn.cU)([i],r)[0],S=T.dynamic,P=T.dynamicUpstreamBlock,A=T.reduceOutput,w=T.reduceOutputUpstreamBlock,D=(0,c.useMemo)((function(){return(0,an._o)({block:i,dynamic:S,dynamicUpstreamBlock:P,reduceOutput:A,reduceOutputUpstreamBlock:w})}),[i,S,P,A,w]).borderColorShareProps,N=(0,c.useMemo)((function(){return I.tf.DBT===(null===i||void 0===i?void 0:i.type)}),[i]);return(0,j.jsx)(b.Z,{pb:1,ref:E,children:(0,j.jsx)(x.PY,wn(wn({},wn(wn({},D),C)),{},{ref:Z,children:(0,j.jsx)(X.Z,{noHoverUnderline:!0,noOutline:!0,onClick:function(){return l()},preventDefault:!0,ref:e,children:(0,j.jsx)(b.Z,{p:1,children:(0,j.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsxs)(O.Z,{alignItems:"center",flex:1,children:[(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(m.Z,{monospace:!0,children:I.dO[i.language]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(R.Z,{color:y,size:1.5*L.iI,square:!0}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{color:y,monospace:!0,children:null===(t=N?I.tf.DBT:I.V4[i.type])||void 0===t?void 0:t.toUpperCase()})]}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(rn.iU,{size:1.5*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,children:null===i||void 0===i?void 0:i.uuid})]}),(0,j.jsx)(nn.Z,{appearAbove:!0,appearBefore:!0,block:!0,label:"Show ".concat(null===i||void 0===i?void 0:i.uuid," block"),size:2*L.iI,widthFitContent:!0,children:(0,j.jsx)(rn.Db,{muted:!0,size:2*L.iI})})]})})})}))})}!function(n){n.BIGQUERY="bigquery",n.CLICKHOUSE="clickhouse",n.DRUID="druid",n.MYSQL="mysql",n.POSTGRES="postgres",n.REDSHIFT="redshift",n.SNOWFLAKE="snowflake",n.TRINO="trino"}(Pn||(Pn={}));var Nn=c.forwardRef(Dn),Mn=t(56747),Bn=t(82359),Ln=t(44085),Un=t(74521);var Fn=function(n){var e,t=n.executionStates,o=(n.isInProgress,(null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.spark)||{jobs:null,sqls:null,stages:null}),i=o.jobs,r=(o.sqls,o.stages),l=(0,c.useMemo)((function(){return(r||[]).reduce((function(n,e){var t=null===e||void 0===e?void 0:e.application;return(null===t||void 0===t?void 0:t.calculated_id)in n||(n[null===t||void 0===t?void 0:t.calculated_id]={}),n[null===t||void 0===t?void 0:t.calculated_id][null===e||void 0===e?void 0:e.stage_id]=e,n}),{})}),[r]),u=(0,c.useMemo)((function(){return(0,j.jsx)(Un.Z,{disableStageExpansion:!0,jobs:i,stagesMapping:l})}),[i,l]);return(0,j.jsx)(j.Fragment,{children:u})},Gn=L.iI/2,Hn=a.default.div.withConfig({displayName:"indexstyle__ProgressDotsStyle",componentId:"sc-5dfsks-0"})(["border-top-width:","px;border-top-style:dotted;height:","px;",""],Gn,Gn,(function(n){return"\n    border-top-color: ".concat(n.success?(n.theme||tn.Z).accent.positive:(n.theme||tn.Z).content.muted,";\n    width: ").concat(n.progress,"%;\n  ")})),Qn=t(88422);var Kn=function(n){var e,t=n.children,o=n.executionStates,i=n.isInProgress,r=(null===o||void 0===o||null===(e=o[0])||void 0===e?void 0:e.spark)||{jobs:null,sqls:null,stages:null},l=r.jobs,u=(r.sqls,r.stages),a=(0,c.useMemo)((function(){var n=0,e=0,t=0,o=0;null===l||void 0===l||l.forEach((function(t){t.num_completed_stages;var o=t.status;n+=Qn.CN.SUCCEEDED===o?1:0,e+=1}));var i=0,r=0;return null===u||void 0===u||u.forEach((function(n){var e=n.num_complete_tasks,l=n.num_tasks,u=n.status;Qn.Dd.SKIPPED!==u&&(t+=Qn.Dd.COMPLETE===u?1:0,o+=1,i+=e||0,r+=l||0)})),{jobsCountCompleted:n,jobsCount:e,stagesCount:o,stagesCountCompleted:t,tasksCount:r,tasksCountCompleted:i}}),[l,u]),d=a.jobsCountCompleted,s=a.jobsCount,f=a.stagesCount,p=a.stagesCountCompleted,m=a.tasksCount,v=a.tasksCountCompleted,x=(0,c.useMemo)((function(){return s?Math.min(i?90:1,d/s):0}),[i,s,d]),C=(0,c.useMemo)((function(){return f?Math.min(x<1?90:1,p/f):0}),[x,f,p]),O=(0,c.useMemo)((function(){return m?Math.min(x<1?90:1,v/m):0}),[x,m,v]);return i||s?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(b.Z,{p:L.cd,children:[(0,j.jsx)(b.Z,{mb:1,children:(0,j.jsxs)(h.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:"Jobs"}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsxs)(g.ZP,{default:!0,monospace:!0,small:!0,children:[d," / ",s," (",Math.round(100*x),"%)"]})]})}),(0,j.jsxs)(h.ZP,{children:[(0,j.jsx)(Hn,{progress:100*x,success:!0}),x>0&&x<1&&(0,j.jsx)("div",{style:{width:L.iI/2}}),(0,j.jsx)(Hn,{progress:100*(1-x)})]})]}),(0,j.jsxs)(b.Z,{px:L.cd,pb:L.cd,children:[(0,j.jsx)(b.Z,{mb:1,children:(0,j.jsxs)(h.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:"Stages"}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsxs)(g.ZP,{default:!0,monospace:!0,small:!0,children:[p," / ",f," (",Math.round(100*C),"%)"]})]})}),(0,j.jsxs)(h.ZP,{children:[(0,j.jsx)(Hn,{progress:100*C,success:!0}),C>0&&C<1&&(0,j.jsx)("div",{style:{width:L.iI/2}}),(0,j.jsx)(Hn,{progress:100*(1-C)})]})]}),(0,j.jsxs)(b.Z,{px:L.cd,pb:L.cd,children:[(0,j.jsx)(b.Z,{mb:1,children:(0,j.jsxs)(h.ZP,{alignContent:"center",justifyContent:"space-between",children:[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:"Tasks"}),(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsxs)(g.ZP,{default:!0,monospace:!0,small:!0,children:[v," / ",m," (",Math.round(100*O),"%)"]})]})}),(0,j.jsxs)(h.ZP,{children:[(0,j.jsx)(Hn,{progress:100*O,success:!0}),O>0&&O<1&&(0,j.jsx)("div",{style:{width:L.iI/2}}),(0,j.jsx)(Hn,{progress:100*(1-O)})]})]}),t]}):null},zn=t(93004);var qn=function(n){var e,t=n.disableGraph,o=n.executionStates,i=(n.isInProgress,n.overrideScrollForGraph),r=((null===o||void 0===o||null===(e=o[0])||void 0===e?void 0:e.spark)||{sqls:[]}).sqls,l=(0,c.useMemo)((function(){return(0,j.jsx)(zn.Z,{disableGraph:t,disableJobExpansion:!0,overrideScrollForGraph:i,showSparkGraph:!0,sqls:r})}),[t,r]);return(0,j.jsx)(j.Fragment,{children:l})},Wn=t(71417);var Yn=function(n){var e,t=n.executionStates,o=(n.isInProgress,((null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.spark)||{stages:null}).stages),i=(0,c.useMemo)((function(){return(0,j.jsx)(Wn.Z,{stages:o,tasksContained:!0})}),[o]);return(0,j.jsx)(j.Fragment,{children:i})},Vn=t(17488),Xn=t(3314);function Jn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function $n(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Jn(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Jn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var ne=function(n){var e=n.block,t=n.blockConfiguration,o=n.blockRefs,r=n.blocks,l=n.updateBlockConfiguration,u=(0,c.useContext)(a.ThemeContext),d=I.t6.R===(null===e||void 0===e?void 0:e.language),s=I.t6.SQL===(null===e||void 0===e?void 0:e.language),f=null===r||void 0===r?void 0:r.find((function(n){var e=n.language;return I.t6.PYTHON===e})),p=(0,c.useMemo)((function(){var n=[null];return s&&f?n.push.apply(n,[null,1]):n.push(1),n}),[f,s]),m=(0,c.useMemo)((function(){var n=[{tooltipMessage:null,uuid:"Variable"},{tooltipMessage:null,uuid:"Block"}];return s&&f&&n.push({tooltipMessage:"Customize the full table name that this block gets created in. Include database, schema, and table name where applicable.",uuid:"Table name"}),n}),[f,s]),v=(0,c.useMemo)((function(){return null===r||void 0===r?void 0:r.map((function(n,e){var r,c=n.color,a=n.language,p=n.type,m=n.uuid,v=(0,x.qn)(p,{blockColor:c,theme:u}).accent,h=I.t6.PYTHON===a;r=s?"{{ df_".concat(e+1," }}"):d?"df".concat(e+1):"data".concat(e>=1?"_".concat(e+1):null);var b=[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:r},"variable-".concat(m)),(0,j.jsx)(X.Z,{color:v,onClick:function(){var n,e,t=null===o||void 0===o||null===(n=o.current)||void 0===n?void 0:n["".concat(p,"s/").concat(m,".py")];null===t||void 0===t||null===(e=t.current)||void 0===e||e.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(g.ZP,{color:v,monospace:!0,small:!0,children:m})},"block-".concat(m))];if(s){var C="table-name-input-".concat(m),O=(null===t||void 0===t?void 0:t[M.Yf])||{},Z=(null===O||void 0===O?void 0:O[m])||{};h?b.push((0,j.jsx)(Vn.Z,{borderless:!0,compact:!0,monospace:!0,onChange:function(n){var e=n.target.value;l((0,i.Z)({},M.Yf,$n($n({},O),{},(0,i.Z)({},m,$n($n({},Z),{},(0,i.Z)({},M.aZ,e))))))},onClick:Xn.j,placeholder:"[database_optional].[schema_optional].[table]",small:!0,value:(null===Z||void 0===Z?void 0:Z[M.aZ])||""},C)):f&&b.push((0,j.jsx)(g.ZP,{italic:!0,muted:!0,small:!0,children:"Table name is defined in upstream block."},C))}return b}))}),[f,t,o,r,d,s,u,l]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(On.Z,{columnFlex:p,columns:m,compact:!0,noBorder:!0,rows:v,uuid:"CodeBlock/UpstreamBlockSettings/".concat(null===e||void 0===e?void 0:e.uuid)})})},ee=t(84820),te=t(98464),oe=t(77417),ie=t(98777),re=t(88494),le=t(84438),ue=t(92709),ce=t(47041),ae=t(89678),de=t(38399),se=t(74052),fe=t(22286),pe=t(37529),me=t(53808),ve=t(44375),he=t(42041),be=t(15752),ge=t(42122),xe=t(44688);function je(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function Ce(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?je(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):je(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Oe=1e3;function Ze(n,e){var t,l,C=n.addNewBlock,Z=n.addNewBlockMenuOpenIdx,k=n.addWidget,y=n.allBlocks,N=n.allowCodeBlockShortcuts,B=n.autocompleteItems,F=n.block,G=n.blockIdx,H=n.blockInteractions,Q=n.blockOutputRef,K=n.blockRefs,z=n.blockTemplates,q=n.blocks,Y=void 0===q?[]:q,V=n.children,J=n.containerRef,tn=n.cursorHeight1,dn=n.cursorHeight2,fn=n.cursorHeight3,pn=n.dataProviders,mn=n.defaultValue,jn=void 0===mn?"":mn,Cn=n.deleteBlock,On=n.disableDrag,Zn=n.disableShortcuts,_n=n.executionState,En=n.extraContent,yn=n.fetchFileTree,Tn=n.fetchPipeline,Rn=n.globalDataProducts,wn=n.height,Dn=n.hideExtraCommandButtons,Un=n.hideExtraConfiguration,Gn=n.hideHeaderInteractiveInformation,Hn=n.hideRunButton,Qn=n.interactionsMapping,zn=n.interruptKernel,Wn=n.isHidden,Jn=n.mainContainerRect,$n=n.mainContainerRef,je=n.mainContainerWidth,Ze=n.messages,_e=void 0===Ze?[]:Ze,Ee=n.noDivider,ke=n.onCallbackChange,ye=n.onChange,Te=n.onClickAddSingleDBTModel,Se=n.onDrop,Ie=n.openSidekickView,Pe=n.pipeline,Ae=n.project,Re=n.runBlock,we=n.runningBlocks,De=n.savePipelineContent,Ne=n.scrollTogether,Me=n.selected,Be=n.setAddNewBlockMenuOpenIdx,Le=n.setAnyInputFocused,Ue=n.setCreatingNewDBTModel,Fe=n.setEditingBlock,Ge=n.setErrors,He=n.setHiddenBlocks,Qe=(n.setMountedBlocks,n.setOutputBlocks),Ke=n.setSelected,ze=n.setSelectedBlock,qe=n.setSelectedOutputBlock,We=n.setTextareaFocused,Ye=n.showBrowseTemplates,Ve=n.showConfigureProjectModal,Xe=n.showDataIntegrationModal,Je=n.showGlobalDataProducts,$e=n.showUpdateBlockModal,nt=n.sideBySideEnabled,et=n.textareaFocused,tt=n.widgets,ot=n.windowWidth,it=(0,c.useContext)(a.ThemeContext),rt=(0,c.useRef)(null),lt=(0,c.useRef)(null),ut=(0,c.useRef)(null),ct=(0,c.useRef)(null),at=(0,oe.Z)(),dt=(at.featureEnabled,at.featureUUIDs,at.sparkEnabled),st=(0,c.useState)(!1),ft=st[0],pt=st[1],mt=(0,c.useState)(0),vt=mt[0],ht=mt[1],bt=(0,c.useState)(!1),gt=bt[0],xt=bt[1],jt=(0,c.useCallback)((function(){var n=new CustomEvent(ue.$e,{detail:{blockIndex:G}});window.dispatchEvent(n)}),[G]),Ct=(0,c.useCallback)((function(){var n=new CustomEvent(ue.tK,{detail:{blockIndex:G}});window.dispatchEvent(n)}),[G]),Ot=(0,c.useCallback)((function(n){He&&(null===He||void 0===He||He(n),clearTimeout(ct.current),ct.current=setTimeout((function(){Ct(),jt()}),ie.e+1))}),[jt,Ct,He]);(0,c.useEffect)((function(){var n=function(n){var e,t=null===ut||void 0===ut||null===(e=ut.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(null===n||void 0===n?void 0:n.clientX)>=(null===t||void 0===t?void 0:t.x)&&(null===n||void 0===n?void 0:n.clientX)<=(null===t||void 0===t?void 0:t.x)+(null===t||void 0===t?void 0:t.width)&&(null===n||void 0===n?void 0:n.clientY)>=(null===t||void 0===t?void 0:t.y)&&(null===n||void 0===n?void 0:n.clientY)<=(null===t||void 0===t?void 0:t.y)+(null===t||void 0===t?void 0:t.height)&&(clearTimeout(ct.current),ct.current=setTimeout(Ct,ie.e+1))};return ft&&window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}),[Ct,ft]),(0,c.useEffect)((function(){gt&&nt&&jt()}),[gt,Ne,nt]);var Zt=(0,c.useMemo)((function(){var n;return!(null===Ae||void 0===Ae||null===(n=Ae.features)||void 0===n||!n[Bn.d.INTERACTIONS])}),[null===Ae||void 0===Ae?void 0:Ae.features]),_t=(0,c.useCallback)((function(n){var e,t,o,i,l=n.columnScrolling,u=n.refCursor,c=n.refCursorContainer,a=n.refsMappings,d=null===Y||void 0===Y?void 0:Y.map((function(n){var e=(0,se.zv)(n);return Math.max.apply(Math,(0,r.Z)(a.map((function(n){var t,o,i,r=null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t[e];return(null===r||void 0===r||null===(o=r.current)||void 0===o||null===(i=o.getBoundingClientRect())||void 0===i?void 0:i.height)||0}))))})),s=(0,E.Sm)(d||[]),f=null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect(),p=null===u||void 0===u||null===(t=u.current)||void 0===t||null===(o=t.getBoundingClientRect)||void 0===o?void 0:o.call(t),m=(null===f||void 0===f?void 0:f.y)+(null===p||void 0===p?void 0:p.height),v=100*((0===(null===p||void 0===p?void 0:p.height)?0:(null===p||void 0===p?void 0:p.y)+(null===p||void 0===p?void 0:p.height))-m)/((null===f||void 0===f?void 0:f.height)-(null===p||void 0===p?void 0:p.height))/100,h=(0,an.IT)(d,s,null===Jn||void 0===Jn?void 0:Jn.height)||0,b=(null===f||void 0===f?void 0:f.y)-Math.max(0,v*(1-h))*s+(0,E.Sm)((null===(i=d||[])||void 0===i?void 0:i.slice(0,G))||[]);if(Ne)null!==rt&&void 0!==rt&&rt.current&&(rt.current.style.top="".concat(b,"px")),null!==lt&&void 0!==lt&&lt.current&&(lt.current.style.top="".concat(b,"px"));else{var g=0===l?rt:lt;null!==g&&void 0!==g&&g.current&&(g.current.style.top="".concat(b,"px"))}}),[G,Jn,rt,lt,Ne]);(0,c.useEffect)((function(){var n=function(n){var e=n.detail;_t(e)};return nt&&window.addEventListener(ue.m$,n),function(){window.removeEventListener(ue.m$,n)}}),[_t,nt]);var Et=F||{},kt=Et.callback_content,yt=Et.configuration,Tt=void 0===yt?{}:yt,St=Et.color,It=Et.error,Pt=Et.has_callback,At=Et.language,Rt=Et.name,wt=Et.pipelines,Dt=Et.replicated_block,Nt=Et.type,Mt=Et.upstream_blocks,Bt=void 0===Mt?[]:Mt,Lt=Et.uuid,Ut=(0,c.useMemo)((function(){return Tt}),[Tt]),Ft=(0,c.useMemo)((function(){var n;return(null===(n=Object.values(wt||{}))||void 0===n?void 0:n.length)||1}),[wt]),Gt=(0,c.useMemo)((function(){return null===Ut||void 0===Ut?void 0:Ut.global_data_product}),[Ut]),Ht=(0,c.useMemo)((function(){return(0,E.HK)(Rn||[],(function(n){return n.uuid}))}),[Rn]),Qt=(0,c.useState)(!1),Kt=Qt[0],zt=Qt[1],qt=(0,c.useState)(null),Wt=qt[0],Yt=qt[1],Vt=(0,c.useState)(!1),Xt=Vt[0],Jt=Vt[1],$t=(0,c.useState)(!1),no=$t[0],eo=$t[1],to=(0,c.useState)(jn),oo=to[0],io=to[1],ro=(0,c.useState)(null),lo=ro[0],uo=ro[1],co=(0,c.useState)(ln.C4[0].uuid),ao=co[0],so=co[1],fo=(0,c.useState)(null),po=fo[0],mo=fo[1],vo=Pe||{},ho=vo.type,bo=vo.uuid,go=(0,c.useMemo)((function(){return cn.qL.STREAMING===ho}),[ho]),xo=I.tf.DBT===Nt,jo=I.t6.SQL===At,Co=I.t6.R===At,Oo=I.tf.MARKDOWN===Nt,Zo=(0,c.useMemo)((function(){return(0,kn.jO)(F,Pe)}),[F,Pe]),_o=Ut[M.mW];jo&&void 0===_o&&(_o=Oe);var Eo=(0,c.useState)(Ce(Ce({},Ut),{},(t={},(0,i.Z)(t,M.cH,Ut[M.cH]),(0,i.Z)(t,M.Sv,Ut[M.Sv]),(0,i.Z)(t,M.sc,Ut[M.sc]),(0,i.Z)(t,M.BD,Ut[M.BD]),(0,i.Z)(t,M.m$,Ut[M.m$]),(0,i.Z)(t,M.Pi,Ut[M.Pi]||{}),(0,i.Z)(t,M.Mv,Ut[M.Mv]),(0,i.Z)(t,M.eW,Ut[M.eW]),(0,i.Z)(t,M.nq,Ut[M.nq]||Sn.APPEND),(0,i.Z)(t,M.mW,_o),(0,i.Z)(t,M.bk,Ut[M.bk]),(0,i.Z)(t,M.Mi,!!Ut[M.Mi]),t))),ko=Eo[0],yo=Eo[1],To=(0,c.useState)(null),So=To[0],Io=To[1],Po=(0,c.useState)(Oo),Ao=Po[0],Ro=Po[1],wo=(0,c.useState)(!1),Do=wo[0],No=wo[1],Mo=(0,c.useState)(0),Bo=Mo[0],Lo=Mo[1],Uo=(0,c.useState)(null),Fo=Uo[0],Go=Uo[1],Ho=(0,c.useState)(null),Qo=Ho[0],Ko=Ho[1],zo=(0,c.useState)(_e),qo=zo[0],Wo=zo[1],Yo=(0,c.useState)(null),Vo=Yo[0],Xo=Yo[1],Jo=(0,c.useCallback)((function(n){Ct(),null===Ke||void 0===Ke||Ke(!!n),Xo(n)}),[Ct,Ke,Xo]);(0,c.useEffect)((function(){Vo||(ft?Jo((0,ln.iz)(F)[0]):xo&&Jo((0,ln.Xy)(F)[0]))}),[F,xo,Vo,Jo,ft]);var $o=(0,c.useCallback)((function(n){Ro(n),setTimeout((function(){return jt()}),1)}),[jt,Ro]),ni=(0,d.c)((function(){return{collect:function(n){return{isDragging:!!n.isDragging()}},item:F,type:ln.vT}}),[F]),ei=(0,o.Z)(ni,2),ti=ei[0],oi=ei[1],ii=(0,s.L)((function(){return{accept:ln.vT,drop:function(n){return null===Se||void 0===Se?void 0:Se(F,n)}}}),[F]),ri=(0,o.Z)(ii,2)[1],li=en.ZP.configuration_options.pipelines.list(bo,{configuration_type:vn.DBT,option_type:hn.PROJECTS,resource_type:bn.Block,resource_uuid:I.t6.SQL===At?Lt:null}).data,ui=(0,c.useMemo)((function(){return null===li||void 0===li?void 0:li.configuration_options}),[li]),ci=(0,c.useMemo)((function(){var n;return(null===F||void 0===F||null===(n=F.metadata)||void 0===n?void 0:n.dbt)||{project:null,projects:{}}}),[F]),ai=(0,c.useMemo)((function(){return ui?(0,E.HK)(ui,(function(n){return n.uuid})):ci.projects||{}}),[ui,ci]),di=(0,c.useMemo)((function(){return ci.project||ko[M.eW]}),[ko,ci]),si=(0,c.useMemo)((function(){var n;if(!ui)return[ai[di]||{target:null,targets:[]}];var e=1===(null===ui||void 0===ui?void 0:ui.length)?null===ui||void 0===ui?void 0:ui[0]:null===ui||void 0===ui?void 0:ui.find((function(n){var e=n.uuid;return di===e}));return(null===e||void 0===e||null===(n=e.option)||void 0===n?void 0:n.profiles)||[]}),[ui,di,ai]),fi=(0,c.useMemo)((function(){var n;return null===(n=si||[])||void 0===n?void 0:n.reduce((function(n,e){var t=e.targets;return n.concat(t||[])}),[])}),[si]),pi=(0,c.useMemo)((function(){return ko[M.Mv]}),[ko]),mi=di?null!==si&&void 0!==si&&null!==(l=si[0])&&void 0!==l&&l.target?(0,E.sE)(fi,(function(n){var e;return n===(null===si||void 0===si||null===(e=si[0])||void 0===e?void 0:e.target)})):"Select target":"Select project first",vi=(0,c.useState)(pi&&!(null!==fi&&void 0!==fi&&fi.includes(pi))),hi=vi[0],bi=vi[1],gi=(0,c.useState)(null),xi=gi[0],ji=gi[1];(0,c.useEffect)((function(){kt!==xi&&ji(kt)}),[xi,kt]);var Ci=(0,te.Z)(F);(0,c.useEffect)((function(){if(JSON.stringify(F)!=JSON.stringify(Ci)){var n,e=(0,se.Rt)([F]).messages,t=null===e||void 0===e||null===(n=e[Nt])||void 0===n?void 0:n[Lt];(null===t||void 0===t?void 0:t.length)>=1&&Wo(t)}}),[F,Nt,Lt,Ci,Wo]);var Oi=(0,te.Z)(_e);(0,c.useEffect)((function(){"undefined"!==typeof _e&&_e.length!==(null===Oi||void 0===Oi?void 0:Oi.length)&&Wo(_e)}),[_e,Oi,Wo]);var Zi=(0,c.useMemo)((function(){var n=new Set;return null===pn||void 0===pn||pn.forEach((function(e){var t=e.profiles;n=new Set([].concat((0,r.Z)(n),(0,r.Z)(t)))})),(0,r.Z)(n)}),[pn]),_i=(0,c.useMemo)((function(){return"".concat(bo,"/").concat(Lt,"/codeCollapsed")}),[bo,Lt]),Ei=(0,c.useMemo)((function(){return"".concat(bo,"/").concat(Lt,"/outputCollapsed")}),[bo,Lt]);(0,c.useEffect)((function(){eo((0,me.U2)(_i,!1)),No((0,me.U2)(Ei,!1))}),[_i,Ei]);var ki=(0,c.useRef)(null),yi=(0,c.useMemo)((function(){return(0,E.HK)(Y,(function(n){return n.uuid}))}),[Y]),Ti=(0,c.useMemo)((function(){return!(null===tt||void 0===tt||!tt.find((function(n){return n.upstream_blocks.includes(Lt)})))}),[Lt,tt]),Si=(0,c.useCallback)((function(n){var e=n.bypassOffScreen,t=n.columnIndex,o=n.rect,i=n.y;if(e||(null===o||void 0===o?void 0:o.y)>=(null===Jn||void 0===Jn?void 0:Jn.y)+(null===Jn||void 0===Jn?void 0:Jn.height)||(null===o||void 0===o?void 0:o.y)<=(null===Jn||void 0===Jn?void 0:Jn.y)){var r=new CustomEvent(ue.Wf,{detail:{blockIndex:G,columnIndex:t,lockScroll:!0,y:i}});window.dispatchEvent(r)}}),[G,Jn]),Ii=!(null===we||void 0===we||!we.find((function(n){return n.uuid===Lt})))||(null===qo||void 0===qo?void 0:qo.length)>=1&&_n!==on.uF.IDLE;(0,c.useEffect)((function(){pt(dt&&!go&&!Zo&&I.t6.PYTHON===At&&(cn.qL.PYSPARK===(null===Pe||void 0===Pe?void 0:Pe.type)||!(null!==Ae&&void 0!==Ae&&Ae.emr_config)))}),[At,Zo,go,Pe,Ae,dt]);var Pi=en.ZP.execution_states.list({block_uuid:"undefined"!==typeof Lt?Lt:null,pipeline_uuid:"undefined"!==typeof bo?bo:null},{refreshInterval:Me&&Ii?1e3:5e3,revalidateOnFocus:!0},{pauseFetch:!Me&&vt>=1||!ft}),Ai=Pi.data,Ri=Pi.mutate,wi=(0,c.useCallback)((function(n){var e,t,i;nt&&Si(Ce({columnIndex:Ne?2:1,bypassOffScreen:Ne},(null===n||void 0===n?void 0:n.syncColumnPositions)||{rect:null===lt||void 0===lt||null===(e=lt.current)||void 0===e?void 0:e.getBoundingClientRect(),y:null===rt||void 0===rt||null===(t=rt.current)||void 0===t||null===(i=t.getBoundingClientRect())||void 0===i?void 0:i.y}));var r=n||{},l=r.block,u=r.code,c=r.disableReset,a=r.runDownstream,d=r.runIncompleteUpstream,s=r.runSettings,f=r.runUpstream,p=r.runTests,m=r.variables,v=p;if(null===v||"undefined"===typeof v){var h=(l||{}).type;v=[I.tf.DATA_LOADER,I.tf.DATA_EXPORTER,I.tf.TRANSFORMER].includes(h)}xo&&ln.Rj!==Vo&&Jo(ln.Rj);var b=Ce({},m||po);(null===H||void 0===H?void 0:H.length)>=1&&(null===H||void 0===H||H.forEach((function(n){var e=n.uuid,t=null===Qn||void 0===Qn?void 0:Qn[e];Object.entries((null===t||void 0===t?void 0:t.variables)||{}).forEach((function(n){var e=(0,o.Z)(n,2),t=e[0],i=e[1].types;b&&t in b&&(b[t]=(0,fe.M)(b[t],i))}))}))),null===Re||void 0===Re||Re({block:l,code:u||oo,runDownstream:a||Ti,runIncompleteUpstream:d||!1,runSettings:s,runTests:v||!1,runUpstream:f||!1,variables:b}),c||(Lo(1+Number(Bo)),Go(null),No(!1)),ft&&Ri()}),[H,oo,Ri,Ti,Qn,xo,rt,lt,Re,Bo,Ne,Vo,Lo,Go,Jo,nt,ft,po]),Di=(0,c.useState)(null),Ni=Di[0],Mi=Di[1];(0,c.useEffect)((function(){Ai&&(ht((function(n){return n+1})),Mi((null===Ai||void 0===Ai?void 0:Ai.execution_states)||[]))}),[Ai,Mi,ht]),(0,c.useEffect)((function(){null!==Ni&&(clearTimeout(ct.current),ct.current=setTimeout(Ct,1))}),[Ni,Ct,Vo]),(0,c.useEffect)((function(){Ii&&Ko(Number(new Date))}),[Ii,Ko]);var Bi=(0,te.Z)(_n);(0,c.useEffect)((function(){_n===on.uF.IDLE&&_n!==Bi&&Go(Number(new Date))}),[_n,Bi,Go]);var Li=(0,c.useCallback)((function(n){var e=n.editorRect.top,t=n.position.lineNumberTop;if(null!==$n&&void 0!==$n&&$n.current){var o=$n.current.getBoundingClientRect().height;if(e+t>o){var i=$n.current.scrollTop+(t-o+e);$n.current.scrollTo(0,i)}else if(t+e<ae.aU){var r=$n.current.scrollTop+(t+e-ae.aU);$n.current.scrollTo(0,r)}}}),[$n]),Ui=(0,c.useMemo)((function(){return(0,an.h5)(qo,So)}),[So,qo]),Fi=(0,an.oI)(Ui),Gi=Fi.hasError,Hi=Fi.hasOutput,Qi=(0,c.useMemo)((function(){return Hi||(null===qo||void 0===qo?void 0:qo.length)>=1}),[Hi,qo]),Ki=(0,x.qn)(Nt,{blockColor:St,theme:it}).accent,zi=(null===Bt||void 0===Bt?void 0:Bt.length)||0,qi=(0,kn.cU)([F],Y)[0],Wi=qi.dynamic,Yi=qi.dynamicUpstreamBlock,Vi=qi.reduceOutput,Xi=qi.reduceOutputUpstreamBlock,Ji=(0,c.useMemo)((function(){return(0,an._o)({block:F,dynamic:Wi,dynamicUpstreamBlock:Yi,hasError:Gi,reduceOutput:Vi,reduceOutputUpstreamBlock:Xi,selected:Me})}),[F,Wi,Yi,Gi,Vi,Xi,Me]),$i=Ji.borderColorShareProps,nr=Ji.tags,er=(0,c.useCallback)((function(){Me||(null===Le||void 0===Le||Le(!1),null===Ke||void 0===Ke||Ke(!0))}),[Me,Le,Ke]),tr=en.ZP.blocks.pipelines.detail(bo,ln.gM.uuid===(null===Vo||void 0===Vo?void 0:Vo.uuid)||ln.Jt.uuid===(null===Vo||void 0===Vo?void 0:Vo.uuid)?encodeURIComponent(Lt):null,{_format:"dbt"},{revalidateOnFocus:!0}),or=tr.data,ir=tr.mutate,rr=(0,c.useMemo)((function(){var n;return(null===or||void 0===or||null===(n=or.block)||void 0===n?void 0:n.metadata)||{}}),[or]),lr=(0,f.Db)(en.ZP.blocks.pipelines.useUpdate(bo,Lt),{onError:function(n){var e=(0,sn.qQ)(n).messages;Io(e)},onSuccess:function(n){return(0,sn.wD)(n,{callback:function(n){Tn(),yn(),io(oo),null!==n&&void 0!==n&&n.block&&ze(null===n||void 0===n?void 0:n.block)},onErrorCallback:function(n,e){return Ge({errors:e,response:n})}})}}),ur=(0,o.Z)(lr,1)[0],cr="CodeBlock/".concat(Lt),ar=(0,xe.y)(),dr=ar.registerOnKeyDown,sr=ar.unregisterOnKeyDown;(0,c.useEffect)((function(){return function(){sr(cr)}}),[sr,cr]),dr(cr,(function(n,e){Zn&&!N||Me&&!Hn&&((0,he.y)([un.zX,un.Uq],e)||(0,he.y)([un.PQ,un.Uq],e)?wi({block:F}):(0,he.y)([un.XR,un.Uq],e)&&C&&(n.preventDefault(),C({language:At,type:Nt,upstream_blocks:[Lt]}),wi({block:F})))}),[C,F,Hn,wi,Me,ur]),(0,c.useEffect)((function(){var n;return Qo&&(n=setInterval((function(){return uo(Number(new Date))}),1e3)),lo&&!Ii&&clearInterval(n),function(){return clearInterval(n)}}),[lo,Ii,Qo]);var fr=(0,c.useCallback)((function(n){var e,t=(e={},(0,i.Z)(e,I.tf.CUSTOM,Object.values(I.Lq).reduce((function(e,t){return(null===n||void 0===n?void 0:n.color)!==t&&e.push({label:function(){return(0,j.jsx)(O.Z,{alignItems:"center",children:(0,j.jsxs)(g.ZP,{noWrapping:!0,children:["Change color to ",(0,j.jsx)(g.ZP,{color:(0,x.qn)(I.tf.CUSTOM,{blockColor:t}).accent,inline:!0,children:t})]})})},onClick:function(){ur({block:Ce(Ce({},n),{},{color:t})})},uuid:t}),e}),[])),(0,i.Z)(e,I.tf.SCRATCHPAD,(0,r.Z)((0,an.Ts)(n,Y,"block_menu/scratchpad",C)).map((function(n){return Ce(Ce({},n),{},{onClick:function(){return De().then((function(){return n.onClick()}))}})}))),e);return t[n.type]}),[C,Y,De,ur]),pr=(0,c.useMemo)((function(){return Dt&&(null===yi||void 0===yi?void 0:yi[Dt])}),[yi,Dt]),mr=(0,c.useMemo)((function(){return!no&&![I.tf.CALLBACK,I.tf.CONDITIONAL,I.tf.EXTENSION].includes(Nt)&&(0,j.jsx)(T,{block:F,blocks:y,openSidekickView:Ie,pipeline:Pe})}),[y,F,Nt,no,Ie,Pe]),vr=(0,c.useMemo)((function(){if(Dt&&!Zo)return null;if(I.tf.GLOBAL_DATA_PRODUCT===Nt){var n=null===Ht||void 0===Ht?void 0:Ht[null===Gt||void 0===Gt?void 0:Gt.uuid];return(0,j.jsxs)(x.y9,{children:[(0,j.jsxs)(b.Z,{mb:L.cd,mt:1,children:[(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"UUID"}),(0,j.jsx)(g.ZP,{monospace:!0,children:null===n||void 0===n?void 0:n.uuid})]}),(0,j.jsxs)(b.Z,{mb:L.cd,children:[(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:(0,U.kC)((null===n||void 0===n?void 0:n.object_type)||"")}),(0,j.jsx)(u(),{as:"/pipelines/".concat(null===n||void 0===n?void 0:n.object_uuid,"/edit"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,j.jsx)(X.Z,{monospace:!0,openNewWindow:!0,children:null===n||void 0===n?void 0:n.object_uuid})})]}),(0,j.jsxs)(b.Z,{mb:1,children:[(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Override global data product settings"}),(0,j.jsx)(X.Z,{monospace:!0,onClick:function(){return Ie(_.cH.BLOCK_SETTINGS)},children:"Customize block settings"})]})]})}var e,t;return Zo&&I.t6.PYTHON!==At||(e=(0,j.jsx)(w.Z,{autoHeight:!0,autocompleteProviders:Wt,block:F,height:wn,language:At,onChange:function(n){io(n),null===ye||void 0===ye||ye(n)},onContentSizeChangeCallback:nt?function(){return jt()}:null,onDidChangeCursorPosition:Li,onMountCallback:nt?function(){xt(!0)}:null,placeholder:I.tf.DBT===Nt&&I.t6.YAML===At?"e.g. --select ".concat(di||"project","/models --exclude ").concat(di||"project","/models/some_dir"):"Start typing here...",selected:Me,setSelected:Ke,setTextareaFocused:We,shortcuts:Hn?[]:[function(n,e){return(0,pe.Q)(n,(function(){Hn||wi({block:F,code:e.getValue()})}))}],textareaFocused:et,value:oo,width:"100%"}),t=Pt&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(xn.Z,{}),(0,j.jsxs)(b.Z,{mt:1,children:[(0,j.jsxs)(x.y9,{normalPadding:!0,children:[(0,j.jsx)(g.ZP,{small:!0,children:"Callback block: define @on_success or @on_failure callbacks for this block."}),(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:["kwargs",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:" \u2192 "}),"global variables"]})]}),(0,j.jsx)(w.Z,{autoHeight:!0,autocompleteProviders:Wt,language:"python",onChange:function(n){ji(n),null===ke||void 0===ke||ke(n)},onDidChangeCursorPosition:Li,placeholder:"Start typing here...",selected:Me,setSelected:Ke,setTextareaFocused:We,textareaFocused:et,value:xi,width:"100%"})]})]})),Zo?(0,j.jsx)(In,{block:F,blocksMapping:yi,blockContent:oo,callbackEl:t,codeEditor:e,hasElementsBelow:(null===qo||void 0===qo?void 0:qo.length)>=1||!!mr,onChangeBlock:function(n){return ur({block:n})},openSidekickView:Ie,savePipelineContent:De,setContent:io,showDataIntegrationModal:Xe}):(0,j.jsxs)(j.Fragment,{children:[e,t]})}),[Wt,F,mr,At,Nt,yi,xi,oo,di,Gt,Ht,Pt,wn,Hn,Zo,qo,ke,ye,Li,Ie,Dt,wi,Me,io,xt,Ke,We,nt,et]);(0,c.useEffect)((function(){B&&Yt({python:(0,ee.Z)({autocompleteItems:B,block:F,blocks:Y,pipeline:Pe})})}),[B,F,Y,Pe]);var hr=(0,c.useMemo)((function(){var n;return xo?n=(0,j.jsx)(P.Z,{onClickTab:function(n){Jo(n),ln.gM.uuid!==n.uuid&&ln.Jt.uuid!==n.uuid||ir()},selectedTabUUID:null===Vo||void 0===Vo?void 0:Vo.uuid,tabs:(0,ln.Xy)(F),underlineColor:(0,x.qn)(I.tf.DBT,{theme:it}).accent,underlineStyle:!0}):ft&&![I.tf.CALLBACK,I.tf.CONDITIONAL,I.tf.EXTENSION].includes(Nt)&&(n=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(P.Z,{onClickTab:function(n){Jo(n)},selectedTabUUID:null===Vo||void 0===Vo?void 0:Vo.uuid,tabs:(0,ln.iz)(F),underlineColor:Ki,underlineStyle:!0}),(0,j.jsx)(xn.Z,{medium:!0})]})),n?(0,j.jsx)(x.HS,{children:n}):null}),[F,Nt,Ki,ir,xo,Vo,ft,it]),br=(0,c.useMemo)((function(){if(Ii&&lo&&lo>Qo){var n=(0,j.jsxs)(g.ZP,{muted:!0,children:["".concat(Math.round((lo-Qo)/1e3)),"s"]});return Zo&&I.t6.PYTHON!==At?(0,j.jsx)(re.Nk,{children:(0,j.jsx)(b.Z,{p:1,children:n})}):(0,j.jsx)(x.HC,{children:n})}return null}),[At,lo,Zo,Ii,Qo]),gr=(0,c.useMemo)((function(){var n,e,t;on.uF.QUEUED===_n&&(n=(0,j.jsx)($.Z,{color:null===it||void 0===it||null===(e=it.content)||void 0===e?void 0:e.active,type:"cylon"}));on.uF.BUSY===_n&&(n=(0,j.jsx)($.Z,{color:null===it||void 0===it||null===(t=it.content)||void 0===t?void 0:t.active}));var o,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{childrenBelowTabs:null,hideOutput:!1},t=e.childrenBelowTabs,o=e.hideOutput;return(0,j.jsx)(D.Z,Ce(Ce({},$i),{},{block:F,blockIndex:G,blockMetadata:rr,buttonTabs:ft?null:hr,childrenBelowTabs:t,collapsed:Do,hasOutput:Qi,hideOutput:o,isInProgress:Ii,mainContainerWidth:je,messages:Ui,messagesAll:qo,onClickSelectBlock:nt?Wn&&Ot?function(){return Ot((function(n){return Ce(Ce({},n),{},(0,i.Z)({},Lt,!Wn))}))}:er:null,openSidekickView:Ie,outputRowNormalPadding:nt||Zo||ft,pipeline:Pe,ref:Q,runCount:Bo,runEndTime:Fo,runStartTime:Qo,scrollTogether:Ne,selected:Me&&(!Wn||!nt),selectedTab:Vo,setCollapsed:nt?null:function(n){No((function(){return(0,me.t8)(Ei,n),n}))},setErrors:Ge,setOutputBlocks:Qe,setSelectedOutputBlock:qe,setSelectedTab:Jo,showBorderTop:nt,sideBySideEnabled:nt,sparkEnabled:ft,children:nt&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{px:L.cd,py:1,children:(0,j.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsx)(X.Z,{color:Ki,monospace:!0,onClick:function(){var n,e,t;Si({bypassOffScreen:!0,columnIndex:0,rect:null===rt||void 0===rt||null===(n=rt.current)||void 0===n?void 0:n.getBoundingClientRect(),y:null===lt||void 0===lt||null===(e=lt.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.y})},preventDefault:!0,children:null===F||void 0===F?void 0:F.uuid}),(0,j.jsx)(b.Z,{mr:L.cd}),n,!n&&(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){var n,e,t;return wi({block:F,syncColumnPositions:{rect:null===rt||void 0===rt||null===(n=rt.current)||void 0===n?void 0:n.getBoundingClientRect(),y:null===lt||void 0===lt||null===(e=lt.current)||void 0===e||null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.y}})},children:(0,j.jsx)(R.Z,{color:Ki,size:3*L.iI,children:(0,j.jsx)(rn.Py,{black:!0,size:1.5*L.iI})})})]})}),Qi&&(0,j.jsx)(xn.Z,{medium:!0})]})}))},l=ln.aL.uuid===(null===Vo||void 0===Vo?void 0:Vo.uuid);return ft&&![I.tf.CALLBACK,I.tf.CONDITIONAL,I.tf.EXTENSION].includes(null===F||void 0===F?void 0:F.type)?(l?o=(0,j.jsx)(Kn,{executionStates:Ni,isInProgress:Ii}):ln.qC.uuid===(null===Vo||void 0===Vo?void 0:Vo.uuid)?o=(0,j.jsx)(Fn,{executionStates:Ni,isInProgress:Ii}):ln.p.uuid===(null===Vo||void 0===Vo?void 0:Vo.uuid)?o=(0,j.jsx)(Yn,{executionStates:Ni}):ln.SD.uuid===(null===Vo||void 0===Vo?void 0:Vo.uuid)&&(o=(0,j.jsx)(qn,{disableGraph:!Me,executionStates:Ni,overrideScrollForGraph:Me})),nt?r({childrenBelowTabs:!Wn&&(0,j.jsxs)(j.Fragment,{children:[hr,(0,j.jsx)(xn.Z,{medium:!0}),(0,j.jsx)("div",{ref:ut,children:o})]}),hideOutput:!l||Wn}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(x.jv,Ce(Ce({},$i),{},{className:Me&&et?"selected":null,hideBorderBottom:l&&Qi,lightBackground:!0,noPadding:!0,children:[hr,(0,j.jsx)(xn.Z,{light:!0}),o]})),l&&r()]})):r()}),[F,Ni,G,rr,Q,$i,hr,Ki,Si,_n,Qi,Zo,Ao,Wn,Ii,Oo,je,qo,Ui,er,Ie,Do,Ei,Pe,rt,lt,wi,Bo,Fo,Qo,Ne,Me,Vo,Ge,Ot,Qe,No,qe,nt,ft,et]),xr=(0,c.useCallback)((function(){return Jt(!1)}),[]),jr=(0,c.useRef)(null),Cr=(0,c.useCallback)((function(n){clearTimeout(jr.current),yo((function(e){return Ce(Ce({},e),n)})),jr.current=setTimeout((function(){var e=Ce(Ce({},ko),n);("undefined"!==typeof e[M.cH]&&"undefined"!==e[M.sc]||"undefined"!==typeof e[M.Mv]||"undefined"!==typeof e[M.eW]||"undefined"!==typeof e[M.mW])&&De({block:{configuration:e,uuid:Lt}})}),1e3)}),[Lt,ko,De]),Or=le.zJ.BIGQUERY===ko[M.cH]||le.zJ.SNOWFLAKE===ko[M.cH],Zr=(0,c.useMemo)((function(){return(null===Y||void 0===Y?void 0:Y.length)||0}),[Y]),_r=(0,c.useMemo)((function(){return oo?(0,j.jsx)(Mn.Z,{children:oo}):(0,j.jsx)(b.Z,{px:1,children:(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,children:"Double-click to edit"})})}),[oo]);(0,c.useEffect)((function(){Oo&&Ao&&!Me&&$o(!1)}),[Ao,Oo,Me]);var Er=(0,c.useMemo)((function(){return(0,j.jsx)(Vn.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){Le(!1)}),300)},onChange:function(n){Le(!0),Cr((0,i.Z)({},M.mW,+n.target.value)),n.preventDefault()},onClick:Xn.j,onFocus:function(){Le(!0)},small:!0,type:"number",value:ko[M.mW]||"",width:11*L.iI})}),[ko,Le,Cr]),kr=(0,c.useMemo)((function(){return tn>=1}),[tn]),yr=(0,c.useMemo)((function(){return dn>=1}),[dn]),Tr=(0,c.useMemo)((function(){return fn>=1}),[fn]),Sr=(0,c.useMemo)((function(){var n=3*x.IN;return Ne?Tr&&(n+=ce.nn):(kr&&(n+=ce.nn),yr&&(n+=ce.nn)),(je-n)/2}),[kr,yr,Tr,je,Ne]),Ir=(0,c.useMemo)((function(){var n;if(Zt)return nt&&(n=0,Ne?Tr&&(n=18):(kr&&(n+=18),yr&&(n+=2))),null===H||void 0===H?void 0:H.map((function(e,t){return(0,j.jsx)("div",{children:(0,j.jsx)(S.Z,{blockInteraction:e,contained:!0,containerRef:nt?rt:J,containerWidth:nt?Sr:je,interaction:null===Qn||void 0===Qn?void 0:Qn[null===e||void 0===e?void 0:e.uuid],setVariables:mo,showVariableUUID:!0,variables:po,widthOffset:n})},"".concat(null===e||void 0===e?void 0:e.uuid,"-").concat(t))}))}),[H,kr,yr,Tr,J,Qn,Zt,je,Ne,mo,nt,po,Sr]);(0,c.useEffect)((function(){(0,be.h)()}),[Ir,ao,po]);var Pr,Ar,Rr,wr,Dr,Nr=(0,c.useMemo)((function(){return Zt&&null!==H&&void 0!==H&&H.length?(0,j.jsx)(x.HS,{children:(0,j.jsx)(b.Z,{px:L.cd,children:(0,j.jsx)(P.Z,{noPadding:!0,onClickTab:function(n){var e=n.uuid;return so(e)},selectedTabUUID:ao,tabs:ln.C4,underlineColor:(0,x.qn)(null===F||void 0===F?void 0:F.type,{blockColor:null===F||void 0===F?void 0:F.color,theme:it}).accent,underlineStyle:!0})})}):null}),[F,H,Zt,ao,so,it]),Mr=(0,c.useMemo)((function(){if(!Zt)return null;var n=[],e={};if(null===H||void 0===H||H.forEach((function(t){var o=t.uuid,i=null===Qn||void 0===Qn?void 0:Qn[o],r=null===i||void 0===i?void 0:i.variables;Object.keys(r||{}).forEach((function(t){null!==e&&void 0!==e&&e[t]||(n.push(t),e[t]=!0)}))})),null===n||void 0===n||!n.length)return null;var t=(null===n||void 0===n?void 0:n.length)||0;return(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Interaction variables:"}),(0,j.jsx)(b.Z,{mr:L.cd}),null===n||void 0===n?void 0:n.map((function(n,e){return(0,j.jsx)(b.Z,{mr:1,children:(0,j.jsxs)(g.ZP,{default:!0,monospace:!0,small:!0,children:[n,t>=2&&e<t-1&&(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:","})]})},n)}))]})}),[H,Qn,Zt]),Br=(0,c.useCallback)((function(n,e){return(0,j.jsx)(p.Z,{addNewBlock:function(e){var t=e.content,o=e.configuration,i=(0,an.eY)(n,e),r=(0,an.fA)(Pe,n,e).map((function(n){var e=Ce({},yi[n]||{}),t=e.upstream_blocks;return t&&(e.upstream_blocks=t.filter((function(n){return n!==Lt}))),e}));return[I.tf.DATA_LOADER,I.tf.TRANSFORMER].includes(Nt)&&I.tf.SCRATCHPAD===e.type&&(t="from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(bo,"', '").concat(Lt,"', 'output_0')")),t=(0,de.X7)(e,t),I.t6.SQL===At&&(o=Ce(Ce({},(0,ge.GL)(Ut,[M.cH,M.Sv,M.sc,M.BD,M.nq])),o)),I.t6.SQL===e.language&&(t=(0,de.SF)(t)),C(Ce(Ce({},e),{},{configuration:o,content:t,upstream_blocks:i}),r)},blockIdx:e,blockTemplates:z,compact:!0,hideCustom:go,hideDbt:go,onClickAddSingleDBTModel:Te,pipeline:Pe,project:Ae,setAddNewBlockMenuOpenIdx:Be,setCreatingNewDBTModel:Ue,showBrowseTemplates:Ye,showConfigureProjectModal:Ve,showGlobalDataProducts:Je})}),[Ut,z,Nt,Lt,yi,go,go,Te,Pe,Pe,bo,Ae,Be,Ue,Ye,Ve,Je]);Wn?Pr=(0,j.jsx)(Nn,{block:F,blocks:Y,onClick:function(){return Ot((function(n){return Ce(Ce({},n),{},(0,i.Z)({},Lt,!Wn))}))}}):Pr=(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{style:{position:"relative"},children:[(0,j.jsx)(x.nz,Ce(Ce({},Ce(Ce({},$i),ti)),{},{onClick:function(){return er()},ref:On?null:oi,zIndex:nt?null:Zr+1-(G||0),noSticky:nt,children:(0,j.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsx)(b.Z,{pr:1}),(0,j.jsxs)(O.Z,{alignItems:"center",flex:1,children:[(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(m.Z,{monospace:!0,children:I.tf.GLOBAL_DATA_PRODUCT===(null===F||void 0===F?void 0:F.type)?"GDP":I.dO[At]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(R.Z,{color:Ki,size:1.5*L.iI,square:!0}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(W.Z,{items:fr(F),onClickCallback:xr,onClickOutside:xr,open:Xt,parentRef:ki,uuid:"CodeBlock/block_menu",children:(0,j.jsx)(g.ZP,{color:Ki,monospace:!0,noWrapping:!0,children:null===(Ar=xo?I.tf.DBT:I.V4[Nt])||void 0===Ar?void 0:Ar.toUpperCase()})}),!Gn&&[I.tf.CUSTOM,I.tf.SCRATCHPAD].includes(Nt)&&(0,j.jsxs)(j.Fragment,{children:["\xa0",(0,j.jsx)(v.ZP,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){return Jt(!0)},transparent:!0,children:(0,j.jsx)(rn.K5,{muted:!0})})]})]}),!Gn&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(rn.iU,{size:1.5*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(h.ZP,{alignItems:"center",children:[xo&&I.t6.YAML!==At&&(0,j.jsx)(nn.Z,{block:!0,label:(0,ve.$1)(F,{fullPath:!0}),size:null,children:(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,children:(0,ve.$1)(F)})}),(!xo||I.t6.YAML===At)&&(0,j.jsx)(X.Z,{default:!0,monospace:!0,noWrapping:!0,onClick:function(){return $e(F,Rt)},preventDefault:!0,sameColorAsText:!0,children:Lt})]}),!I.iZ.includes(Nt)&&je>800&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(nn.Z,{appearBefore:!0,block:!0,label:"\n                            ".concat((0,U._6)("parent block",zi),". ").concat(0===zi?"Click to select 1 or more blocks to depend on.":"Edit parent blocks.","\n                          "),size:null,widthFitContent:zi>=1,children:(0,j.jsx)(v.ZP,{noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(){Ke(!0),Fe({upstreamBlocks:{block:F,values:null===Bt||void 0===Bt?void 0:Bt.map((function(n){return{uuid:n}}))}})},children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[0===zi&&(0,j.jsx)(rn.Jj,{size:3*L.iI}),zi>=1&&(0,j.jsx)(rn.eV,{size:3*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(g.ZP,{default:!0,monospace:zi>=1,noWrapping:!0,small:!0,underline:0===zi,children:[0===zi&&"Edit parents",zi>=1&&(0,U._6)("parent",zi)]})]})})})]}),Ft>=2&&je>725&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:L.cd}),(0,j.jsx)(nn.Z,{block:!0,label:"This block is used in ".concat(Ft," pipelines."),size:null,widthFitContent:!0,children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(rn.BG,{size:14}),(0,j.jsx)(b.Z,{ml:1}),(0,j.jsxs)(X.Z,{default:!0,monospace:!0,noWrapping:!0,onClick:function(){return Ie(_.cH.BLOCK_SETTINGS)},preventDefault:!0,small:!0,children:[Ft," pipelines"]})]})})]})]})]}),Re&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{pr:L.cd}),(0,j.jsx)(gn,{addNewBlock:C,addWidget:k,block:F,blockContent:oo,blocks:Y,deleteBlock:Cn,executionState:_n,fetchFileTree:yn,fetchPipeline:Tn,hideExtraButtons:Dn,interruptKernel:zn,isEditingBlock:Ao,openSidekickView:Ie,pipeline:Pe,project:Ae,runBlock:Hn?null:wi,savePipelineContent:De,setBlockContent:function(n){io(n),null===ye||void 0===ye||ye(n)},setErrors:Ge,setIsEditingBlock:$o,setOutputCollapsed:No,showConfigureProjectModal:Ve})]}),!nt&&!Dn&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{pr:L.cd}),(0,j.jsx)(v.ZP,{basic:!0,iconOnly:!0,noPadding:!0,onClick:function(){eo((function(n){return(0,me.t8)(_i,!n),!n})),no||No((function(){return(0,me.t8)(Ei,!0),!0}))},transparent:!0,children:no?(0,j.jsx)(rn._M,{muted:!0,size:2*L.iI}):(0,j.jsx)(rn.Kh,{muted:!0,size:2*L.iI})})]}),(0,j.jsx)(O.Z,{children:(0,j.jsx)("div",{style:{height:1,width:L.iI}})})]})})),(0,j.jsxs)(x.Nk,{onClick:function(){return er()},children:[(0,j.jsxs)(x.jv,Ce(Ce({},$i),{},{className:Me&&et?"selected":null,hideBorderBottom:!nt&&(!!hr||Qi),lightBackground:Oo&&!Ao,noPadding:!0,onClick:er,onDoubleClick:function(){Oo&&!Ao&&$o(!0)},children:[(0,j.jsx)(x.PB,{}),nr.length>=1&&(0,j.jsx)(x.HS,{children:(0,j.jsx)(b.Z,{p:1,children:(0,j.jsx)(h.ZP,{children:nr.map((function(n,e){var t=n.description,o=n.title;return(0,j.jsx)(b.Z,{ml:e>=1?1:0,children:(0,j.jsx)(nn.Z,{block:!0,description:t,size:null,widthFitContent:!0,children:(0,j.jsx)(m.Z,{children:o})})},o)}))})})}),!Un&&I.tf.DBT===Nt&&!no&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mt:1}),(0,j.jsx)(x.y9,{noMargin:!0,normalPadding:!0,children:(0,j.jsxs)(b.Z,{pb:1,children:[(0,j.jsxs)(h.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsxs)(O.Z,{alignItems:"center",children:[I.t6.YAML===At&&(0,j.jsx)(Ln.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){Le(!1)}),300)},onChange:function(n){var e;Cr((e={},(0,i.Z)(e,M.Mv,""),(0,i.Z)(e,M.eW,n.target.value),e)),n.preventDefault()},onClick:Xn.j,onFocus:function(){Le(!0)},placeholder:"Project",small:!0,value:ko[M.eW]||"",children:Object.keys(ai||{}).map((function(n){return(0,j.jsx)("option",{value:n,children:n},n)}))}),I.t6.YAML!==At&&(0,j.jsx)(g.ZP,{monospace:!0,small:!0,children:di}),(0,j.jsx)(b.Z,{mr:2}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Target"}),(0,j.jsx)("span",{children:"\xa0"}),!hi&&(0,j.jsx)(Ln.Z,{compact:!0,disabled:!di,monospace:!0,onBlur:function(){return setTimeout((function(){Le(!1)}),300)},onChange:function(n){Cr((0,i.Z)({},M.Mv,n.target.value)),n.preventDefault()},onClick:Xn.j,onFocus:function(){Le(!0)},placeholder:mi,small:!0,value:pi||"",children:null===fi||void 0===fi?void 0:fi.map((function(n){return(0,j.jsx)("option",{value:n,children:n},n)}))}),hi&&(0,j.jsx)(Vn.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){Le(!1)}),300)},onChange:function(n){Cr((0,i.Z)({},M.Mv,n.target.value)),n.preventDefault()},onClick:Xn.j,onFocus:function(){Le(!0)},placeholder:di?(null===si||void 0===si||null===(Rr=si[0])||void 0===Rr?void 0:Rr.target)||"Enter target":"Select project first",small:!0,value:pi||"",width:21*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(h.ZP,{alignItems:"center",children:(0,j.jsx)(nn.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["Manually type the name of the target you want to use in the profile.",(0,j.jsx)("br",{}),"Interpolate environment variables and global variables using the following syntax:",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:"{{ env_var('NAME') }}"})," or ",(0,j.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:"{{ variables('NAME') }}"})]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(A.Z,{checked:hi,label:(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:"Manually enter target"}),onClick:function(n){(0,Xn.j)(n),bi(!hi),hi&&Cr((0,i.Z)({},M.Mv,null))}}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(rn.kI,{muted:!0})]})})})]}),I.t6.YAML!==At&&!(null!==ci&&void 0!==ci&&null!==(wr=ci.block)&&void 0!==wr&&wr.snapshot)&&(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(nn.Z,{appearBefore:!0,block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["Limit the number of results that are returned",(0,j.jsx)("br",{}),"when running this block in the notebook.",(0,j.jsx)("br",{}),"This limit won\u2019t affect the number of results",(0,j.jsx)("br",{}),"returned when running the pipeline end-to-end."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(rn.kI,{muted:!0}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Sample limit"}),(0,j.jsx)("span",{children:"\xa0"})]})}),Er,(0,j.jsx)(b.Z,{mr:1})]})]}),I.t6.YAML===At&&(0,j.jsx)(b.Z,{mt:1,children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsxs)(O.Z,{alignItems:"center",flex:1,children:[(0,j.jsx)(g.ZP,{default:!0,monospace:!0,small:!0,children:"dbt"}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(Vn.Z,{compact:!0,monospace:!0,onBlur:function(){return setTimeout((function(){Le(!1)}),300)},onChange:function(n){Cr((0,i.Z)({},M.Pi,Ce(Ce({},null===ko||void 0===ko?void 0:ko[M.Pi]),{},(0,i.Z)({},M.pA,n.target.value)))),n.preventDefault()},onClick:Xn.j,onFocus:function(){Le(!0)},placeholder:"command",small:!0,value:(null===ko||void 0===ko||null===(Dr=ko[M.Pi])||void 0===Dr?void 0:Dr[M.pA])||"",width:10*L.iI}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{monospace:!0,small:!0,children:"[type your --select and --exclude syntax below]"}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:["(paths start from ",(null===ko||void 0===ko?void 0:ko[M.eW])||"project"," folder)"]})]}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:(0,j.jsx)(X.Z,{href:"https://docs.getdbt.com/reference/node-selection/syntax#examples",openNewWindow:!0,small:!0,children:"Examples"})}),(0,j.jsx)(b.Z,{mr:1})]})})]})})]}),!Un&&jo&&!no&&I.tf.DBT!==Nt&&(0,j.jsx)(x.y9,{normalPadding:!0,children:(0,j.jsxs)(h.ZP,{flexWrap:"wrap",children:[(0,j.jsxs)(h.ZP,{style:{marginTop:"8px"},children:[(0,j.jsx)(Ln.Z,{compact:!0,label:"Connection",onChange:function(n){return Cr((0,i.Z)({},M.cH,n.target.value))},onClick:Xn.j,small:!0,value:ko[M.cH],children:null===pn||void 0===pn?void 0:pn.map((function(n){var e=n.id,t=n.value;return(0,j.jsx)("option",{value:t,children:e},e)}))}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(Ln.Z,{compact:!0,label:"Profile",onChange:function(n){return Cr((0,i.Z)({},M.sc,n.target.value))},onClick:Xn.j,small:!0,value:ko[M.sc],children:null===Zi||void 0===Zi?void 0:Zi.map((function(n){return(0,j.jsx)("option",{value:n,children:n},n)}))}),(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(h.ZP,{alignItems:"center",children:(0,j.jsx)(nn.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["If checked, you\u2019ll have to write your own custom",(0,j.jsx)("br",{}),"CREATE TABLE commands and INSERT commands.",(0,j.jsx)("br",{}),"Separate your commands using a semi-colon: ",(0,j.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:";"})]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(A.Z,{checked:ko[M.Mi],label:(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:"Use raw SQL"}),onClick:function(n){(0,Xn.j)(n),Cr((0,i.Z)({},M.Mi,!ko[M.Mi]))}}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(rn.kI,{muted:!0})]})})}),!ko[M.Mi]&&(0,j.jsxs)(j.Fragment,{children:[Or&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(h.ZP,{alignItems:"center",children:(0,j.jsx)(Vn.Z,{compact:!0,label:"Database",monospace:!0,onBlur:function(){return setTimeout((function(){Le(!1)}),300)},onChange:function(n){Cr((0,i.Z)({},M.Sv,n.target.value)),n.preventDefault()},onClick:Xn.j,onFocus:function(){Le(!0)},small:!0,value:ko[M.Sv],width:10*L.iI})})]}),(0,j.jsx)(b.Z,{mr:1}),![Pn.CLICKHOUSE,Pn.MYSQL].includes(ko[M.cH])&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(nn.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["Schema that is used when creating a table and inserting values.",(0,j.jsx)("br",{}),"This field is required."]}),size:null,widthFitContent:!0,children:(0,j.jsx)(h.ZP,{alignItems:"center",children:(0,j.jsx)(Vn.Z,{compact:!0,label:"Schema",monospace:!0,onBlur:function(){return setTimeout((function(){Le(!1)}),300)},onChange:function(n){Cr((0,i.Z)({},M.BD,n.target.value)),n.preventDefault()},onClick:Xn.j,onFocus:function(){Le(!0)},small:!0,value:ko[M.BD],width:10*L.iI})})}),(0,j.jsx)(b.Z,{mr:1})]}),(0,j.jsx)(nn.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["This value will be used as the table name.",(0,j.jsx)("br",{}),"If blank, the default table name will be:",(0,j.jsx)("br",{}),(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,children:[bo,"_",Lt]}),(0,j.jsx)("br",{}),"This field is optional."]}),size:null,widthFitContent:!0,children:(0,j.jsx)(h.ZP,{alignItems:"center",children:(0,j.jsx)(Vn.Z,{compact:!0,label:"Table (optional)",monospace:!0,onBlur:function(){return setTimeout((function(){Le(!1)}),300)},onChange:function(n){Cr((0,i.Z)({},M.m$,n.target.value)),n.preventDefault()},onClick:Xn.j,onFocus:function(){Le(!0)},small:!0,value:ko[M.m$],width:20*L.iI})})})]}),(0,j.jsx)(b.Z,{mr:1})]}),!ko[M.Mi]&&(0,j.jsxs)(h.ZP,{alignItems:"center",style:{marginTop:"8px"},children:[(0,j.jsx)(nn.Z,{block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["Limit the number of results that are returned",(0,j.jsx)("br",{}),"when running this block in the notebook.",(0,j.jsx)("br",{}),"This limit won\u2019t affect the number of results",(0,j.jsx)("br",{}),"returned when running the pipeline end-to-end."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(rn.kI,{muted:!0}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Limit"}),(0,j.jsx)("span",{children:"\xa0"})]})}),Er,(0,j.jsx)(b.Z,{mr:1}),(0,j.jsx)(nn.Z,{autoWidth:!0,block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["How do you want to handle existing data with the same",Or?" database,":""," schema, and table name?",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,children:"Append"}),": add rows to the existing table.",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,children:"Replace"}),": delete the existing data.",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{bold:!0,inline:!0,monospace:!0,children:"Fail"}),": raise an error during execution."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(rn.kI,{muted:!0}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(g.ZP,{monospace:!0,muted:!0,small:!0,children:"Write policy:"}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(Ln.Z,{compact:!0,label:"strategy",onChange:function(n){return Cr((0,i.Z)({},M.nq,n.target.value))},onClick:Xn.j,small:!0,value:ko[M.nq],children:null===An||void 0===An?void 0:An.map((function(n){return(0,j.jsx)("option",{value:n,children:(0,U.kC)(n)},n)}))})]})}),(0,j.jsx)(b.Z,{mr:1})]}),(null===ko||void 0===ko?void 0:ko[M.cH])===Pn.TRINO&&Bt.length>=1&&(0,j.jsxs)(h.ZP,{alignItems:"center",style:{marginTop:"8px"},children:[(0,j.jsx)(nn.Z,{appearBefore:!0,block:!0,description:(0,j.jsxs)(g.ZP,{default:!0,inline:!0,children:["If checked, upstream blocks that aren\u2019t SQL blocks",(0,j.jsx)("br",{}),"will have their data exported into a table that is",(0,j.jsx)("br",{}),"uniquely named upon each block run. For example,",(0,j.jsx)("br",{}),(0,j.jsx)(g.ZP,{default:!0,inline:!0,monospace:!0,children:"[pipeline_uuid]_[block_uuid]_[unique_timestamp]"}),"."]}),size:null,widthFitContent:!0,children:(0,j.jsxs)(h.ZP,{alignItems:"center",children:[(0,j.jsx)(A.Z,{checked:ko[M.bk],label:(0,j.jsx)(g.ZP,{muted:!0,small:!0,children:"Unique upstream table names"}),onClick:function(n){(0,Xn.j)(n),Cr((0,i.Z)({},M.bk,!ko[M.bk]))}}),(0,j.jsx)("span",{children:"\xa0"}),(0,j.jsx)(rn.kI,{muted:!0})]})}),(0,j.jsx)(b.Z,{mr:1})]})]})}),Nr,Bt.length>=1&&!no&&(I.f2.includes(Nt)||I.tf.DBT===Nt&&I.t6.YAML===At)&&!go&&!Dt&&!Zo&&(!ao||ao===ln.zr.uuid)&&(0,j.jsxs)(x.y9,{noMargin:!0,normalPadding:!0,children:[I.tf.DBT===Nt&&I.t6.YAML===At&&(0,j.jsxs)(b.Z,{py:1,children:[(0,j.jsxs)(g.ZP,{muted:!0,small:!0,children:["Positional order of upstream block outputs for ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"block_output"})," function:"]}),(0,j.jsx)(h.ZP,{children:Bt.reduce((function(n,e,t){var o=yi[e],i=(0,x.qn)(null===o||void 0===o?void 0:o.type,{blockColor:null===o||void 0===o?void 0:o.color,theme:it}).accent;n.push((0,j.jsx)(X.Z,{color:i,onClick:function(){var n,e,t=null===K||void 0===K||null===(n=K.current)||void 0===n?void 0:n["".concat(null===o||void 0===o?void 0:o.type,"s/").concat(null===o||void 0===o?void 0:o.uuid,".py")];null===t||void 0===t||null===(e=t.current)||void 0===e||e.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(g.ZP,{color:i,inline:!0,monospace:!0,small:!0,children:e})},e));var r=(null===Bt||void 0===Bt?void 0:Bt.length)||0;return r>=2&&t<r-1&&n.push((0,j.jsx)(g.ZP,{inline:!0,muted:!0,small:!0,children:",\xa0\xa0"},"".concat(e,"-comma"))),n}),[])})]}),I.tf.DBT!==Nt&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b.Z,{mr:1,pt:1,children:(0,j.jsxs)(g.ZP,{muted:!0,small:!0,children:[!jo&&"Positional arguments for ".concat(Co?"":"decorated ","function:"),jo&&(0,j.jsxs)(j.Fragment,{children:["The interpolated tables below are available in queries from upstream blocks.",(0,j.jsx)("br",{}),"Example: ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,small:!0,children:"SELECT * FROM {{ df_1 }}"})," to insert all rows from ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,small:!0,children:null===Bt||void 0===Bt?void 0:Bt[0]})," into a table."]})]})}),(0,j.jsxs)(b.Z,{my:1,children:[!jo&&!Co&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:[I.tf.DATA_EXPORTER===Nt&&"@data_exporter",I.tf.DATA_LOADER===Nt&&"@data_loader",I.tf.TRANSFORMER===Nt&&"@transformer",I.tf.CUSTOM===Nt&&"@custom"]}),(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:["def ",(I.tf.DATA_EXPORTER===Nt?"export_data":I.tf.DATA_LOADER===Nt&&"load_data")||I.tf.TRANSFORMER===Nt&&"transform"||I.tf.CUSTOM===Nt&&"transform_custom","(",Bt.map((function(n,e){return e>=1?"data_".concat(e+1):"data"})).join(", "),"):"]})]}),Co&&(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,small:!0,children:[I.tf.DATA_EXPORTER===Nt?"export_data":I.tf.TRANSFORMER===Nt&&"transform","\xa0\u2190 function(",Bt.map((function(n,e){return"df_".concat(e+1)})).join(", "),"):"]})}),jo&&(null===Bt||void 0===Bt?void 0:Bt.length)>=1&&(0,j.jsx)(ne,{block:F,blockConfiguration:ko,blockRefs:K,blocks:null===Bt||void 0===Bt?void 0:Bt.map((function(n){return null===yi||void 0===yi?void 0:yi[n]})),updateBlockConfiguration:Cr}),!jo&&Bt.map((function(n,e){var t=yi[n],o=(0,x.qn)(null===t||void 0===t?void 0:t.type,{blockColor:null===t||void 0===t?void 0:t.color,theme:it}).accent,i="{{ df_".concat(e+1," }}");return(0,j.jsxs)("div",{children:[!jo&&!Co&&(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["\xa0\xa0\xa0\xa0data",e>=1?"_".concat(e+1):null]}),jo&&(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:i}),Co&&(0,j.jsxs)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:["\xa0\xa0\xa0\xa0","df".concat(e+1)]})," ",(0,j.jsx)(g.ZP,{inline:!0,monospace:!0,muted:!0,small:!0,children:"\u2192"})," ",(0,j.jsx)(X.Z,{color:o,onClick:function(){var n,e,o=null===K||void 0===K||null===(n=K.current)||void 0===n?void 0:n["".concat(null===t||void 0===t?void 0:t.type,"s/").concat(null===t||void 0===t?void 0:t.uuid,".py")];null===o||void 0===o||null===(e=o.current)||void 0===e||e.scrollIntoView()},preventDefault:!0,small:!0,children:(0,j.jsx)(g.ZP,{color:o,inline:!0,monospace:!0,small:!0,children:n})})]},n)}))]})]})]}),(!ao||!(null!==H&&void 0!==H&&H.length)||ao===ln.zr.uuid)&&!no&&Mr&&(0,j.jsx)(x.HS,{darkBorder:!0,noBackground:!0,children:(0,j.jsx)(b.Z,{p:1,children:Mr})}),ln.aj.uuid===ao&&(null===H||void 0===H?void 0:H.length)>=1&&!no&&(0,j.jsx)(j.Fragment,{children:Ir}),!It&&(!ao||!(null!==H&&void 0!==H&&H.length)||ln.zr.uuid===ao)&&(0,j.jsx)(j.Fragment,{children:no?(0,j.jsx)(b.Z,{p:1,children:(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,children:["(",(0,U._6)("line",null===oo||void 0===oo?void 0:oo.split(/\r\n|\r|\n/).length)," collapsed)"]})}):!Oo||Ao?pr&&!Zo?(0,j.jsx)(b.Z,{px:1,py:L.cd,children:(0,j.jsxs)(g.ZP,{monospace:!0,muted:!0,children:["Replicated from block ",(0,j.jsx)(X.Z,{color:(0,x.qn)(null===pr||void 0===pr?void 0:pr.type,{blockColor:null===pr||void 0===pr?void 0:pr.color,theme:it}).accent,onClick:function(n){var e,t;(0,Xn.j)(n);var o=null===K||void 0===K||null===(e=K.current)||void 0===e?void 0:e["".concat(null===pr||void 0===pr?void 0:pr.type,"s/").concat(null===pr||void 0===pr?void 0:pr.uuid,".py")];null===o||void 0===o||null===(t=o.current)||void 0===t||t.scrollIntoView()},preventDefault:!0,children:(0,j.jsx)(g.ZP,{color:(0,x.qn)(null===pr||void 0===pr?void 0:pr.type,{blockColor:null===pr||void 0===pr?void 0:pr.color,theme:it}).accent,inline:!0,monospace:!0,children:null===pr||void 0===pr?void 0:pr.uuid})})]})}):(0,j.jsx)(b.Z,{py:Zo?0:L.cd,children:vr}):_r}),En&&c.cloneElement(En,{runBlockAndTrack:wi}),It&&(0,j.jsxs)(b.Z,{p:L.cd,children:[(0,j.jsx)(g.ZP,{bold:!0,danger:!0,children:null===It||void 0===It?void 0:It.error}),(0,j.jsx)(g.ZP,{muted:!0,children:null===It||void 0===It?void 0:It.message})]}),!(Zo&&I.t6.PYTHON!==At)&&br,Zo&&I.t6.PYTHON!==At&&br,mr]})),!nt&&gr]})]})});var Lr=(0,j.jsx)("div",{ref:e,children:(0,j.jsx)("div",{ref:ri,style:{zIndex:G===Z?Zr+9:null},children:(0,j.jsxs)("div",{style:{paddingTop:nt&&0===G?x.WC:0,position:"relative"},children:[nt&&G>=1&&(0,j.jsxs)(x.gE,{additionalZIndex:Zr-G,bottom:0,height:x.WC,onMouseEnter:function(){return zt(!0)},onMouseLeave:function(){zt(!1),null===Be||void 0===Be||Be(null)},children:[Kt&&C&&(0,j.jsx)(b.Z,{mx:2,style:{width:"100%"},children:Br(null===Y||void 0===Y?void 0:Y[G-1],G-1)}),(0,j.jsx)(x.t1,{className:"block-divider-inner"})]}),Pr,!nt&&!Ee&&(0,j.jsxs)(x.gE,{additionalZIndex:Zr-G,onMouseEnter:function(){return zt(!0)},onMouseLeave:function(){zt(!1),null===Be||void 0===Be||Be(null)},children:[Kt&&C&&(0,j.jsx)(b.Z,{mt:2,mx:2,style:{width:"100%"},children:Br(F,G)}),(0,j.jsx)(x.t1,{className:"block-divider-inner"})]}),V]})})}),Ur=(0,c.useMemo)((function(){var n=Jn||{},e=(n.height,n.x),t=(n.width,n.y),o=e+x.IN;return kr&&!Ne&&(o+=ce.nn),(0,j.jsx)(x.j1,{left:o,ref:rt,top:t,width:Sr,children:Lr})}),[G,Lr,kr,Jn,Ne]),Fr=(0,c.useMemo)((function(){return((null===Y||void 0===Y?void 0:Y.length)||0)-G}),[G,Y]),Gr=(0,c.useMemo)((function(){var n=Jn||{},e=(n.height,n.x),t=n.width,o=n.y,i=ot+x.IN-(e+t);return Ne?Tr&&(i+=x.IN):yr&&(i+=x.IN),(0,j.jsx)(x.j1,{ref:lt,right:i,top:o,width:Sr,zIndex:Fr,children:gr})}),[G,Y,gr,yr,Tr,Jn,Sr,ot,Fr]);return nt?(0,j.jsxs)(x.fk,{zIndex:Me?Fr:Kt?2*Fr:null,children:[Ur,Gr]}):Lr}var _e=c.forwardRef(Ze)},84820:function(n,e,t){t.d(e,{Z:function(){return h}});var o,i=t(21831),r=t(44425),l=t(82394),u=t(75582),c=t(17717);!function(n){n.DATA_EXPORTER="data_exporter",n.DATA_LOADER="data_loader",n.MAGE_LIBRARY="mage_library",n.TRANSFORMER="transformer",n.USER_LIBRARY="user_library"}(o||(o={}));var a=t(89209);function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach((function(e){(0,l.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var f=t(86735);function p(n,e){var t=n;t.includes("__init__")||t.push("__init__");var o,i=t.length;return(0,f.w6)(i).forEach((function(n,r){if(o)return o;var l=t.slice(0,i-r).join(c.sep);o=e["".concat(l,".py")]})),o}function m(n,e,t){var o,i,r;return((null===(o=t.outputs)||void 0===o||null===(i=o[0])||void 0===i||null===(r=i.sample_data)||void 0===r?void 0:r.columns)||[]).map((function(t){return{label:"".concat(t," column"),kind:n.languages.CompletionItemKind.Variable,insertText:"'".concat(t,"'"),range:e}}))}function v(n,e){var t=n.word.split(""),o=new RegExp(t.reduce((function(n,e,o){var i=t[o+1],r=i?"^".concat(i):"";return n+"".concat(e,"[w ").concat(r,"]*")}),""));return e.reduce((function(n,e){return e.label.match(o)?n.concat(e):n}),[])}function h(n){var e=n.autocompleteItems,t=n.block,l=n.blocks,d=n.pipeline,h=t.type,b=t.upstream_blocks,g=(0,f.HK)(e,(function(n){return n.id}));return function(t){return function(x,j){var C=[],O=x.getValueInRange({endColumn:j.column,endLineNumber:j.lineNumber,startColumn:1,startLineNumber:1}),Z=x.getWordUntilPosition(j),_=Z.endColumn,E=Z.startColumn,k={endColumn:_,endLineNumber:j.lineNumber,startColumn:E,startLineNumber:j.lineNumber},y=function(n,e,t){var o=(0,a.Yn)(n),i=(0,a.M4)(n,e),r=o.find((function(n){var e=n.variableName;return i.match(new RegExp(e))}));if(r){var l=r.assignmentValue,u=(0,a.S0)(n)[l];if(u){var c,d=p(u.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(n,e){return e.trim()?n.concat(e):n}),[]).join(".").split("."),t),s=(0,a.rW)(u,l);return null===d||void 0===d||null===(c=d.methods_for_class)||void 0===c?void 0:c[s]}}return[]}(O,k,g);if((null===y||void 0===y?void 0:y.length)>=1){var T=v(Z,y.map((function(n){return{filterText:n,insertText:n,kind:t.languages.CompletionItemKind.Method,label:n,range:k}})));if(T.length>=1)return{suggestions:T}}var S=function(n,e,t){var o=(0,a.M4)(n,e);if(o=o.match(/([\w_]+)./)){var i=(0,a.S0)(n)[o[1]];if(i){var r=p(i.split(" as ")[0].replace("from ","").replace("import ","").split(" ").reduce((function(n,e){return e.trim()?n.concat(e):n}),[]).join(".").split("."),t);if(null!==r&&void 0!==r&&r.functions)return null===r||void 0===r?void 0:r.functions}}return[]}(O,k,g);if((null===S||void 0===S?void 0:S.length)>=1){var I=v(Z,S.map((function(n){return{filterText:n,insertText:n,kind:t.languages.CompletionItemKind.Function,label:n,range:k}})));if(I.length>=1)return{suggestions:I}}if((null===b||void 0===b?void 0:b.length)>=1){var P=new RegExp("\n@".concat(h));O.match(P)&&C.push.apply(C,(0,i.Z)(v(Z,function(n,e,t){var o=t.block,i=t.blocks,r=o.upstream_blocks,l=(0,f.HK)(i,(function(n){return n.uuid}));return r.map((function(t,o){var i=l[t].type,r=0===o?"output_0":"args[".concat(o-1,"]");return{label:"df ".concat(t," ").concat(i," block"),kind:n.languages.CompletionItemKind.Variable,documentation:"Variable for ".concat(i," ").concat(t," data."),insertText:r,range:e}}))}(t,k,n))))}if(Z.word.match(/i|f/)){var A=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,t=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,l=(arguments.length>2?arguments[2]:void 0).word,d=new Set,f={};n.forEach((function(n){var e=n.group,t=n.id,i=n.imports;if([o.MAGE_LIBRARY,o.USER_LIBRARY].includes(e)){var r=t;r.match(/__init__.py/)&&(r=r.replace(/\/__init__.py/,"")),r=r.split(".py")[0].replaceAll(c.sep,"."),f[r]=n}var l=t.replace(".py","").replace("/__init__","").split(c.sep);if(1===l.length)d.add("import ".concat(l[0]));else if(l.length>=2){var u=l.slice(0,l.length-1).join(".");d.add("from ".concat(u," import ").concat(l[l.length-1]))}i.forEach((function(n){return d.add(n)}))}));var p,m="i"===l,v="f"===l,h=m?"import":v?"from":"",b=(0,a.M4)(e,r);if(m&&b.match(/from/)&&(p=b.match(/from ([A-Za-z0-9_.]+) /)[1]),p&&f[p]){var g=f[p],x=g.classes,j=g.constants,C=g.files,O=g.functions,Z=[];return[[j,t.languages.CompletionItemKind.Constant],[x,t.languages.CompletionItemKind.Class],[O,t.languages.CompletionItemKind.Function]].forEach((function(n){var e=(0,u.Z)(n,2),t=e[0],o=e[1];t.forEach((function(n){Z.push({filterText:"import ".concat(n),insertText:"import ".concat(n),kind:o,label:n,range:r})}))})),C.forEach((function(n){var e=n.split(c.sep),o=e[e.length-1].split(".py")[0];Z.push({filterText:"import ".concat(o),insertText:"import ".concat(o),kind:t.languages.CompletionItemKind.Variable,label:o,range:r})})),Z}return(0,i.Z)(d).map((function(n){return{filterText:n,insertText:n,kind:t.languages.CompletionItemKind.File,label:n,range:r}})).concat(Object.entries(f).map((function(n){var e=(0,u.Z)(n,2),o=e[0];return e[1],{filterText:"".concat(h," ").concat(o),insertText:"".concat(h," ").concat(o," "),kind:t.languages.CompletionItemKind.File,label:"".concat(o),range:s({},r)}})))}(e,O,Z,t,k,n);C.push.apply(C,(0,i.Z)(A))}if(r.tf.CHART===h||r.tf.SCRATCHPAD===h){var R=[];if(r.tf.CHART===h?b.forEach((function(n,e){R.push({block:l.find((function(e){var t=e.uuid;return n===t})),matchIndex:0,variableName:"df_".concat(e+1)})})):r.tf.SCRATCHPAD===h&&function(n,e){return n.map((function(n){return{block:n,regex:new RegExp("([\\w_]+)[ ]*=[ ]*get_variable\\('".concat(e.uuid,"', '").concat(n.uuid,"', 'output_0'\\)"),"g")}}))}(l,d).forEach((function(n){var e=n.block,t=n.regex,o=O.matchAll(t);(0,i.Z)(o).forEach((function(n){var t=null===n||void 0===n?void 0:n.index,o=null===n||void 0===n?void 0:n[1];o&&R.push({block:e,matchIndex:t,variableName:o})}))})),R.length>=1){var w,D=null===(w=O.split("\n")[j.lineNumber-1])||void 0===w?void 0:w.slice(0,Z.startColumn-1);if(D){var N=[];if(R.forEach((function(n){var e=n.block,o=n.matchIndex,i=n.variableName,r=new RegExp("".concat(i,"\\["));D.match(r)&&N.push({items:m(t,k,e),matchIndex:o})})),N.length>=1)return{suggestions:v(Z,(0,f.YC)(N,"matchIndex",{ascending:!1})[0].items)}}}1===E&&(r.tf.CHART===h?C.push.apply(C,(0,i.Z)(v(Z,b.map((function(n,e){var o="df_".concat(e+1);return{label:"".concat(o," ").concat(n," block"),kind:t.languages.CompletionItemKind.Snippet,insertText:o,range:k}}))))):r.tf.SCRATCHPAD===h&&C.push.apply(C,(0,i.Z)(v(Z,function(n,e,t){var o=t.block,i=t.blocks,l=t.pipeline;return i.reduce((function(t,i){var u=i.type,c=i.uuid;return o.uuid!==c&&[r.tf.DATA_LOADER,r.tf.TRANSFORMER].includes(u)?t.concat({label:"df ".concat(c," ").concat(u," block"),kind:n.languages.CompletionItemKind.Snippet,documentation:"Get the data from ".concat(u," block ").concat(c,"."),insertText:"from mage_ai.data_preparation.variable_manager import get_variable\n\n\ndf = get_variable('".concat(l.uuid,"', '").concat(c,"', 'output_0')\n"),range:e}):t}),[])}(t,k,n)))))}var M=new Set;l.concat({content:O}).forEach((function(n){var e=n.content;(0,i.Z)(e.matchAll("([A-Za-z_0-9]+)","g")).forEach((function(n){return M.add(n[1])}))}));var B=(0,i.Z)(M);if(B.length){var L=B.map((function(n){return{filterText:n,insertText:n,kind:t.languages.CompletionItemKind.Variable,label:n,range:k}}));C.push.apply(C,(0,i.Z)(v(Z,L)))}return{suggestions:C}}}}},32929:function(n,e,t){t.d(e,{A2:function(){return h},dP:function(){return b},hS:function(){return j},iK:function(){return g},n9:function(){return v},qy:function(){return x}});var o,i=t(26304),r=t(82394),l=t(13507),u=t(44425),c=t(72473),a=t(57653),d=t(55283),s=["uuid"],f=["uuid"];function p(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function m(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?p(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var v={uuid:"Blocks"},h={uuid:"Pipelines"},b=[v,h],g=(o={},(0,r.Z)(o,u.tf.CALLBACK,c.AQ),(0,r.Z)(o,u.tf.CHART,c.GQ),(0,r.Z)(o,u.tf.CONDITIONAL,c.hW),(0,r.Z)(o,u.tf.CUSTOM,c.VS),(0,r.Z)(o,u.tf.DATA_EXPORTER,c.zS),(0,r.Z)(o,u.tf.DATA_LOADER,c.rH),(0,r.Z)(o,u.tf.DBT,c.xE),(0,r.Z)(o,u.tf.EXTENSION,c.Bf),(0,r.Z)(o,u.tf.MARKDOWN,c.$B),(0,r.Z)(o,u.tf.SENSOR,c.LM),(0,r.Z)(o,u.tf.TRANSFORMER,c.Sv),o),x=[{Icon:c.zQ,uuid:"All templates"}].concat([{uuid:u.tf.DATA_LOADER},{uuid:u.tf.TRANSFORMER},{selectedIconProps:{inverted:!0},uuid:u.tf.DATA_EXPORTER},{uuid:u.tf.SENSOR},{selectedIconProps:{inverted:!0},uuid:u.tf.CUSTOM},{uuid:u.tf.CHART},{selectedIconProps:{inverted:!0},uuid:u.tf.CALLBACK},{selectedIconProps:{inverted:!0},uuid:u.tf.CONDITIONAL},{uuid:u.tf.EXTENSION},{selectedBackgroundColor:null,uuid:u.tf.DBT},{selectedIconProps:{inverted:!0},uuid:u.tf.MARKDOWN}].map((function(n){var e=n.uuid,t=(0,i.Z)(n,s);return m({Icon:g[e],filterTemplates:function(n){return null===n||void 0===n?void 0:n.filter((function(n){return n.block_type===e}))},label:function(){return u.V4[e]},selectedBackgroundColor:function(n){return(0,d.qn)(e,{theme:n}).accent},uuid:e},t)}))),j=[{Icon:c.zQ,uuid:"All templates"}].concat([{Icon:c.X5,uuid:a.qL.PYTHON},{Icon:c.ZG,uuid:a.qL.INTEGRATION},{Icon:l.Z,uuid:a.qL.STREAMING}].map((function(n){var e=n.uuid,t=(0,i.Z)(n,f);return m({filterTemplates:function(n){return null===n||void 0===n?void 0:n.filter((function(n){var t;return(null===n||void 0===n||null===(t=n.pipeline)||void 0===t?void 0:t.type)===e}))},label:function(){return a.G7[e]},uuid:e},t)})))},84649:function(n,e,t){t.d(e,{EN:function(){return k},FX:function(){return y},HS:function(){return C},Nk:function(){return m},Rd:function(){return p},SL:function(){return E},Tj:function(){return _},UE:function(){return Z},Yf:function(){return h},ZG:function(){return d},bC:function(){return v},n5:function(){return f},n8:function(){return O},w5:function(){return j},wj:function(){return g},wl:function(){return b},ze:function(){return x}});var o=t(38626),i=t(44897),r=t(42631),l=t(46684),u=t(70515),c=t(91437),a=t(47041),d=2.5*u.iI,s=40*u.iI,f=10*u.iI,p=o.default.div.withConfig({displayName:"indexstyle__ContainedStyle",componentId:"sc-8sk2qr-0"})([""," overflow:auto;"," "," ",""],a.w5,(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).page,";\n  ")}),(function(n){return n.height&&"\n    height: ".concat(n.height-f,"px;\n  ")}),(function(n){return n.width&&"\n    width: ".concat(n.width-f,"px;\n  ")})),m=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-8sk2qr-1"})(["height:100%;position:relative;"]),v=o.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-8sk2qr-2"})(["position:fixed;width:","px;z-index:1;"," "," ",""],s,(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).panel,";\n    border-right: 1px solid ").concat((n.theme.borders||i.Z.borders).light,";\n  ")}),(function(n){return n.height&&"\n    height: ".concat(n.height-f,"px;\n  ")}),(function(n){return!n.height&&"\n    height: 100%;\n  "})),h=o.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-8sk2qr-3"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;",""],1*u.iI,u.cd*u.iI,u.cd*u.iI,1*u.iI,(function(n){return"\n    border-bottom: 1px solid ".concat((n.theme.borders||i.Z.borders).light,";\n  ")})),b=o.default.div.withConfig({displayName:"indexstyle__LinksContainerStyle",componentId:"sc-8sk2qr-4"})([""," overflow:auto;position:fixed;width:","px;",""],a.w5,s,(function(n){return"\n    height: calc(100% - ".concat(55+(null!==n&&void 0!==n&&n.contained?f:l.Mz)+((null===n||void 0===n?void 0:n.heightOffset)||0),"px);\n  ")})),g=o.default.div.withConfig({displayName:"indexstyle__NavLinkStyle",componentId:"sc-8sk2qr-5"})([""," padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;&:hover{cursor:pointer;}",""],(0,c.eR)(),1*u.iI,u.cd*u.iI,u.cd*u.iI,1*u.iI,(function(n){return n.selected&&"\n    background-color: ".concat((n.theme.background||i.Z.background).codeTextarea,";\n  ")})),x=o.default.div.withConfig({displayName:"indexstyle__IconStyle",componentId:"sc-8sk2qr-6"})([""," border-radius:","px;height:","px;margin-right:","px;padding:","px;width:","px;"," ",""],(0,c.eR)(),r.n_,5*u.iI,1.25*u.iI,1.25*u.iI,5*u.iI,(function(n){return!n.backgroundColor&&"\n    background-color: ".concat((n.theme.background||i.Z.background).chartBlock,";\n  ")}),(function(n){return n.backgroundColor&&"\n    background-color: ".concat(n.backgroundColor,";\n  ")})),j=o.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-8sk2qr-7"})(["margin-left:","px;"],s),C=o.default.div.withConfig({displayName:"indexstyle__SubheaderStyle",componentId:"sc-8sk2qr-8"})(["padding:","px;",""],u.cd*u.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((n.theme.borders||i.Z.borders).light,";\n  ")})),O=o.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-8sk2qr-9"})(["display:flex;flex-wrap:wrap;padding:","px;"],.75*u.iI),Z=o.default.div.withConfig({displayName:"indexstyle__CardStyle",componentId:"sc-8sk2qr-10"})(["border-radius:","px;margin:","px;padding:","px;width:","px;&:hover{cursor:pointer;}",""],r.n_,.75*u.iI,2.5*u.iI,50*u.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).panel,";\n    border: 1px solid ").concat((n.theme.background||i.Z.background).chartBlock,";\n    box-shadow: ").concat((n.theme.shadow||i.Z.shadow).frame,";\n  ")})),_=o.default.div.withConfig({displayName:"indexstyle__CardTitleStyle",componentId:"sc-8sk2qr-11"})(["height:","px;"],2.5*u.iI),E=o.default.div.withConfig({displayName:"indexstyle__CardDescriptionStyle",componentId:"sc-8sk2qr-12"})(["height:","px;margin-top:","px;"],2.5*u.iI*2,1*u.iI),k=o.default.div.withConfig({displayName:"indexstyle__TagsStyle",componentId:"sc-8sk2qr-13"})(["height:","px;margin-top:","px;overflow:hidden;"],3.5*u.iI,.5*u.iI),y=o.default.div.withConfig({displayName:"indexstyle__BreadcrumbsStyle",componentId:"sc-8sk2qr-14"})(["padding-bottom:","px;padding-top:","px;",""],1*u.iI,1*u.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).panel,";\n    border-bottom: 1px solid ").concat((n.theme.borders||i.Z.borders).light,";\n  ")}))},88328:function(n,e,t){t.d(e,{Z:function(){return L}});var o=t(82394),i=t(75582),r=t(12691),l=t.n(r),u=t(21764),c=t(82684),a=t(69864),d=t(34376),s=t(71180),f=t(90299),p=t(44898),m=t(24138),v=t(97618),h=t(55485),b=t(48670),g=t(38276),x=t(30160),j=t(35576),C=t(17488),O=t(62547),Z=t(35686),_=t(94777),E=t(98464),k=t(46684),y={uuid:"Define"},T={uuid:"Document"},S=[y,T],I=t(70515),P=t(11302),A=t(68899),R=t(72619),w=t(23780),D=t(19183),N=t(28598);function M(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function B(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?M(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var L=function(n){var e=n.defaultTab,t=n.onMutateSuccess,o=n.pipelineUUID,r=n.template,M=n.templateAttributes,L=n.templateUUID,U=(0,D.i)().height,F=(k.Mz,(0,d.useRouter)()),G=(0,w.VI)(null,{},[],{uuid:"CustomTemplates/PipelineTemplateDetail"}),H=(0,i.Z)(G,1)[0],Q=(0,c.useState)(!1),K=Q[0],z=Q[1],q=(0,c.useState)(!1),W=q[0],Y=q[1],V=(0,c.useState)(M),X=V[0],J=V[1],$=(0,c.useCallback)((function(n){Y(!0),J(n)}),[]),nn=(0,E.Z)(r);(0,c.useEffect)((function(){(null===nn||void 0===nn?void 0:nn.template_uuid)!==(null===r||void 0===r?void 0:r.template_uuid)&&J(r)}),[r,nn]);var en=Z.ZP.pipelines.detail(o).data,tn=(0,c.useMemo)((function(){return(null===r||void 0===r?void 0:r.pipeline)||(null===en||void 0===en?void 0:en.pipeline)}),[en,r]),on=(0,c.useMemo)((function(){return(null===tn||void 0===tn?void 0:tn.blocks)||[]}),[tn]),rn=(0,c.useMemo)((function(){return!r&&!L}),[r,L]),ln=(0,c.useState)(e?S.find((function(n){return n.uuid===(null===e||void 0===e?void 0:e.uuid)})):S[0]),un=ln[0],cn=ln[1],an=(0,c.useMemo)((function(){return!!rn&&!(null!==X&&void 0!==X&&X.template_uuid)}),[rn,X]),dn=(0,c.useState)(!1),sn=dn[0],fn=dn[1],pn=(0,c.useState)(rn?400:300),mn=pn[0],vn=pn[1],hn=(0,a.Db)(Z.ZP.custom_templates.useCreate(),{onSuccess:function(n){return(0,R.wD)(n,{callback:function(n){var e=n.custom_template;t&&(null===t||void 0===t||t()),z(!0),setTimeout((function(){F.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===e||void 0===e?void 0:e.template_uuid),"?object_type=").concat(p.R))}),1)},onErrorCallback:function(n,e){return H({errors:e,response:n})}})}}),bn=(0,i.Z)(hn,2),gn=bn[0],xn=bn[1].isLoading,jn=(0,a.Db)(Z.ZP.custom_templates.useUpdate(r?encodeURIComponent(null===r||void 0===r?void 0:r.template_uuid):L&&encodeURIComponent(L),{object_type:p.R}),{onSuccess:function(n){return(0,R.wD)(n,{callback:function(n){var e=n.custom_template;t&&(null===t||void 0===t||t()),null!==r&&void 0!==r&&r.template_uuid&&(null===e||void 0===e?void 0:e.template_uuid)!==(null===r||void 0===r?void 0:r.template_uuid)||L&&(null===e||void 0===e?void 0:e.template_uuid)!==L?F.replace("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===e||void 0===e?void 0:e.template_uuid),"?object_type=").concat(p.R)):(J(e),Y(!1),u.Am.success("Template successfully saved.",{position:u.Am.POSITION.BOTTOM_RIGHT,toastId:"custom_pipeline_template"}))},onErrorCallback:function(n,e){return H({errors:e,response:n})}})}}),Cn=(0,i.Z)(jn,2),On=Cn[0],Zn=Cn[1].isLoading,_n=(0,c.useCallback)((function(){var n={custom_template:B(B({},X),{},{object_type:p.R})};rn?gn(B(B({},n),{},{custom_template:B(B({},null===n||void 0===n?void 0:n.custom_template),{},{pipeline_uuid:o})})):On(n)}),[gn,rn,o,X,On]),En=(0,c.useMemo)((function(){return(0,N.jsxs)(h.ZP,{flexDirection:"column",fullHeight:!0,children:[(0,N.jsx)(P.Yf,{children:(0,N.jsx)(f.Z,{noPadding:!0,onClickTab:function(n){cn(n)},selectedTabUUID:null===un||void 0===un?void 0:un.uuid,tabs:S})}),(0,N.jsxs)(v.Z,{flexDirection:"column",children:[y.uuid===(null===un||void 0===un?void 0:un.uuid)&&(0,N.jsxs)(N.Fragment,{children:[o&&(0,N.jsx)(g.Z,{mt:I.cd,px:I.cd,children:(0,N.jsxs)(x.ZP,{default:!0,children:["This pipeline template will be based off the pipeline ",(0,N.jsx)(l(),{as:"/pipelines/".concat(o),href:"/pipelines/[pipeline]",passHref:!0,children:(0,N.jsx)(b.Z,{bold:!0,default:!0,inline:!0,monospace:!0,openNewWindow:!0,children:o})}),"."]})}),(0,N.jsxs)(g.Z,{mt:I.cd,px:I.cd,children:[(0,N.jsxs)(g.Z,{mb:1,children:[(0,N.jsx)(x.ZP,{bold:!0,children:"Template UUID"}),(0,N.jsx)(x.ZP,{muted:!0,small:!0,children:"Unique identifier for custom template. The UUID will also determine where the custom template file is stored in the project. You can use nested folder names in the template\u2019s UUID."})]}),(0,N.jsx)(C.Z,{monospace:!0,onChange:function(n){return $((function(e){return B(B({},e),{},{template_uuid:n.target.value})}))},placeholder:"e.g. some_template_name",primary:!0,setContentOnMount:!0,value:(null===X||void 0===X?void 0:X.template_uuid)||""})]})]}),T.uuid===(null===un||void 0===un?void 0:un.uuid)&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(g.Z,{mt:I.cd,px:I.cd,children:[(0,N.jsxs)(g.Z,{mb:1,children:[(0,N.jsx)(x.ZP,{bold:!0,children:"Name"}),(0,N.jsx)(x.ZP,{muted:!0,small:!0,children:"A human readable name for your template."})]}),(0,N.jsx)(C.Z,{onChange:function(n){return $((function(e){return B(B({},e),{},{name:n.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===X||void 0===X?void 0:X.name)||""})]}),(0,N.jsx)(g.Z,{mt:I.cd,px:I.cd,children:(0,N.jsx)(j.Z,{label:"Description",onChange:function(n){return $((function(e){return B(B({},e),{},{description:n.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===X||void 0===X?void 0:X.description)||""})})]})]}),(0,N.jsx)(P.ig,{children:(0,N.jsx)(g.Z,{p:I.cd,children:(0,N.jsx)(h.ZP,{children:(0,N.jsxs)(s.ZP,{disabled:an,fullWidth:!0,loading:xn||Zn,onClick:function(){return _n()},primary:!0,children:[!rn&&"Save template",rn&&"Create new template"]})})})})]})}),[an,xn,Zn,rn,o,_n,null===un||void 0===un?void 0:un.uuid,$,X]),kn=(0,_.Z)({shouldWarn:!K&&W,warningMessage:"You have unsaved changes. Are you sure you want to leave?"}).ConfirmLeaveModal;return(0,N.jsxs)(O.Z,{before:En,beforeHidden:sn,beforeWidth:mn,leftOffset:A.k1,setBeforeHidden:fn,setBeforeWidth:vn,children:[(0,N.jsx)(kn,{}),(0,N.jsx)(m.ZP,{blocks:on,height:U,heightOffset:k.Mz,noStatus:!0,pipeline:tn})]})}},11302:function(n,e,t){t.d(e,{Nk:function(){return c},Yf:function(){return d},bC:function(){return a},ig:function(){return s},w5:function(){return f}});var o=t(38626),i=t(44897),r=t(70515),l=t(84649),u=(r.iI,40*r.iI),c=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-axgvn9-0"})(["height:100%;position:relative;"]),a=o.default.div.withConfig({displayName:"indexstyle__NavigationStyle",componentId:"sc-axgvn9-1"})(["overflow:auto;position:fixed;width:","px;z-index:1;"," "," ",""],u,(function(n){return"\n    background-color: ".concat((n.theme.background||i.Z.background).panel,";\n    border-right: 1px solid ").concat((n.theme.borders||i.Z.borders).light,";\n  ")}),(function(n){return n.height&&"\n    height: ".concat(n.height-l.n5,"px;\n  ")}),(function(n){return!n.height&&"\n    height: 100%;\n  "})),d=o.default.div.withConfig({displayName:"indexstyle__TabsStyle",componentId:"sc-axgvn9-2"})(["padding-bottom:","px;padding-left:","px;padding-right:","px;padding-top:","px;width:100%;",""],1*r.iI,r.cd*r.iI,r.cd*r.iI,1*r.iI,(function(n){return"\n    border-bottom: 1px solid ".concat((n.theme.borders||i.Z.borders).light,";\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__ButtonsStyle",componentId:"sc-axgvn9-3"})(["margin-top:","px;width:100%;",""],r.cd*r.iI,(function(n){return"\n    border-top: 1px solid ".concat((n.theme.borders||i.Z.borders).light,";\n  ")})),f=o.default.div.withConfig({displayName:"indexstyle__ContentStyle",componentId:"sc-axgvn9-4"})(["margin-left:","px;"],u)},5755:function(n,e,t){t.d(e,{Z:function(){return z}});var o=t(82394),i=t(75582),r=t(56085),l=t(82684),u=t(65701),c=t(1254),a=t(21764),d=t(69864),s=t(34376),f=t(40761),p=t(71180),m=t(90299),v=t(68013),h=t(44898),b=t(97618),g=t(55485),x=t(38276),j=t(44085),C=t(30160),O=t(35576),Z=t(17488),_=t(35686),E=t(94777),k=t(98464),y=t(44425),T=t(11302),S=t(48339),I=t(39643),P={uuid:"Define"},A={uuid:"Document"},R=[P,A],w=t(11498),D=t(70515),N=t(57653),M=t(4383),B=t(72619),L=t(42041),U=t(23780),F=t(44688),G=t(19183),H=t(28598);function Q(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function K(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var z=function(n){var e=n.contained,t=n.defaultTab,Q=n.heightOffset,z=n.onCancel,q=n.onCreateCustomTemplate,W=n.onMutateSuccess,Y=n.template,V=n.templateAttributes,X=n.templateUUID,J=(0,G.i)().height,$=(0,s.useRouter)(),nn=(0,U.VI)(null,{},[],{uuid:"CustomTemplates/TemplateDetail"}),en=(0,i.Z)(nn,1)[0],tn=(0,l.useState)(Number(new Date)),on=tn[0],rn=tn[1],ln=(0,l.useState)(!1),un=ln[0],cn=ln[1],an=(0,l.useState)(!1),dn=an[0],sn=an[1],fn=(0,l.useState)(t?R.find((function(n){return n.uuid===(null===t||void 0===t?void 0:t.uuid)})):R[0]),pn=fn[0],mn=fn[1],vn=(0,l.useState)(!1),hn=vn[0],bn=vn[1],gn=(0,l.useState)(V),xn=gn[0],jn=gn[1],Cn=(0,l.useCallback)((function(n){bn(!0),jn(n)}),[]),On=_.ZP.custom_templates.detail(!Y&&X&&encodeURIComponent(X),{object_type:h.Z}).data,Zn=(0,l.useMemo)((function(){return Y||(null===On||void 0===On?void 0:On.custom_template)}),[On,Y]),_n=(0,k.Z)(Zn);(0,l.useEffect)((function(){(null===_n||void 0===_n?void 0:_n.template_uuid)!==(null===Zn||void 0===Zn?void 0:Zn.template_uuid)&&(rn(Number(new Date)),jn(Zn),sn(!0))}),[Zn,_n]);var En=(0,d.Db)(_.ZP.custom_templates.useCreate(),{onSuccess:function(n){return(0,B.wD)(n,{callback:function(n){var e=n.custom_template;W&&(null===W||void 0===W||W()),q?null===q||void 0===q||q(e):(cn(!0),setTimeout((function(){$.push("/templates/[...slug]","/templates/".concat(encodeURIComponent(null===e||void 0===e?void 0:e.template_uuid)))}),1))},onErrorCallback:function(n,e){return en({errors:e,response:n})}})}}),kn=(0,i.Z)(En,2),yn=kn[0],Tn=kn[1].isLoading,Sn=(0,d.Db)(_.ZP.custom_templates.useUpdate(Y?encodeURIComponent(null===Y||void 0===Y?void 0:Y.template_uuid):X&&encodeURIComponent(X),{object_type:h.Z}),{onSuccess:function(n){return(0,B.wD)(n,{callback:function(n){var e=n.custom_template;W&&(null===W||void 0===W||W()),jn(e),bn(!1),a.Am.success("Template successfully saved.",{position:a.Am.POSITION.BOTTOM_RIGHT,toastId:"custom_block_template"})},onErrorCallback:function(n,e){return en({errors:e,response:n})}})}}),In=(0,i.Z)(Sn,2),Pn=In[0],An=In[1].isLoading,Rn=(0,l.useMemo)((function(){return y.tf.MARKDOWN===(null===xn||void 0===xn?void 0:xn.block_type)}),[null===xn||void 0===xn?void 0:xn.block_type]),wn=!Y&&!X,Dn=(0,l.useMemo)((function(){return!!wn&&(!(null!==xn&&void 0!==xn&&xn.template_uuid)||!(null!==xn&&void 0!==xn&&xn.block_type)||!Rn&&!(null!==xn&&void 0!==xn&&xn.language))}),[Rn,wn,xn]),Nn=_.ZP.kernels.list({},{refreshInterval:5e3,revalidateOnFocus:!0}),Mn=Nn.data,Bn=Nn.mutate,Ln=null===Mn||void 0===Mn?void 0:Mn.kernels,Un=(null===Ln||void 0===Ln?void 0:Ln.find((function(n){return n.name===N.a_[N.qL.PYTHON]})))||(null===Ln||void 0===Ln?void 0:Ln[0]),Fn=(0,d.Db)(_.ZP.kernels.useUpdate(null===Un||void 0===Un?void 0:Un.id),{onSuccess:function(n){return(0,B.wD)(n,{callback:function(){return Bn()},onErrorCallback:function(n,e){return en({errors:e,response:n})}})}}),Gn=(0,i.Z)(Fn,1)[0],Hn=(0,l.useCallback)((function(){Gn({kernel:{action_type:"interrupt"}}),Yn([])}),[Gn]),Qn=(0,l.useState)({}),Kn=Qn[0],zn=Qn[1],qn=(0,l.useState)([]),Wn=qn[0],Yn=qn[1],Vn=(0,l.useMemo)((function(){return{language:null===xn||void 0===xn?void 0:xn.language,name:null===xn||void 0===xn?void 0:xn.name,type:null===xn||void 0===xn?void 0:xn.block_type,uuid:null===xn||void 0===xn?void 0:xn.template_uuid}}),[xn]),Xn=(0,l.useMemo)((function(){return new f.Z}),[]),Jn=(0,l.useMemo)((function(){return{api_key:w.lG,token:Xn.decodedToken.token}}),[Xn]),$n=(0,r.ZP)((0,M.Ib)(),{onClose:function(){return console.log("socketUrlPublish closed")},onMessage:function(n){if(n){var e=JSON.parse(n.data),t=e.execution_state,i=e.uuid;if(!i)return;zn((function(n){var t=n[i]||[];return K(K({},n),{},(0,o.Z)({},i,t.concat(e)))})),S.uF.BUSY===t?Yn((function(n){return n.find((function(n){var e=n.uuid;return i===e}))||!Vn?n:n.concat(Vn)})):S.uF.IDLE===t&&Yn((function(n){return n.filter((function(n){var e=n.uuid;return i!==e}))}))}},onOpen:function(){return console.log("socketUrlPublish opened")},reconnectAttempts:10,reconnectInterval:3e3,shouldReconnect:function(){return console.log("Attempting to reconnect..."),!0}}).sendMessage,ne=(0,l.useCallback)((function(n){var e=n.block,t=n.code,o=n.ignoreAlreadyRunning,i=n.runDownstream,r=void 0!==i&&i,l=n.runIncompleteUpstream,u=void 0!==l&&l,c=n.runSettings,a=void 0===c?{}:c,d=n.runTests,s=void 0!==d&&d,f=n.runUpstream,p=e.extension_uuid,m=e.upstream_blocks,v=e.uuid;Wn.find((function(n){var e=n.uuid;return v===e}))&&!o||($n(JSON.stringify(K(K({},Jn),{},{code:t,extension_uuid:p,run_downstream:r,run_incomplete_upstream:u,run_settings:a,run_tests:s,run_upstream:f,type:e.type,upstream_blocks:m,uuid:v}))),zn((function(n){return delete n[v],n})),Yn((function(n){return n.find((function(n){var e=n.uuid;return v===e}))?n:n.concat(e)})))}),[Wn,$n,zn,Yn,Jn]),ee=(0,l.useMemo)((function(){return Wn.reduce((function(n,e,t){return K(K({},n),{},(0,o.Z)({},e.uuid,K(K({},e),{},{priority:t})))}),{})}),[Wn]),te=(0,l.useMemo)((function(){if(!dn)return(0,H.jsx)("div",{});var n=ee[null===Vn||void 0===Vn?void 0:Vn.uuid],e=n?0===n.priority?S.uF.BUSY:S.uF.QUEUED:S.uF.IDLE;return(0,H.jsx)(v.Z,{block:Vn,defaultValue:null===xn||void 0===xn?void 0:xn.content,disableDrag:!0,executionState:e,hideExtraCommandButtons:!0,hideExtraConfiguration:!0,hideHeaderInteractiveInformation:!0,interruptKernel:Hn,messages:null===Kn||void 0===Kn?void 0:Kn[null===Vn||void 0===Vn?void 0:Vn.uuid],noDivider:!0,onChange:function(n){return Cn((function(e){return K(K({},e),{},{content:n})}))},runBlock:ne,runningBlocks:Wn,selected:!0,setErrors:en,textareaFocused:!0},String(on))}),[Vn,on,Hn,Kn,dn,ne,Wn,ee,Cn,en,xn]),oe=(0,l.useCallback)((function(){var n={custom_template:K(K({},xn),{},{language:Rn?y.t6.MARKDOWN:null===xn||void 0===xn?void 0:xn.language,object_type:h.Z})};wn?yn(n):Pn(n)}),[yn,Rn,wn,xn,Pn]),ie="CustomTemplates/TemplateDetail",re=(0,F.y)(),le=re.registerOnKeyDown,ue=re.unregisterOnKeyDown;(0,l.useEffect)((function(){return function(){ue(ie)}}),[ue,ie]),le(ie,(function(n,e){if(hn&&(0,L.y)([I.zX,I.hS],e)){n.preventDefault();"undefined"!==typeof location&&window.confirm("You have changes that are unsaved. Click cancel and save your changes before reloading page.")&&location.reload()}else((0,L.y)([I.zX,I.Um],e)||(0,L.y)([I.PQ,I.Um],e))&&(n.preventDefault(),oe())}),[oe,hn]);var ce=(0,l.useMemo)((function(){return J-Q}),[J,Q]),ae=(0,E.Z)({shouldWarn:!un&&hn,warningMessage:"You have unsaved changes. Are you sure you want to leave?"}).ConfirmLeaveModal;return(0,H.jsxs)(T.Nk,{children:[(0,H.jsx)(ae,{}),(0,H.jsx)(T.bC,{height:e?ce:null,children:(0,H.jsxs)(g.ZP,{flexDirection:"column",fullHeight:!0,children:[(0,H.jsx)(T.Yf,{children:(0,H.jsx)(m.Z,{noPadding:!0,onClickTab:function(n){mn(n)},selectedTabUUID:null===pn||void 0===pn?void 0:pn.uuid,tabs:wn?R.slice(0,1):R})}),(0,H.jsxs)(b.Z,{flexDirection:"column",children:[P.uuid===(null===pn||void 0===pn?void 0:pn.uuid)&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(x.Z,{mt:D.cd,px:D.cd,children:[(0,H.jsxs)(x.Z,{mb:1,children:[(0,H.jsx)(C.ZP,{bold:!0,children:"Template UUID"}),(0,H.jsx)(C.ZP,{muted:!0,small:!0,children:"Unique identifier for custom template. The UUID will also determine where the custom template file is stored in the project. You can use nested folder names in the template\u2019s UUID."})]}),(0,H.jsx)(Z.Z,{monospace:!0,onChange:function(n){return Cn((function(e){return K(K({},e),{},{template_uuid:n.target.value})}))},placeholder:"e.g. some_template_name",primary:!0,setContentOnMount:!0,value:(null===xn||void 0===xn?void 0:xn.template_uuid)||""})]}),(0,H.jsx)(x.Z,{mt:D.cd,px:D.cd,children:(0,H.jsx)(j.Z,{label:"Block type",onChange:function(n){return Cn((function(e){return K(K({},e),{},{block_type:n.target.value,language:y.tf.MARKDOWN===n.target.value?y.t6.MARKDOWN:null===e||void 0===e?void 0:e.language})}))},primary:!0,value:(null===xn||void 0===xn?void 0:xn.block_type)||"",children:Object.values(y.tf).map((function(n){return(0,H.jsx)("option",{value:n,children:y.V4[n]},n)}))})}),!Rn&&(0,H.jsx)(x.Z,{mt:D.cd,px:D.cd,children:(0,H.jsx)(j.Z,{label:"Language",onChange:function(n){return Cn((function(e){return K(K({},e),{},{language:n.target.value})}))},primary:!0,value:(null===xn||void 0===xn?void 0:xn.language)||"",children:Object.values(y.t6).map((function(n){return(0,H.jsx)("option",{value:n,children:y.LE[n]},n)}))})})]}),A.uuid===(null===pn||void 0===pn?void 0:pn.uuid)&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(x.Z,{mt:D.cd,px:D.cd,children:[(0,H.jsxs)(x.Z,{mb:1,children:[(0,H.jsx)(C.ZP,{bold:!0,children:"Name"}),(0,H.jsx)(C.ZP,{muted:!0,small:!0,children:"A human readable name for your template."})]}),(0,H.jsx)(Z.Z,{onChange:function(n){return Cn((function(e){return K(K({},e),{},{name:n.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===xn||void 0===xn?void 0:xn.name)||""})]}),(0,H.jsx)(x.Z,{mt:D.cd,px:D.cd,children:(0,H.jsx)(O.Z,{label:"Description",onChange:function(n){return Cn((function(e){return K(K({},e),{},{description:n.target.value})}))},primary:!0,setContentOnMount:!0,value:(null===xn||void 0===xn?void 0:xn.description)||""})})]})]}),(0,H.jsx)(T.ig,{children:(0,H.jsx)(x.Z,{p:D.cd,children:(0,H.jsxs)(g.ZP,{children:[(0,H.jsxs)(p.ZP,{disabled:Dn,fullWidth:!0,loading:Tn||An,onClick:function(){return oe()},primary:!0,children:[!wn&&"Save template",wn&&"Create new template"]}),z&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(x.Z,{mr:1}),(0,H.jsx)(p.ZP,{onClick:z,secondary:!0,children:"Cancel"})]})]})})})]})}),(0,H.jsx)(T.w5,{children:(0,H.jsx)(x.Z,{p:D.cd,children:(0,H.jsx)(u.W,{backend:c.PD,children:te})})})]})}},99236:function(n,e,t){var o=t(55485),i=t(75499),r=t(30160),l=t(72473),u=t(55283),c=t(28598);e.Z=function(n){var e=n.inputsBlocks;return(0,c.jsx)(i.Z,{columnFlex:[null,1,null,1,null],columns:[{uuid:"Position"},{uuid:"Block"},{center:!0,uuid:"Catalog"},{center:!0,uuid:"Streams"},{rightAligned:!0,uuid:"Argument shape"}],rows:null===e||void 0===e?void 0:e.map((function(n,e){var t=n.block,i=t.color,a=t.type,d=t.uuid,s=n.input,f=s.catalog,p=s.streams,m=(null===p||void 0===p?void 0:p.length)>=1,v=(0,u.qn)(a,{blockColor:i}).accent;return[(0,c.jsx)(r.ZP,{default:!0,monospace:!0,children:e},"position-".concat(d)),(0,c.jsx)(r.ZP,{color:v,monospace:!0,children:d},"block-".concat(d)),(0,c.jsx)(o.ZP,{justifyContent:"center",children:f?(0,c.jsx)(l.Jr,{success:!0}):(0,c.jsx)(l.x8,{muted:!0})},"catalog-".concat(d)),(0,c.jsxs)(o.ZP,{justifyContent:"center",children:[!m&&(0,c.jsx)(l.x8,{muted:!0},"catalog-".concat(d)),m&&null!==p&&void 0!==p&&p.includes(d)?(0,c.jsx)(l.Jr,{success:!0}):(0,c.jsx)(r.ZP,{center:!0,default:!0,monospace:!0,small:!0,children:null===p||void 0===p?void 0:p.join(", ")})]},"selected-streams-".concat(d)),(0,c.jsxs)(r.ZP,{default:!0,monospace:!0,rightAligned:!0,children:[f&&!m&&"Dict",!f&&m&&"Union[Dict, pd.DataFrame]",f&&m&&"Tuple[Union[Dict, pd.DataFrame], Dict]"]},"shape-".concat(d))]}))})}},37443:function(n,e,t){t.d(e,{C0:function(){return m},Pf:function(){return f},TD:function(){return s},mU:function(){return d},oI:function(){return l},tw:function(){return a},uK:function(){return u}});var o,i,r,l,u,c=t(82394);!function(n){n.CHECKBOX="checkbox",n.CUSTOM="custom",n.SELECT="select",n.TOGGLE="toggle"}(l||(l={})),function(n){n.CONFIGURATION="configuration",n.OVERVIEW="overview",n.STREAMS="streams",n.SYNC="sync"}(u||(u={}));var a,d=(o={},(0,c.Z)(o,u.CONFIGURATION,u.CONFIGURATION),(0,c.Z)(o,u.OVERVIEW,u.OVERVIEW),(0,c.Z)(o,u.STREAMS,u.STREAMS),(0,c.Z)(o,u.SYNC,u.SYNC),o),s=(i={},(0,c.Z)(i,u.CONFIGURATION,"Configuration"),(0,c.Z)(i,u.OVERVIEW,"Overview"),(0,c.Z)(i,u.STREAMS,"Streams"),(0,c.Z)(i,u.SYNC,"Sync"),i);!function(n){n.BOOKMARKS="bookmarks",n.CREDENTIALS="credentials",n.OVERVIEW="overview",n.SAMPLE_DATA="sample_data",n.SETTINGS="settings",n.STREAM_CONFLICTS="stream_conflicts",n.UPSTREAM_BLOCK_SETTINGS="upstream_block_settings"}(a||(a={}));var f=(r={},(0,c.Z)(r,u.CONFIGURATION,[{label:function(){return"Credentials"},uuid:a.CREDENTIALS},{label:function(){return"Upstream block settings"},uuid:a.UPSTREAM_BLOCK_SETTINGS}]),(0,c.Z)(r,u.SYNC,[{label:function(){return"Bookmarks"},uuid:a.BOOKMARKS}]),(0,c.Z)(r,u.STREAMS,[]),(0,c.Z)(r,u.OVERVIEW,[]),r),p={label:function(){return"Schema property conflicts"},uuid:a.STREAM_CONFLICTS};function m(n){var e=[{label:function(){return"Overview"},uuid:a.OVERVIEW},{label:function(){return"Schema properties"},uuid:a.SETTINGS}];return null!==n&&void 0!==n&&n.addStreamConflicts&&e.push(p),e.push({label:function(){return"Sample data"},uuid:a.SAMPLE_DATA}),e}},75634:function(n,e,t){t.d(e,{W4:function(){return s},Wx:function(){return d},ZG:function(){return a}});var o=t(38626),i=t(44897),r=t(44425),l=t(42631),u=t(70515),c=t(55283),a=u.cd*u.iI,d=o.default.div.withConfig({displayName:"indexstyle__IconContainerStyle",componentId:"sc-oyfjzc-0"})(["align-items:center;border-radius:","px;border:1px solid transparent;display:flex;justify-content:center;"," "," "," "," "," "," "," "," "," ",""],l.BG,(function(n){return n.border&&"\n    border: 1px dotted ".concat((n.theme.content||i.Z.content).active,";\n  ")}),(function(n){return n.grey&&"\n    background-color: ".concat((0,c.qn)(r.tf.SCRATCHPAD,n).accent,";\n  ")}),(function(n){return n.blue&&"\n    background-color: ".concat((0,c.qn)(r.tf.DATA_LOADER,n).accent,";\n  ")}),(function(n){return n.purple&&"\n    background-color: ".concat((0,c.qn)(r.tf.TRANSFORMER,n).accent,";\n  ")}),(function(n){return n.sky&&"\n    background-color: ".concat((0,c.qn)(r.tf.MARKDOWN,n).accent,";\n  ")}),(function(n){return n.teal&&"\n    background-color: ".concat((0,c.qn)(r.tf.EXTENSION,n).accent,";\n  ")}),(function(n){return n.rose&&"\n    background-color: ".concat((0,c.qn)(r.tf.CALLBACK,n).accent,";\n  ")}),(function(n){return n.yellow&&"\n    background-color: ".concat((0,c.qn)(r.tf.DATA_EXPORTER,n).accent,";\n  ")}),(function(n){return!n.compact&&"\n    height: ".concat(a+u.iI/2,"px;\n    width: ").concat(a+u.iI/2,"px;\n  ")}),(function(n){return n.compact&&"\n    height: ".concat(a/2+u.iI,"px;\n    width: ").concat(a/2+u.iI,"px;\n  ")})),s=o.default.div.withConfig({displayName:"indexstyle__ButtonWrapper",componentId:"sc-oyfjzc-1"})(["position:relative;margin-bottom:","px;margin-right:","px;",""],u.iI,u.iI,(function(n){return n.increasedZIndex&&"\n    z-index: 3;\n  "}))},88014:function(n,e,t){t.d(e,{Z:function(){return Sn}});var o=t(82394),i=t(21831),r=t(82684),l=t(75582),u=t(69864),c=t(27277),a=t(2548),d=t(71180),s=t(46732),f=t(28598);var p=function(n){var e=n.fill,t=void 0===e?"white":e,o=n.size;return(0,f.jsxs)("svg",{fill:"none",height:o,viewBox:"0 0 20 21",width:o,xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("g",{clipPath:"url(#clip0_11802_82284)",children:(0,f.jsx)("path",{clipRule:"evenodd",d:"M10 20.0024C15.5228 20.0024 20 15.5253 20 10.0024C20 4.47959 15.5228 0.00244141 10 0.00244141C4.47715 0.00244141 0 4.47959 0 10.0024C0 15.5253 4.47715 20.0024 10 20.0024ZM10 18.5024C11.5782 18.5024 13.0559 18.0723 14.3224 17.323C14.3144 17.3061 14.307 17.2888 14.3002 17.2712L11.5045 10.0024H8.49587L5.70021 17.2712C5.69339 17.2889 5.68596 17.3062 5.67796 17.3231C6.94434 18.0724 8.42195 18.5024 10 18.5024ZM11.6336 6.15938L15.5784 16.416C17.3685 14.8577 18.5 12.5622 18.5 10.0024C18.5 5.30802 14.6944 1.50244 10 1.50244C5.30558 1.50244 1.5 5.30802 1.5 10.0024C1.5 12.5623 2.63162 14.8579 4.4219 16.4163L8.36685 6.15939C8.94212 4.66367 11.0583 4.66367 11.6336 6.15938Z",fill:t,fillRule:"evenodd"})}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_11802_82284",children:(0,f.jsx)("rect",{fill:t,height:"20",transform:"translate(0 0.00244141)",width:"20"})})})]})},m=t(91835),v=t(45373),h=t(63403),b=t(72473);function g(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function x(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?g(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var j=function(n){var e=(0,m.Z)({},n),t=(null===e||void 0===e?void 0:e.size)||h.C,o=(0,b.J_)([{clipRule:"evenodd",d:"M15.4697 1.47202C16.3149 0.62684 17.6852 0.62684 18.5304 1.47202C19.3756 2.3172 19.3756 3.6875 18.5304 4.53268L10.7445 12.3186C10.5002 12.5629 10.1891 12.7294 9.85027 12.7972L9.11804 12.9436C7.89353 13.1885 6.81392 12.1089 7.05882 10.8844L7.20527 10.1522C7.27302 9.81337 7.43954 9.50222 7.68384 9.25792L15.4697 1.47202ZM17.4697 2.53268C17.2104 2.27329 16.7898 2.27329 16.5304 2.53268L14.7522 4.31085L15.6916 5.25019L17.4697 3.47202C17.7291 3.21263 17.7291 2.79207 17.4697 2.53268ZM14.6309 6.31085L13.6916 5.37151L8.7445 10.3186C8.7096 10.3535 8.68582 10.3979 8.67614 10.4463L8.52969 11.1786C8.4947 11.3535 8.64893 11.5077 8.82386 11.4727L9.5561 11.3263C9.60449 11.3166 9.64894 11.2928 9.68384 11.2579L14.6309 6.31085Z",fillRule:"evenodd"},{clipRule:"evenodd",d:"M2.12221 16.4212C1.89178 16.7635 1.42775 16.8555 1.08405 16.6264C0.739408 16.3966 0.646278 15.931 0.876042 15.5863L1.50008 16.0023C0.876042 15.5863 0.87632 15.5859 0.876609 15.5855L0.877248 15.5845L0.878742 15.5823L0.882593 15.5766L0.893746 15.5605C0.902714 15.5476 0.914758 15.5306 0.929868 15.51C0.96007 15.4687 1.00264 15.4126 1.05749 15.345C1.16699 15.2102 1.32669 15.0283 1.53609 14.8278C1.95274 14.4289 2.58034 13.9427 3.41428 13.6164C5.14688 12.9384 7.5533 13.0314 10.475 15.4219C13.0533 17.5314 14.8969 17.4384 16.0393 16.9914C16.6428 16.7552 17.109 16.3976 17.4267 16.0934C17.5845 15.9424 17.7021 15.8078 17.7782 15.7142C17.8161 15.6675 17.8434 15.6313 17.8598 15.6089C17.868 15.5977 17.8735 15.5899 17.8762 15.586C17.8769 15.585 17.8774 15.5843 17.8777 15.5838L17.877 15.5849C18.1069 15.2409 18.5717 15.1487 18.9161 15.3783C19.2608 15.6081 19.3539 16.0737 19.1241 16.4184L18.5001 16.0023C19.1241 16.4184 19.1238 16.4188 19.1236 16.4192L19.1229 16.4202L19.1214 16.4224L19.1176 16.4281L19.1064 16.4442C19.0974 16.4571 19.0854 16.4741 19.0703 16.4947C19.0401 16.536 18.9975 16.5921 18.9427 16.6597C18.8332 16.7945 18.6735 16.9764 18.4641 17.1769C18.0474 17.5758 17.4198 18.062 16.5859 18.3883C14.8533 19.0663 12.4469 18.9733 9.52515 16.5828C6.94686 14.4733 5.10328 14.5663 3.96088 15.0133C3.35732 15.2495 2.89117 15.6071 2.57345 15.9113C2.41566 16.0623 2.29802 16.1969 2.22197 16.2905C2.18405 16.3372 2.15679 16.3734 2.14036 16.3958C2.13215 16.407 2.12668 16.4148 2.12396 16.4187C2.12332 16.4196 2.12254 16.4207 2.12221 16.4212ZM2.12221 16.4212C2.1222 16.4212 2.12221 16.4212 2.12221 16.4212V16.4212Z",fillRule:"evenodd"}],{viewBox:"0 0 20 21"});return(0,f.jsxs)(v.ZP,x(x({},e),{},{size:t,viewBox:null,children:[(0,f.jsx)("g",{clipPath:"url(#clip0_11826_796)",id:"Type / Scratchpad",children:(0,f.jsx)("g",{id:"Vector",children:o(x(x({},e),{},{size:t}))})}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_11826_796",children:(0,f.jsx)("rect",{fill:"white",height:"20",transform:"translate(0 0.00244141)",width:"20"})})})]}))},C=t(38276),O=t(12468),Z=t(44425),_=t(32929),E="items_more",k="templates/list",y="templates/new",T=[Z.tf.CUSTOM,Z.tf.MARKDOWN],S=[Z.tf.DATA_LOADER,Z.tf.TRANSFORMER,Z.tf.DATA_EXPORTER,Z.tf.CUSTOM,Z.tf.DBT,Z.tf.SENSOR,Z.tf.GLOBAL_DATA_PRODUCT,Z.tf.MARKDOWN,k,y],I=t(38626),P=t(44897),A=t(42631),R=t(70515),w=t(47041),D=t(91437),N=R.cd*R.iI,M=I.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1mqygp5-0"})([""," border-radius:","px;"," "," "," "," ",""],(0,D.eR)(),A.n_,(function(n){return"\n    background-color: ".concat((n.theme.background||P.Z.background).dashboard,";\n    box-shadow: ").concat((n.theme.shadow||P.Z.shadow).frame,";\n  ")}),(function(n){return!n.focused&&"\n    border: 1px solid ".concat((n.theme.interactive||P.Z.interactive).defaultBorder,";\n  ")}),(function(n){return n.focused&&"\n    border: 1px solid ".concat((n.theme.interactive||P.Z.interactive).hoverBorder,";\n  ")}),(function(n){return!n.compact&&"\n    padding-left: ".concat(2.5*R.iI,"px;\n    padding-right: ").concat(2.5*R.iI,"px;\n  ")}),(function(n){return n.compact&&"\n    padding-left: ".concat(1.5*R.iI,"px;\n    padding-right: ").concat(1.5*R.iI,"px;\n  ")})),B=I.default.div.withConfig({displayName:"indexstyle__DividerStyle",componentId:"sc-1mqygp5-1"})(["height:","px;width:1px;",""],N,(function(n){return"\n    background-color: ".concat((n.theme.interactive||P.Z.interactive).defaultBorder,";\n  ")})),L=I.default.div.withConfig({displayName:"indexstyle__ButtonWrapper",componentId:"sc-1mqygp5-2"})(["position:relative;"," "," ",""],(function(n){return n.increasedZIndex&&"\n    z-index: 3;\n  "}),(function(n){return!n.compact&&"\n    margin-bottom: ".concat(2.5*R.iI,"px;\n    margin-top: ").concat(2.5*R.iI,"px;\n  ")}),(function(n){return n.compact&&"\n    margin-bottom: ".concat(1.5*R.iI,"px;\n    margin-top: ").concat(1.5*R.iI,"px;\n  ")})),U=I.default.div.withConfig({displayName:"indexstyle__TextInputFocusAreaStyle",componentId:"sc-1mqygp5-3"})(["width:100%;&:hover{cursor:text;}"," ",""],(function(n){return!n.compact&&"\n    height: ".concat(2.5*R.iI,"px;\n  ")}),(function(n){return n.compact&&"\n    height: ".concat(1.5*R.iI,"px;\n  ")})),F=I.default.div.withConfig({displayName:"indexstyle__SearchStyle",componentId:"sc-1mqygp5-4"})(["position:relative;width:100%;"]),G=I.default.div.withConfig({displayName:"indexstyle__DropdownStyle",componentId:"sc-1mqygp5-5"})([""," border-radius:","px;max-height:","px;overflow:auto;position:absolute;width:100%;z-index:1;"," ",""],w.w5,A.BG,40*R.iI,(function(n){return"\n    background-color: ".concat((n.theme.background||P.Z.background).popup,";\n    box-shadow: ").concat((n.theme.shadow||P.Z.shadow).popup,";\n  ")}),(function(n){return n.topOffset&&"\n    top: ".concat(n.topOffset,"px;\n  ")})),H=I.default.div.withConfig({displayName:"indexstyle__RowStyle",componentId:"sc-1mqygp5-6"})(["align-items:center;display:flex;justify-content:space-between;padding:","px ","px;position:relative;z-index:2;&:hover{cursor:pointer;}",""],1.5*R.iI,2.5*R.iI,(function(n){return n.highlighted&&"\n    background-color: ".concat((n.theme.interactive||P.Z.interactive).hoverBackground,";\n  ")})),Q=t(13803),K=t(81728),z=t(55283),q=t(38399),W=t(42122);function Y(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function V(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var X,J=function(n){var e=n.addNewBlock,t=n.blockIdx,i=n.blockTemplatesByBlockType,u=n.buttonMenuOpenIndex,c=n.closeButtonMenu,a=n.compact,m=n.design,v=n.itemsDBT,h=n.pipelineType,g=n.setAddNewBlockMenuOpenIdx,x=n.setButtonMenuOpenIndex,I=n.showBrowseTemplates,P=n.showGlobalDataProducts,A=[(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null)],R=(0,r.useCallback)((function(n){return null===g||void 0===g?void 0:g((function(e){return null===e||u!==n?t:null}))}),[t,u,g]),w=(0,r.useMemo)((function(){var n,t;return null===(n=(0,q.hr)(e,Z.tf.DATA_LOADER,h,{blockTemplatesByBlockType:i,v2:!0}))||void 0===n||null===(t=n.find((function(n){return n.uuid==="".concat(Z.tf.DATA_LOADER,"/").concat(Z.t6.PYTHON)})))||void 0===t?void 0:t.items}),[e,i,h]),D=(0,r.useMemo)((function(){var n,t;return null===(n=(0,q.hr)(e,Z.tf.DATA_LOADER,h,{blockTemplatesByBlockType:i,dataIntegrationType:Q.O.SOURCES,v2:!0}))||void 0===n||null===(t=n.find((function(n){return n.uuid==="".concat(Z.tf.DATA_LOADER,"/").concat(Q.O.SOURCES)})))||void 0===t?void 0:t.items}),[e,i,h]),M=(0,r.useMemo)((function(){var n,t;return null===(n=(0,q.hr)(e,Z.tf.DATA_EXPORTER,h,{blockTemplatesByBlockType:i,v2:!0}))||void 0===n||null===(t=n.find((function(n){return n.uuid==="".concat(Z.tf.DATA_EXPORTER,"/").concat(Z.t6.PYTHON)})))||void 0===t?void 0:t.items}),[e,i,h]),B=(0,r.useMemo)((function(){var n,t;return null===(n=(0,q.hr)(e,Z.tf.DATA_EXPORTER,h,{blockTemplatesByBlockType:i,dataIntegrationType:Q.O.DESTINATIONS,v2:!0}))||void 0===n||null===(t=n.find((function(n){return n.uuid==="".concat(Z.tf.DATA_EXPORTER,"/").concat(Q.O.DESTINATIONS)})))||void 0===t?void 0:t.items}),[e,i,h]),U=(0,r.useMemo)((function(){var n,t;return null===(n=(0,q.hr)(e,Z.tf.TRANSFORMER,h,{blockTemplatesByBlockType:i,v2:!0}))||void 0===n||null===(t=n.find((function(n){return n.uuid==="".concat(Z.tf.TRANSFORMER,"/").concat(Z.t6.PYTHON)})))||void 0===t?void 0:t.items}),[e,i,h]),F=(0,r.useMemo)((function(){var n,t;return null===(n=(0,q.hr)(e,Z.tf.SENSOR,h,{blockTemplatesByBlockType:i,v2:!0}))||void 0===n||null===(t=n.find((function(n){return n.uuid==="".concat(Z.tf.SENSOR,"/").concat(Z.t6.PYTHON)})))||void 0===t?void 0:t.items}),[e,i,h]),G=(0,r.useCallback)((function(n){return[{isGroupingTitle:!0,label:function(){return"SQL"},uuid:"".concat(Z.t6.SQL,"/").concat(n,"/group")},{label:function(){return"Base template (generic)"},onClick:function(){e({language:Z.t6.SQL,type:n})},uuid:"".concat(Z.t6.SQL,"/").concat(n,"/Base template (generic)")},{isGroupingTitle:!0,label:function(){return"R"},uuid:"".concat(Z.t6.R,"/").concat(n,"/group")},{label:function(){return"Base template (generic)"},onClick:function(){e({language:Z.t6.R,type:n})},uuid:"".concat(Z.t6.R,"/").concat(n,"/Base template (generic)")}]}),[e]),H=(0,r.useMemo)((function(){var n=[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(Z.t6.PYTHON).concat(Z.tf.DATA_LOADER,"/group")}].concat(w).concat(G(Z.tf.DATA_LOADER));return D&&n.push.apply(n,[{isGroupingTitle:!0,label:function(){return"Data integrations"},uuid:[Z.tf.DATA_LOADER,Q.I.DATA_INTEGRATION,"group"].join("/")},{items:D,label:function(){return(0,K.kC)(Q.O.SOURCES)},uuid:[Z.tf.DATA_LOADER,Q.I.DATA_INTEGRATION,Q.O.SOURCES].join("/")}]),n}),[G,w,D]),Y=(0,r.useMemo)((function(){var n=[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(Z.t6.PYTHON).concat(Z.tf.DATA_EXPORTER,"/group")}].concat(M).concat(G(Z.tf.DATA_EXPORTER));return B&&n.push.apply(n,[{isGroupingTitle:!0,label:function(){return"Data integrations"},uuid:"".concat(Z.tf.DATA_EXPORTER,"/").concat(Q.I.DATA_INTEGRATION,"/group")},{items:B,label:function(){return(0,K.kC)(Q.O.DESTINATIONS)},uuid:"".concat(Z.tf.DATA_EXPORTER,"/").concat(Q.I.DATA_INTEGRATION,"/").concat(Q.O.DESTINATIONS)}]),n}),[G,M,B]),X=(0,r.useMemo)((function(){return[{beforeIcon:(0,f.jsx)(b.VS,{default:!0,size:N}),label:function(){return"Python block"},onClick:function(){e({language:Z.t6.PYTHON,type:Z.tf.CUSTOM})},uuid:"Python"},{beforeIcon:(0,f.jsx)(b.VS,{default:!0,size:N}),label:function(){return"SQL block"},onClick:function(){e({language:Z.t6.SQL,type:Z.tf.CUSTOM})},uuid:"SQL"},{beforeIcon:(0,f.jsx)(b.VS,{default:!0,size:N}),label:function(){return"R block"},onClick:function(){e({language:Z.t6.R,type:Z.tf.CUSTOM})},uuid:"R"},{beforeIcon:(0,f.jsx)(j,{default:!0,size:N}),label:function(){return"Scratchpad"},onClick:function(){e({language:Z.t6.PYTHON,type:Z.tf.SCRATCHPAD})},uuid:"scratchpad"}]}),[e]),J=(0,r.useMemo)((function(){var n,e,t,o,i,r,l=[E],u=null===m||void 0===m||null===(n=m.pages)||void 0===n||null===(e=n.pipelines)||void 0===e||null===(t=e.edit)||void 0===t||null===(o=t.buttons)||void 0===o||null===(i=o.block)||void 0===i||null===(r=i.add)||void 0===r?void 0:r.items;return u?l.concat(u):l.concat(T)}),[m]),$=(0,r.useMemo)((function(){var n,e,t,o,i,r,l=[],u=null===m||void 0===m||null===(n=m.pages)||void 0===n||null===(e=n.pipelines)||void 0===e||null===(t=e.edit)||void 0===t||null===(o=t.buttons)||void 0===o||null===(i=o.block)||void 0===i||null===(r=i.add)||void 0===r?void 0:r.items_more;return u?l.concat(u):l.concat(S.filter((function(n){return!J.includes(n)})))}),[m,J]),nn=(0,r.useCallback)((function(n){var t,i,r=n.index;return Object.entries((i={},(0,o.Z)(i,Z.tf.CUSTOM,{Icon:b.cW,items:X,tooltip:function(){return"Add a blank custom block or scratchpad block"}}),(0,o.Z)(i,Z.tf.DATA_EXPORTER,{Icon:b.zS,items:Y,label:function(){return Z.V4[Z.tf.DATA_EXPORTER]},uuid:"".concat(Z.tf.DATA_EXPORTER,"/").concat(Z.t6.PYTHON)}),(0,o.Z)(i,Z.tf.SENSOR,{Icon:b.LM,items:[{isGroupingTitle:!0,label:function(){return"Python"},uuid:"".concat(Z.t6.PYTHON).concat(Z.tf.SENSOR,"/group")}].concat(F),label:function(){return Z.V4[Z.tf.SENSOR]},uuid:"".concat(Z.tf.SENSOR,"/").concat(Z.t6.PYTHON)}),(0,o.Z)(i,Z.tf.DATA_LOADER,{Icon:b.rH,items:H,label:function(){return Z.V4[Z.tf.DATA_LOADER]},uuid:"".concat(Z.tf.DATA_LOADER,"/").concat(Z.t6.PYTHON)}),(0,o.Z)(i,Z.tf.DBT,{Icon:b.xE,items:v,label:function(){return"dbt"}}),(0,o.Z)(i,Z.tf.GLOBAL_DATA_PRODUCT,{Icon:b.ie,onClick:function(){return P({addNewBlock:e})}}),(0,o.Z)(i,Z.tf.MARKDOWN,{Icon:p,onClick:function(n){null===n||void 0===n||n.preventDefault(),e({language:Z.t6.MARKDOWN,type:Z.tf.MARKDOWN})},tooltip:function(){return"Add a markdown block for documentation"}}),(0,o.Z)(i,Z.tf.TRANSFORMER,{Icon:b.Sv,items:[{isGroupingTitle:!0,label:function(){return"Python"},uuid:[Z.t6.PYTHON,Z.tf.TRANSFORMER,"group"].join("/")}].concat(U).concat(G(Z.tf.TRANSFORMER)),label:function(){return Z.V4[Z.tf.TRANSFORMER]},uuid:[Z.t6.PYTHON,Z.tf.TRANSFORMER].join("/")}),(0,o.Z)(i,E,{Icon:b.zQ,buildItems:function(){return null===$||void 0===$?void 0:$.map((function(n,e){var t=nn({index:100*e})[n],o=t.Icon;if(o){var i,r=[k,y].includes(n),l=null===(i=(0,z.qn)(n))||void 0===i?void 0:i.accent;t.beforeIcon=(0,f.jsx)(o,{default:r,fill:r?null:l,size:N})}return(0,W.gR)(t,t.beforeIcon?["Icon"]:[])}))},customSubmenuHeights:(t={},(0,o.Z)(t,[Z.tf.DATA_EXPORTER,Q.I.DATA_INTEGRATION,Q.O.DESTINATIONS].join("/"),504),(0,o.Z)(t,[Z.tf.DATA_LOADER,Q.I.DATA_INTEGRATION,Q.O.SOURCES].join("/"),504),t),label:function(){return"Templates"},tooltip:function(){return"Add a block from a template"}}),(0,o.Z)(i,k,{Icon:b.zQ,label:function(){return"Browse templates"},onClick:function(){return I({addNewBlock:e})}}),(0,o.Z)(i,y,{Icon:b.o0,label:function(){return"Create new template"},onClick:function(){return I({addNew:!0,addNewBlock:e})}}),i)).reduce((function(n,e){var t=(0,l.Z)(e,2),i=t[0],u=t[1];return V(V({},n),{},(0,o.Z)({},i,V({Icon:_.iK[i],index:r,label:function(){return Z.V4[i]},onClick:function(n){null===n||void 0===n||n.preventDefault(),x((function(n){return n===r?null:r})),R(r)},uuid:(null===u||void 0===u?void 0:u.uuid)||i},u)))}),{})}),[e,Y,H,R,X,v,$,F,U,x,I,P]),en=(0,r.useCallback)((function(n){var e=n.Icon,t=n.beforeIcon,o=n.buildItems,i=n.customSubmenuHeights,r=n.index,l=n.items,p=n.label,m=n.onClick,v=n.tooltip,h=n.uuid;return(0,f.jsx)(L,{compact:a,increasedZIndex:r===u,children:(0,f.jsx)(s.Z,{customSubmenuHeights:i,disableKeyboardShortcuts:!0,items:(null===o||void 0===o?void 0:o())||l,onClickCallback:c,open:r===u,parentRef:A[r],uuid:h,children:(0,f.jsx)(O.Z,{block:!0,label:v,size:null,widthFitContent:!0,children:(0,f.jsx)(d.ZP,{beforeIcon:t||e&&(0,f.jsx)(e,{secondary:r===u,size:N}),noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){null===m||void 0===m||m(n)},children:(null===p||void 0===p?void 0:p())||h})})})},h)}),[u,c,a]);return(0,f.jsx)(f.Fragment,{children:null===J||void 0===J?void 0:J.reduce((function(n,e,t){return n.concat([en(nn({index:t})[e]),(0,f.jsx)(C.Z,{mr:3},"spacing-".concat(e,"-").concat(t))])}),[])})},$=t(50724),nn=t(97618),en=t(55485),tn=t(49130),on=t(48670),rn=t(65956);!function(n){n.BLOCK_ACTION_OBJECTS="block_action_objects"}(X||(X={}));var ln=t(30160),un=t(17488),cn=t(35686),an=t(58401),dn=t(39643),sn=t(78419),fn=t(53808),pn=t(72619),mn=t(3314),vn=t(23780),hn=t(44688);function bn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function gn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?bn(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var xn=function(n){var e,t=n.addNewBlock,o=n.blockIdx,i=n.blockTemplatesByBlockType,d=n.compact,s=n.focused,p=n.itemsDBT,m=n.pipelineType,v=n.project,h=n.searchTextInputRef,g=n.setAddNewBlockMenuOpenIdx,x=n.setFocused,j=n.showBrowseTemplates,O=n.showConfigureProjectModal,E=n.showGlobalDataProducts,k=((0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null)),y=(0,r.useRef)(null),T="undefined"!==typeof h?h:y,S=(0,an.Z)().design,I=(0,r.useMemo)((function(){return"AddNewBlocksV2/".concat(o)}),[o]),P=(0,vn.VI)(null,{},[],{uuid:"AddNewBlocksV2/".concat(o)}),A=(0,l.Z)(P,1)[0],w=(0,r.useState)(null),D=w[0],L=w[1],Q=(0,r.useCallback)((function(){return L(null)}),[]),K=(0,r.useState)(!1),q=K[0],W=K[1],Y=(0,r.useState)(null),V=Y[0],bn=Y[1],xn=(0,r.useState)(null),jn=xn[0],Cn=xn[1],On=(0,r.useState)(null),Zn=On[0],_n=On[1],En=(0,r.useCallback)((function(n){_n(n),(0,fn.t8)(sn.Ch,n)}),[]);(0,r.useEffect)((function(){if(null===Zn){var n=(0,fn.U2)(sn.Ch,!1);En(n)}}),[En,Zn]);var kn=(0,r.useMemo)((function(){return"undefined"!==typeof s?s:q}),[s,q]),yn=(0,r.useCallback)((function(n){return"undefined"!==typeof x?x(n):W(n)}),[x,W]),Tn=(0,hn.y)(),Sn=Tn.registerOnKeyDown,In=Tn.unregisterOnKeyDown;(0,r.useEffect)((function(){return function(){return In(I)}}),[In,I]),null===Sn||void 0===Sn||Sn(I,(function(n,e){var t;kn&&(e[dn.vP]&&(yn(!1),null===T||void 0===T||null===(t=T.current)||void 0===t||t.blur()))}),[kn,T]);var Pn=(0,u.Db)(cn.ZP.search_results.useCreate(),{onSuccess:function(n){return(0,pn.wD)(n,{callback:function(n){var e=n.search_result;Cn(e)},onErrorCallback:function(n,e){return A({errors:e,response:n})}})}}),An=(0,l.Z)(Pn,1)[0],Rn=(0,r.useCallback)((function(n){clearTimeout(k.current);var e=n.target.value;bn(e),e?k.current=setTimeout((function(){An({search_result:{pipeline_type:m,query:e,ratio:70,type:X.BLOCK_ACTION_OBJECTS}})}),500):Cn(null)}),[An,m,k]),wn=(0,r.useMemo)((function(){return(null===jn||void 0===jn?void 0:jn.results)||[]}),[jn]),Dn=(0,r.useMemo)((function(){var n=null===jn||void 0===jn?void 0:jn.uuid,e=null===wn||void 0===wn?void 0:wn.map((function(e){return{itemObject:e,searchQueries:[n],value:null===e||void 0===e?void 0:e.uuid}}));if(n){var t={itemObject:{description:n,object_type:a.L.GENERATE_BLOCK,title:"Generate block using AI (beta)"},searchQueries:[n],value:"generate_block"};Zn?e.push(t):e.unshift(t)}return e}),[wn,jn,Zn]),Nn=(0,r.useMemo)((function(){return(0,f.jsx)(U,{compact:d,onClick:function(){var n;return null===T||void 0===T||null===(n=T.current)||void 0===n?void 0:n.focus()}})}),[d,T]),Mn=(0,r.useMemo)((function(){return!(null===v||void 0===v||!v.openai_api_key)}),[v]);return(0,f.jsx)($.Z,{onClickOutside:Q,open:!0,children:(0,f.jsx)(M,{compact:d,focused:kn,children:(0,f.jsxs)(en.ZP,{alignItems:"center",children:[(0,f.jsx)(nn.Z,{children:(0,f.jsx)(J,{addNewBlock:t,blockIdx:o,blockTemplatesByBlockType:i,buttonMenuOpenIndex:D,closeButtonMenu:Q,compact:d,design:S,itemsDBT:p,pipelineType:m,setAddNewBlockMenuOpenIdx:g,setButtonMenuOpenIndex:L,showBrowseTemplates:j,showGlobalDataProducts:E})}),(0,f.jsx)(B,{}),(0,f.jsx)(C.Z,{mr:3}),(0,f.jsx)(nn.Z,{flex:1,children:(0,f.jsxs)(F,{children:[Nn,(0,f.jsxs)(en.ZP,{alignItems:"center",fullWidth:!0,children:[(0,f.jsx)(un.Z,{fullWidth:!0,noBackground:!0,noBorder:!0,noBorderRadiusBottom:!0,noBorderRadiusTop:!0,onBlur:function(){return setTimeout((function(){return yn(!1)}),150)},onChange:Rn,onFocus:function(){return yn(!0)},paddingHorizontal:0,paddingVertical:0,placeholder:"Search for a block...",ref:T,value:V||""}),(0,f.jsx)(tn.Z,{addPlusSignBetweenKeys:!0,disabled:!0,keyTextGroups:[[dn.RJ,dn.ZS]]})]}),Nn,(0,f.jsx)(G,{topOffset:(null===T||void 0===T||null===(e=T.current)||void 0===e?void 0:e.getBoundingClientRect().height)+(d?1.5*R.iI:2.5*R.iI),children:(0,f.jsx)(c.Z,{itemGroups:[{items:kn?Dn:[],renderItem:function(n,e){var t=n.itemObject,o=t.block_type,i=t.description,r=t.language,l=t.object_type,u=t.title,c={fill:(0,z.qn)(o).accent,size:N},d=_.iK[o],s=a.L.GENERATE_BLOCK===l;s&&(d=b.xq,c.default=!1,c.fill=null,c.warning=!0);var p="".concat(u).concat(i?": "+i:"").slice(0,80);return(0,f.jsxs)(H,gn(gn({},e),{},{onClick:function(n){var t;(0,mn.j)(n),null===e||void 0===e||null===(t=e.onClick)||void 0===t||t.call(e,n)},children:[(0,f.jsxs)(nn.Z,{alignItems:"center",flex:1,children:[d&&(0,f.jsx)(d,gn({default:!(null!==c&&void 0!==c&&c.fill)},c)),(0,f.jsx)(C.Z,{mr:2}),(0,f.jsx)(ln.ZP,{default:!0,overflowWrap:!0,textOverflow:!0,children:p})]}),(0,f.jsx)(C.Z,{mr:1}),(0,f.jsx)(ln.ZP,{monospace:!0,muted:!0,uppercase:!0,children:s?"AI":Z.dO[r]}),(0,f.jsx)(C.Z,{mr:1}),a.L.BLOCK_FILE===l&&(0,f.jsx)(b.$B,{muted:!0,size:N}),a.L.CUSTOM_BLOCK_TEMPLATE===l&&(0,f.jsx)(b.zQ,{muted:!0,size:N}),a.L.MAGE_TEMPLATE===l&&(0,f.jsx)(b.m1,{muted:!0,size:N}),s&&Mn&&(0,f.jsx)(b.xq,{muted:!0,size:N}),s&&!Mn&&(0,f.jsx)(b.uy,{muted:!0,size:N})]}))}}],onSelectItem:function(n){var e=n.itemObject,o=e.object_type;a.L.GENERATE_BLOCK!==o||Mn?(t({block_action_object:e,require_unique_name:!1}),bn(null),Cn(null)):null===O||void 0===O||O({cancelButtonText:"Set this up later",header:(0,f.jsx)(C.Z,{mb:R.HN,children:(0,f.jsxs)(rn.Z,{children:[(0,f.jsx)(ln.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate blocks using AI."}),(0,f.jsx)(C.Z,{mt:1,children:(0,f.jsxs)(ln.ZP,{warning:!0,children:["Read ",(0,f.jsx)(on.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){En(!0)},onSaveSuccess:function(n){null!==n&&void 0!==n&&n.openai_api_key&&(t({block_action_object:e}),bn(null),Cn(null))}})},uuid:I})})]})})]})})})};var jn=function(n){var e=n.size;return(0,f.jsx)("svg",{fill:"none",height:e,preserveAspectRatio:"xMidYMid",viewBox:"0 0 256 256",width:e,xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{d:"M245.121138,10.6473813 C251.139129,16.4340053 255.074133,24.0723342 256,32.4050489 C256,35.8769778 255.074133,38.1917867 252.990862,42.5895822 C250.907876,46.9873778 225.215147,91.4286933 217.57696,103.696213 C213.179164,110.871609 210.864356,119.435947 210.864356,127.768462 C210.864356,136.3328 213.179164,144.6656 217.57696,151.840996 C225.215147,164.108516 250.907876,208.781084 252.990862,213.179164 C255.074133,217.57696 256,219.659947 256,223.131876 C255.074133,231.464676 251.370667,239.103147 245.352676,244.658347 C239.565938,250.676338 231.927751,254.611342 223.826489,255.305671 C220.35456,255.305671 218.039751,254.379804 213.873493,252.296533 C209.706951,250.213262 164.340053,225.215147 152.072249,217.57696 C151.146382,217.113884 150.220516,216.419556 149.063396,215.95648 L88.4195556,180.079502 C89.8082133,191.652693 94.9006222,202.763093 103.233138,210.864356 C104.853618,212.484551 106.473813,213.873493 108.325547,215.262151 C106.936604,215.95648 105.316409,216.651093 103.927751,217.57696 C91.6599467,225.215147 46.9873778,250.907876 42.5895822,252.990862 C38.1917867,255.074133 36.1085156,256 32.4050489,256 C24.0723342,255.074133 16.4340053,251.370667 10.8788338,245.352676 C4.86075733,239.565938 0.925858133,231.927751 0,223.594951 C0.231464676,220.123022 1.1573248,216.651093 3.00905244,213.641956 C5.09223822,209.24416 30.7848533,164.571307 38.42304,152.303787 C42.82112,145.128391 45.1356444,136.795591 45.1356444,128.231538 C45.1356444,119.6672 42.82112,111.3344 38.42304,104.159004 C30.7848533,91.4286933 4.86075733,46.75584 3.00905244,42.3580444 C1.1573248,39.3489067 0.231464676,35.8769778 0,32.4050489 C0.925858133,24.0723342 4.62930489,16.4340053 10.6473813,10.6473813 C16.4340053,4.62930489 24.0723342,0.925858133 32.4050489,0 C35.8769778,0.231464676 39.3489067,1.1573248 42.5895822,3.00905244 C46.2930489,4.62930489 78.9293511,23.6094009 96.28928,33.7939911 L100.224284,36.1085156 C101.612942,37.0343822 102.770347,37.7287111 103.696213,38.1917867 L105.547947,39.3489067 L167.348907,75.9204978 C165.960249,62.0324978 158.784853,49.3019022 147.674453,40.7378489 C149.063396,40.04352 150.683591,39.3489067 152.072249,38.42304 C164.340053,30.7848533 209.012622,4.86075733 213.410418,3.00905244 C216.419556,1.1573248 219.891484,0.231464676 223.594951,0 C231.696213,0.925858133 239.334684,4.62930489 245.121138,10.6473813 Z M131.240391,144.434062 L144.434062,131.240391 C146.285796,129.388658 146.285796,126.611342 144.434062,124.759609 L131.240391,111.565938 C129.388658,109.714204 126.611342,109.714204 124.759609,111.565938 L111.565938,124.759609 C109.714204,126.611342 109.714204,129.388658 111.565938,131.240391 L124.759609,144.434062 C126.379804,146.054258 129.388658,146.054258 131.240391,144.434062 Z",fill:"#FF694A"})})},Cn=t(93369),On=t(57653),Zn=t(82359),_n=t(8454),En=t(75634),kn=t(5677);function yn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function Tn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?yn(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Sn=function(n){var e=n.addNewBlock,t=n.blockIdx,o=n.blockTemplates,l=n.compact,u=n.focusedAddNewBlockSearch,c=n.hideCustom,a=n.hideDataExporter,d=(n.hideDataLoader,n.hideDbt),p=n.hideMarkdown,m=n.hideScratchpad,v=n.hideSensor,h=n.hideTransformer,g=n.hideTransformerDataSources,x=n.onClickAddSingleDBTModel,j=n.pipeline,C=n.project,_=n.searchTextInputRef,E=n.setAddNewBlockMenuOpenIdx,k=n.setCreatingNewDBTModel,y=n.setFocusedAddNewBlockSearch,T=n.showBrowseTemplates,S=n.showConfigureProjectModal,I=n.showGlobalDataProducts,P=(0,r.useState)(null),A=P[0],w=P[1],D=(0,r.useRef)(null),N=(0,r.useRef)(null),M=(0,r.useRef)(null),B=(0,r.useRef)(null),L=(0,r.useRef)(null),U=(0,r.useRef)(null),F=(0,r.useRef)(null),G={compact:l,inline:!0},H=null===j||void 0===j?void 0:j.type,Q=H===On.qL.STREAMING,K=l?En.ZG/2:En.ZG,z=25*R.iI,W=(0,r.useMemo)((function(){return(0,q.q_)(kn.c1,_n.qs.COLUMN,e)}),[e]),Y=(0,r.useMemo)((function(){return(0,q.q_)(kn.Wt,_n.qs.ROW,e)}),[e]),V=(0,r.useMemo)((function(){var n=[{label:function(){return"Generic (no template)"},onClick:function(){e({language:Z.t6.PYTHON,type:Z.tf.TRANSFORMER})},uuid:"generic_transformer_action"},{bold:!0,items:Y,label:function(){return"Row actions"},uuid:"row_actions_grouping"},{isGroupingTitle:!0,label:function(){return"Column actions"},uuid:"column_actions_grouping"}].concat((0,i.Z)(W));return g||n.splice(1,0,{bold:!0,items:(0,q.hr)(e,Z.tf.TRANSFORMER,H),label:function(){return"Data sources"},uuid:"data_sources_grouping"}),n}),[e,W,g,H,Y]),X=(0,r.useCallback)((function(){return w(null)}),[]),J=(0,r.useCallback)((function(n){return null===E||void 0===E?void 0:E((function(e){return null===e||A!==n?t:null}))}),[t,A,E]),nn=On.qL.PYSPARK===H,tn=(0,r.useMemo)((function(){return(0,q.oM)(o,e,{"data_integrations/destinations/base":!0,"data_integrations/sources/base":!0})}),[e,o]),on=(0,r.useMemo)((function(){return(0,q.hr)(e,Z.tf.DATA_LOADER,H,{blockTemplatesByBlockType:tn,showBrowseTemplates:T})}),[e,tn,H,T]),rn=(0,r.useMemo)((function(){return(0,q.hr)(e,Z.tf.DATA_EXPORTER,H,{blockTemplatesByBlockType:tn,showBrowseTemplates:T})}),[e,tn,H,T]),ln=(0,r.useMemo)((function(){return nn||On.qL.INTEGRATION===H?V:Q?[{items:(0,q.hr)(e,Z.tf.TRANSFORMER,H),label:function(){return"Python"},uuid:"transformers/python"}].concat((0,i.Z)((0,q.hr)(e,Z.tf.TRANSFORMER,H,{blockTemplatesByBlockType:tn,onlyCustomTemplate:!0,showBrowseTemplates:T}))):[{items:V,label:function(){return"Python"},uuid:"transformers/python_all"}].concat((0,i.Z)((0,q.qs)(e,Z.tf.TRANSFORMER)),(0,i.Z)((0,q.hr)(e,Z.tf.TRANSFORMER,H,{blockTemplatesByBlockType:tn,onlyCustomTemplate:!0,showBrowseTemplates:T})))}),[e,V,tn,nn,Q,H,T]),un=(0,r.useMemo)((function(){return[{label:function(){return"New model"},onClick:function(){null===k||void 0===k||k(!0),null===x||void 0===x||x(t)},uuid:"dbt/new_model"},{label:function(){return"Single model or snapshot (from file)"},onClick:function(){return null===x||void 0===x?void 0:x(t)},uuid:"dbt/single_model"},{label:function(){return"All models (w/ optional exclusion)"},onClick:function(){return e({configuration:{dbt:{command:"run"}},language:Z.t6.YAML,type:Z.tf.DBT})},uuid:"dbt/all_models"},{label:function(){return"Generic dbt command"},onClick:function(){return e({configuration:{dbt:{command:"run"}},language:Z.t6.YAML,type:Z.tf.DBT})},uuid:"dbt/generic_command"}]}),[e,t,x,k]);return(0,r.useMemo)((function(){var n;return On.qL.PYTHON===H&&!nn&&(null===C||void 0===C||null===(n=C.features)||void 0===n?void 0:n[Zn.d.ADD_NEW_BLOCK_V2])}),[nn,H,C])?(0,f.jsx)(xn,{addNewBlock:e,blockIdx:t,blockTemplatesByBlockType:tn,compact:l,focused:u,itemsDBT:un,pipelineType:H,project:C,searchTextInputRef:_,setAddNewBlockMenuOpenIdx:E,setFocused:y,showBrowseTemplates:T,showConfigureProjectModal:S,showGlobalDataProducts:I}):(0,f.jsx)(en.ZP,{flexWrap:"wrap",inline:!0,children:(0,f.jsx)($.Z,{onClickOutside:X,open:!0,children:(0,f.jsxs)(en.ZP,{flexWrap:"wrap",children:[!a&&(0,f.jsx)(En.W4,{increasedZIndex:0===A,children:(0,f.jsx)(s.Z,{disableKeyboardShortcuts:!0,items:on,onClickCallback:X,open:0===A,parentRef:D,uuid:"data_loader_button",children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(En.Wx,{blue:!0,compact:l,children:(0,f.jsx)(b.mm,{size:K})}),onClick:function(n){n.preventDefault(),w((function(n){return 0===n?null:0})),J(0)},uuid:"AddNewBlocks/Data_loader",children:"Data loader"}))})}),!h&&(0,f.jsx)(En.W4,{increasedZIndex:1===A,children:(0,f.jsx)(s.Z,{disableKeyboardShortcuts:!0,items:ln,onClickCallback:X,open:1===A,parentRef:N,uuid:"transformer_button",children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(En.Wx,{compact:l,purple:!0,children:(0,f.jsx)(b.mm,{size:K})}),onClick:function(n){n.preventDefault(),w((function(n){return 1===n?null:1})),J(1)},uuid:"AddNewBlocks/Transformer",children:"Transformer"}))})}),!a&&(0,f.jsx)(En.W4,{increasedZIndex:2===A,children:(0,f.jsx)(s.Z,{disableKeyboardShortcuts:!0,items:rn,onClickCallback:X,open:2===A,parentRef:M,uuid:"data_exporter_button",children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(En.Wx,{compact:l,yellow:!0,children:(0,f.jsx)(b.mm,{inverted:!0,size:K})}),onClick:function(n){n.preventDefault(),w((function(n){return 2===n?null:2})),J(2)},uuid:"AddNewBlocks/Data_exporter",children:"Data exporter"}))})}),!d&&(0,f.jsx)(En.W4,{increasedZIndex:3===A,children:(0,f.jsx)(s.Z,{disableKeyboardShortcuts:!0,items:[].concat((0,i.Z)(un),(0,i.Z)((0,q.hr)(e,Z.tf.DBT,H,{blockTemplatesByBlockType:tn,onlyCustomTemplate:!0,showBrowseTemplates:T}))),onClickCallback:X,open:3===A,parentRef:B,uuid:"dbt_button",children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(jn,{size:En.ZG*(l?.75:1.25)}),onClick:function(n){n.preventDefault(),w((function(n){return 3===n?null:3})),J(3)},uuid:"AddNewBlocks/DBT",children:"DBT model"}))})}),!c&&(0,f.jsx)(En.W4,{increasedZIndex:4===A,children:(0,f.jsx)(s.Z,{disableKeyboardShortcuts:!0,items:[{items:(0,q.Bd)(e,Z.tf.CUSTOM,Z.t6.PYTHON),label:function(){return"Python"},uuid:"custom_block_python"},{items:(0,q.Bd)(e,Z.tf.CUSTOM,Z.t6.SQL),label:function(){return"SQL"},uuid:"custom_block_sql"}].concat((0,i.Z)((0,q.hr)(e,Z.tf.CUSTOM,H,{blockTemplatesByBlockType:tn,onlyCustomTemplate:!0,showBrowseTemplates:T}))),onClickCallback:X,open:4===A,parentRef:L,uuid:"custom_block_button",children:(0,f.jsx)(O.Z,{block:!0,label:"Add a custom code block with a designated color.",maxWidth:z,size:null,children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(En.Wx,{compact:l,grey:!0,children:(0,f.jsx)(b.mm,{inverted:!0,size:K})}),onClick:function(n){n.preventDefault(),w((function(n){return 4===n?null:4})),J(4)},uuid:"AddNewBlocks/Scratchpad",children:"Custom"}))})})}),!m&&(0,f.jsx)(En.W4,{children:(0,f.jsx)(O.Z,{block:!0,label:"Write experimental code that doesn\u2019t get executed when you run your pipeline.",maxWidth:z,size:null,children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(En.Wx,{border:!0,compact:l,children:(0,f.jsx)(b.mm,{size:K})}),onClick:function(n){n.preventDefault(),e({type:Z.tf.SCRATCHPAD})},uuid:"AddNewBlocks/Scratchpad",children:"Scratchpad"}))})}),!m&&(0,f.jsx)(En.W4,{children:(0,f.jsx)(O.Z,{block:!0,label:"Add a global data product block",maxWidth:z,size:null,children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(En.Wx,{compact:l,children:(0,f.jsx)(b.ie,{size:K})}),onClick:function(n){n.preventDefault(),I({addNewBlock:e})},uuid:"AddNewBlocks/GlobalDataProducts",children:"Global data product"}))})}),!Q&&!v&&(0,f.jsx)(En.W4,{increasedZIndex:6===A,children:(0,f.jsx)(s.Z,{disableKeyboardShortcuts:!0,items:[].concat((0,i.Z)((0,q.hr)(e,Z.tf.SENSOR,H)),(0,i.Z)((0,q.hr)(e,Z.tf.SENSOR,H,{blockTemplatesByBlockType:tn,onlyCustomTemplate:!0,showBrowseTemplates:T}))),onClickCallback:X,open:6===A,parentRef:U,uuid:"sensor_button",children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(En.Wx,{compact:l,children:(0,f.jsx)(b.LM,{pink:!0,size:En.ZG*(l?.75:1.25)})}),onClick:function(n){n.preventDefault(),w((function(n){return 6===n?null:6})),J(6)},uuid:"AddNewBlocks/Sensor",children:"Sensor"}))})}),!p&&(0,f.jsx)(En.W4,{increasedZIndex:7===A,children:(0,f.jsx)(s.Z,{disableKeyboardShortcuts:!0,items:[{label:function(){return"Generic (no template)"},onClick:function(){e({language:Z.t6.MARKDOWN,type:Z.tf.MARKDOWN})},uuid:"generic_markdown"}].concat((0,i.Z)((0,q.hr)(e,Z.tf.MARKDOWN,H,{blockTemplatesByBlockType:tn,onlyCustomTemplate:!0,showBrowseTemplates:T}))),onClickCallback:X,open:7===A,parentRef:F,uuid:"markdown_button",children:(0,f.jsx)(Cn.ZP,Tn(Tn({},G),{},{beforeElement:(0,f.jsx)(En.Wx,{compact:l,sky:!0,children:(0,f.jsx)(b.mm,{inverted:!0,size:K})}),onClick:function(n){n.preventDefault(),w((function(n){return 7===n?null:7})),J(7)},uuid:"AddNewBlocks/Markdown",children:"Markdown"}))})})]})})})}},38399:function(n,e,t){t.d(e,{Bd:function(){return E},SF:function(){return k},X7:function(){return y},hr:function(){return O},oM:function(){return C},q_:function(){return _},qs:function(){return j}});var o=t(21831),i=t(82394),r=t(55485),l=t(30160),u=t(5677),c=t(72473),a=t(44425),d=t(84438),s=t(57653),f=t(81728),p=t(55283),m=t(86735),v=t(28598);function h(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}var b=function(n,e,t){var o=t===s.qL.STREAMING&&(n===a.tf.DATA_LOADER||n===a.tf.DATA_EXPORTER);return(function(n){var e;return n===s.qL.STREAMING?(e={},(0,i.Z)(e,a.tf.DATA_LOADER,[d.ZP.ACTIVEMQ,d.ZP.AMAZON_SQS,d.ZP.AZURE_EVENT_HUB,d.ZP.GOOGLE_CLOUD_PUBSUB,d.ZP.INFLUXDB,d.ZP.KAFKA,d.ZP.NATS,d.ZP.KINESIS,d.ZP.RABBITMQ,d.ZP.MONGODB]),(0,i.Z)(e,a.tf.DATA_EXPORTER,[d.ZP.ACTIVEMQ,d.ZP.AZURE_DATA_LAKE,d.ZP.BIGQUERY,d.ZP.CLICKHOUSE,d.ZP.DUCKDB,d.ZP.DUMMY,d.ZP.ELASTICSEARCH,d.ZP.GOOGLE_CLOUD_PUBSUB,d.ZP.INFLUXDB,d.ZP.S3,d.ZP.KAFKA,d.ZP.KINESIS,d.ZP.MONGODB,d.ZP.MSSQL,d.ZP.MYSQL,d.ZP.OPENSEARCH,d.ZP.POSTGRES,d.ZP.RABBITMQ,d.ZP.REDSHIFT,d.ZP.SNOWFLAKE,d.ZP.TRINO]),(0,i.Z)(e,a.tf.TRANSFORMER,[d.ZP.GENERIC]),e):d.cp}(t)[n]||[]).map((function(t){return{indent:n===a.tf.TRANSFORMER,label:function(){return d.MV[t]},onClick:function(){e({config:{data_source:t===d.ZP.GENERIC?null:t},language:o?a.t6.YAML:a.t6.PYTHON,type:n})},uuid:"".concat(n,"/").concat(t)}}))};function g(n,e){return{label:function(){return"SQL"},onClick:function(){return n({language:a.t6.SQL,type:e})},uuid:"".concat(e,"/sql")}}function x(n,e){return{label:function(){return"R"},onClick:function(){return n({language:a.t6.R,type:e})},uuid:"".concat(e,"/r")}}var j=function(n,e){return[g(n,e),x(n,e)]};function C(n,e,t){var o={};return null===n||void 0===n||n.forEach((function(n){var r=n.block_type,l=n.configuration,u=n.defaults,c=n.description,a=n.groups,d=n.language,s=n.name,f=n.path,p=n.template_type,m=n.template_variables;o[r]||(o[r]={}),o[r][d]||(o[r][d]={items:[],label:function(){return d},uuid:"".concat(r,"/").concat(d)});var v={label:function(){return s},onClick:function(){return e({config:{template_path:f,template_type:p,template_variables:m},configuration:l,defaults:u,language:d,type:r})},uuid:"".concat(f,"/").concat(s)};if(null!==t&&void 0!==t&&t[f]||(v.tooltip=function(){return c}),(null===a||void 0===a?void 0:a.length)>=1){var b=function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?h(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},o[r][d]),g=[null],x=[b];a.forEach((function(n,e){var t="".concat(r,"/").concat(d,"/").concat(a.slice(0,e+1).join("/")),o=x[e],i=o.items.findIndex((function(n){var e=n.uuid;return t===e})),l=i>=0?o.items[i]:null;l||(l={items:[],label:function(){return n},uuid:t}),g.push(i),x.push(l)})),g.push(-1),x.push(v);var j=x.length;o[r][d]=x.reduce((function(n,e,t){var o=j-t,i=x[o-2],r=x[o-1],l=g[o-1];return i?(l>=0?i.items[l]=r:i.items.push(r),i):r}),{})}else o[r][d].items.push(v)})),o}var O=function(n,e,t,o){var i=o||{},r=i.blockTemplatesByBlockType,l=i.dataIntegrationType,u=i.languages,c=i.onlyCustomTemplate,d=i.showBrowseTemplates,f={};null!==o&&void 0!==o&&o.v2||(f=Object.fromEntries(a.Ut.map((function(e){return[e,b(e,n,t)]}))));var p={label:function(){return"Custom template"},onClick:function(){return d({addNewBlock:n,blockType:e,language:a.t6.SQL})},uuid:"".concat(e,"/custom_template")};if(c)return[p];if(t===s.qL.PYSPARK||t===s.qL.STREAMING)return f[e];if(l&&null!==o&&void 0!==o&&o.v2){var v,h,j=(null===r||void 0===r||null===(v=r[e])||void 0===v||null===(h=v[l])||void 0===h?void 0:h.items)||[];return[{items:(0,m.YC)(j,(function(n){return(0,n.label)()})),uuid:"".concat(e,"/").concat(l)}]}var C,O,Z=(null===r||void 0===r||null===(C=r[e])||void 0===C||null===(O=C[a.t6.PYTHON])||void 0===O?void 0:O.items)||[],_=[{items:(0,m.YC)((f[e]||[]).concat(Z),(function(n){return(0,n.label)()})),label:function(){return"Python"},uuid:"".concat(e,"/").concat(a.t6.PYTHON)}];return(!u||null!==u&&void 0!==u&&u.includes(a.t6.SQL))&&_.push(g(n,e)),(!u||null!==u&&void 0!==u&&u.includes(a.t6.R))&&_.push(x(n,e)),![a.tf.MARKDOWN,a.tf.SCRATCHPAD].includes(e)&&d&&_.push(p),_};function Z(n,e,t){return n.map((function(n){return{indent:!0,label:function(){return u.NX[e][n]},onClick:function(){t({config:{action_type:n,axis:e},language:a.t6.PYTHON,type:a.tf.TRANSFORMER})},uuid:"".concat(e,"_").concat(n)}})).sort((function(n,e){return n.label().localeCompare(e.label())}))}function _(n,e,t){var i=[];return n.forEach((function(n){if(n!==u._G.MISC)i.push({indent:!0,items:Z(u.d9[e][n],e,t),label:function(){return n},uuid:"".concat(e,"_grouping_").concat((0,f.RA)(n))});else{var r=Z(u.d9[e][n],e,t);i.push.apply(i,(0,o.Z)(r))}})),i}var E=function(n,e,t){return Object.values(a.Lq).map((function(o){return{label:function(){return(0,v.jsxs)(r.ZP,{alignItems:"center",children:[(0,v.jsx)(c.mm,{fill:(0,p.qn)(a.tf.CUSTOM,{blockColor:o}).accent,size:16}),"\xa0",(0,v.jsx)(l.ZP,{children:(0,f.kC)(o)})]})},leftAligned:!0,onClick:function(){n({color:o,language:t,type:e})},uuid:"".concat(t,"_").concat(o)}}))},k=function(n){return"-- Docs: https://docs.mage.ai/guides/sql-blocks\n"+(n||"")};function y(n,e){var t=e;return a.tf.SCRATCHPAD===n.type&&(t='"""\nNOTE: Scratchpad blocks are used only for experimentation and testing out code.\nThe code written here will not be executed as part of the pipeline.\n"""\n'+(e||"")),t}},15752:function(n,e,t){t.d(e,{F:function(){return r},h:function(){return i}});var o=t(92709);function i(){var n=new CustomEvent(o.Qj);window.dispatchEvent(n)}function r(n){var e=new CustomEvent(o.Em,{detail:{block:n}});window.dispatchEvent(e)}},92709:function(n,e,t){t.d(e,{$e:function(){return a},Em:function(){return f},IY:function(){return l},Jf:function(){return r},LR:function(){return i},NR:function(){return u},Qj:function(){return s},Wf:function(){return p},b7:function(){return o},m$:function(){return d},tK:function(){return c}});var o="edit",i="[ERR_BLOCK_EXISTS]",r={uuid:"All files"},l={uuid:"Current blocks"},u=[r,l],c="CUSTOM_EVENT_BLOCK_OUTPUT_CHANGED",a="CUSTOM_EVENT_CODE_BLOCK_CHANGED",d="CUSTOM_EVENT_COLUMN_SCROLLER_CURSOR_MOVED",s="CUSTOM_EVENT_COLUMN_SCROLLER_RESET",f="CUSTOM_EVENT_COLUMN_SCROLLER_SCROLL_TO_BLOCK",p="CUSTOM_EVENT_SYNC_COLUMN_POSITIONS"},74052:function(n,e,t){t.d(e,{Dp:function(){return g},OF:function(){return x},Q9:function(){return C},Rt:function(){return v},Rz:function(){return Z},h8:function(){return j},k1:function(){return h},uS:function(){return O},zv:function(){return _}});var o=t(21831),i=t(82394),r=t(92083),l=t.n(r),u=t(48339),c=t(53808),a=t(3917),d=t(86735),s=t(81728),f=t(70320);function p(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function m(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?p(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function v(n){var e={},t={};return null===n||void 0===n||n.forEach((function(n){var o=n.content,i=n.outputs,r=n.type,l=n.uuid;(null===i||void 0===i?void 0:i.length)>=1&&(e[l]=i.map((function(n){if("object"===typeof n){var e=n||{},t=e.sample_data,o=e.shape,i=e.text_data,r=e.type;return t?{data:m({shape:o},t),type:r}:i&&(0,s.Pb)(i)?JSON.parse(i):i}return{data:String(n),type:u.Gi.TEXT}}))),t[r]||(t[r]={}),t[r][l]=o})),{content:t,messages:e}}function h(n,e,t){n.forEach((function(n){(0,c.t8)("".concat(t,"/").concat(n.uuid,"/codeCollapsed"),(0,c.Od)("".concat(e,"/").concat(n.uuid,"/codeCollapsed"))),(0,c.t8)("".concat(t,"/").concat(n.uuid,"/outputCollapsed"),(0,c.Od)("".concat(e,"/").concat(n.uuid,"/outputCollapsed")))}))}function b(n){return"".concat(n,"/").concat(c.kP)}function g(n){return(0,c.U2)(b(n),[])}function x(n,e){var t=g(n);t.includes(e)||(0,c.t8)(b(n),[].concat((0,o.Z)(t),[e]))}function j(n,e){var t=g(n).filter((function(n){return n!==e}));(0,c.t8)(b(n),t)}function C(n,e){var t=(0,d.HK)(e,(function(n){return n.uuid}));return n.map((function(n){return t[n]})).filter((function(n){return!!n}))}var O=function(n,e){var t=window.URL.createObjectURL(n),o=document.createElement("a");o.href=t,o.download=e,document.body.appendChild(o),o.click(),o.remove()};function Z(n,e){var t,o=(0,f.qB)(),i=null===e||void 0===e?void 0:e.isPipelineUpdating,r=null===e||void 0===e?void 0:e.pipelineContentTouched,u=null===e||void 0===e?void 0:e.pipelineLastSaved;if(r)t="Unsaved changes";else if(i)t="Saving changes...";else if(u){var c=l()().utc().unix();if(null!==e&&void 0!==e&&e.displayRelative&&c-u<3600){var d=l().unix(c-(c-u)).utc().fromNow();t="Saved ".concat(d)}else{var s=(0,a.JX)(u/1e3);null!==n&&void 0!==n&&n.updated_at&&(s=(0,a.XG)(null===n||void 0===n?void 0:n.updated_at,o)),t="Last saved ".concat(s)}}else t="All changes saved";return t}function _(n){var e=n.type,t=n.uuid;return"".concat(e,"s/").concat(t,".py")}},8454:function(n,e,t){var o,i,r,l;t.d(e,{Q0:function(){return o},qs:function(){return i}}),function(n){n.ADD="add",n.AVERAGE="average",n.CLEAN_COLUMN_NAME="clean_column_name",n.COUNT="count",n.COUNT_DISTINCT="count_distinct",n.CUSTOM="custom",n.DIFF="diff",n.DROP_DUPLICATE="drop_duplicate",n.EXPAND_COLUMN="expand_column",n.EXPLODE="explode",n.FILTER="filter",n.FIRST="first",n.FIX_SYNTAX_ERRORS="fix_syntax_errors",n.GROUP="group",n.IMPUTE="impute",n.JOIN="join",n.LAST="last",n.LIMIT="limit",n.MAX="max",n.MEDIAN="median",n.MIN="min",n.MODE="mode",n.NORMALIZE="normalize",n.REFORMAT="reformat",n.REMOVE="remove",n.REMOVE_OUTLIERS="remove_outliers",n.SCALE="scale",n.SELECT="select",n.SHIFT_DOWN="shift_down",n.SHIFT_UP="shift_up",n.SORT="sort",n.STANDARDIZE="standardize",n.SUM="sum",n.UNION="union",n.UPDATE_TYPE="update_type",n.UPDATE_VALUE="update_value"}(o||(o={})),function(n){n.COLUMN="column",n.ROW="row"}(i||(i={})),function(n){n.NOT_APPLIED="not_applied",n.COMPLETED="completed"}(r||(r={})),function(n){n.FEATURE="feature"}(l||(l={}))},26084:function(n,e,t){var o;t.d(e,{Q:function(){return o}}),function(n){n.CALLBACK="callbacks",n.CONDITIONAL="conditionals"}(o||(o={}))},2548:function(n,e,t){var o;t.d(e,{L:function(){return o}}),function(n){n.BLOCK_FILE="block_file",n.CUSTOM_BLOCK_TEMPLATE="custom_block_template",n.GENERATE_BLOCK="generate_block",n.MAGE_TEMPLATE="mage_template"}(o||(o={}))},13803:function(n,e,t){var o,i;t.d(e,{I:function(){return i},O:function(){return o}}),function(n){n.DESTINATIONS="destinations",n.SOURCES="sources"}(o||(o={})),function(n){n.DATA_INTEGRATION="data_integration"}(i||(i={}))},35058:function(n,e,t){t.d(e,{$1:function(){return h},BD:function(){return j},CK:function(){return D},ED:function(){return c},JJ:function(){return u},JT:function(){return R},MP:function(){return N},Mi:function(){return S},Mv:function(){return O},PG:function(){return d},Pi:function(){return I},R8:function(){return r},Sv:function(){return g},Tv:function(){return A},Yf:function(){return y},Yg:function(){return f},a3:function(){return m},aE:function(){return M},aZ:function(){return T},bE:function(){return s},bk:function(){return k},bn:function(){return B},c0:function(){return L},cH:function(){return b},e:function(){return a},eN:function(){return l},eW:function(){return Z},m$:function(){return C},m7:function(){return i},mW:function(){return E},nq:function(){return _},oV:function(){return o},os:function(){return w},pA:function(){return P},rj:function(){return v},sc:function(){return x},v8:function(){return p}});var o,i="buckets",r="chart_style",l="group_by",u="height",c="index",a="legend_labels",d="limit",s="metrics",f="time_interval",p="width_percentage",m="x",v="y",h="y_sort_order",b="data_provider",g="data_provider_database",x="data_provider_profile",j="data_provider_schema",C="data_provider_table",O="dbt_profile_target",Z="dbt_project_name",_="export_write_policy",E="limit",k="unique_upstream_table_name",y="upstream_block_configuration",T="table_name",S="use_raw_sql",I="dbt",P="command",A=[m,v];!function(n){n.BAR_CHART="bar chart",n.CUSTOM="custom",n.HISTOGRAM="histogram",n.LINE_CHART="line chart",n.PIE_CHART="pie chart",n.TABLE="table",n.TIME_SERIES_BAR_CHART="time series bar chart",n.TIME_SERIES_LINE_CHART="time series line chart"}(o||(o={}));var R,w,D=[o.BAR_CHART,o.HISTOGRAM,o.LINE_CHART,o.PIE_CHART,o.TABLE,o.TIME_SERIES_BAR_CHART,o.TIME_SERIES_LINE_CHART];!function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"}(R||(R={})),function(n){n.AVERAGE="average",n.COUNT="count",n.COUNT_DISTINCT="count_distinct",n.MAX="max",n.MEDIAN="median",n.MIN="min",n.MODE="mode",n.SUM="sum"}(w||(w={}));var N,M,B=[w.AVERAGE,w.COUNT,w.COUNT_DISTINCT,w.MAX,w.MEDIAN,w.MIN,w.MODE,w.SUM];function L(n){return"".concat(n.aggregation,"(").concat(n.column,")")}!function(n){n.ASCENDING="ascending",n.DESCENDING="descending"}(N||(N={})),function(n){n.DAY="day",n.HOUR="hour",n.MINUTE="minute",n.MONTH="month",n.ORIGINAL="original",n.SECOND="second",n.WEEK="week",n.YEAR="year"}(M||(M={}))},44898:function(n,e,t){t.d(e,{R:function(){return i},Z:function(){return o}});var o="blocks",i="pipelines"},84438:function(n,e,t){t.d(e,{MV:function(){return c},cp:function(){return a},zJ:function(){return r}});var o,i,r,l=t(82394),u=t(44425);!function(n){n.ACTIVEMQ="activemq",n.AMAZON_SQS="amazon_sqs",n.API="api",n.AZURE_BLOB_STORAGE="azure_blob_storage",n.AZURE_DATA_LAKE="azure_data_lake",n.AZURE_EVENT_HUB="azure_event_hub",n.BIGQUERY="bigquery",n.CLICKHOUSE="clickhouse",n.DRUID="druid",n.DUCKDB="duckdb",n.DUMMY="dummy",n.ELASTICSEARCH="elasticsearch",n.FILE="file",n.GENERIC="generic",n.GOOGLE_CLOUD_PUBSUB="google_cloud_pubsub",n.GOOGLE_CLOUD_STORAGE="google_cloud_storage",n.GOOGLE_SHEETS="google_sheets",n.INFLUXDB="influxdb",n.KAFKA="kafka",n.KINESIS="kinesis",n.MONGODB="mongodb",n.MSSQL="mssql",n.MYSQL="mysql",n.NATS="nats",n.OPENSEARCH="opensearch",n.ORACLEDB="oracledb",n.PINOT="pinot",n.POSTGRES="postgres",n.RABBITMQ="rabbitmq",n.REDSHIFT="redshift",n.S3="s3",n.SNOWFLAKE="snowflake",n.TRINO="trino"}(r||(r={}));var c=(o={},(0,l.Z)(o,r.ACTIVEMQ,"ActiveMQ"),(0,l.Z)(o,r.AMAZON_SQS,"Amazon SQS"),(0,l.Z)(o,r.API,"API"),(0,l.Z)(o,r.AZURE_BLOB_STORAGE,"Azure Blob Storage"),(0,l.Z)(o,r.AZURE_DATA_LAKE,"Azure Data Lake"),(0,l.Z)(o,r.AZURE_EVENT_HUB,"Azure Event Hub"),(0,l.Z)(o,r.BIGQUERY,"Google BigQuery"),(0,l.Z)(o,r.CLICKHOUSE,"ClickHouse"),(0,l.Z)(o,r.DRUID,"Druid"),(0,l.Z)(o,r.DUCKDB,"DuckDB"),(0,l.Z)(o,r.DUMMY,"Dummy"),(0,l.Z)(o,r.ELASTICSEARCH,"ElasticSearch"),(0,l.Z)(o,r.FILE,"Local file"),(0,l.Z)(o,r.GENERIC,"Generic (no template)"),(0,l.Z)(o,r.GOOGLE_CLOUD_PUBSUB,"Google Cloud PubSub"),(0,l.Z)(o,r.GOOGLE_CLOUD_STORAGE,"Google Cloud Storage"),(0,l.Z)(o,r.GOOGLE_SHEETS,"Google Sheets"),(0,l.Z)(o,r.INFLUXDB,"InfluxDB"),(0,l.Z)(o,r.KAFKA,"Kafka"),(0,l.Z)(o,r.KINESIS,"Kinesis"),(0,l.Z)(o,r.MONGODB,"MongoDB"),(0,l.Z)(o,r.MSSQL,"Microsoft SQL Server"),(0,l.Z)(o,r.MYSQL,"MySQL"),(0,l.Z)(o,r.NATS,"NATS"),(0,l.Z)(o,r.OPENSEARCH,"OpenSearch"),(0,l.Z)(o,r.ORACLEDB,"OracleDB"),(0,l.Z)(o,r.PINOT,"Pinot"),(0,l.Z)(o,r.POSTGRES,"PostgreSQL"),(0,l.Z)(o,r.RABBITMQ,"RabbitMQ"),(0,l.Z)(o,r.REDSHIFT,"Amazon Redshift"),(0,l.Z)(o,r.S3,"Amazon S3"),(0,l.Z)(o,r.SNOWFLAKE,"Snowflake"),(0,l.Z)(o,r.TRINO,"Trino"),o),a=(i={},(0,l.Z)(i,u.tf.DATA_LOADER,[r.GENERIC,r.FILE,r.API,r.AZURE_BLOB_STORAGE,r.BIGQUERY,r.DRUID,r.GOOGLE_CLOUD_STORAGE,r.GOOGLE_SHEETS,r.MYSQL,r.ORACLEDB,r.PINOT,r.POSTGRES,r.REDSHIFT,r.S3,r.SNOWFLAKE,r.MONGODB]),(0,l.Z)(i,u.tf.DATA_EXPORTER,[r.GENERIC,r.FILE,r.S3,r.AZURE_BLOB_STORAGE,r.GOOGLE_CLOUD_STORAGE,r.GOOGLE_SHEETS,r.REDSHIFT,r.BIGQUERY,r.SNOWFLAKE,r.MYSQL,r.POSTGRES]),(0,l.Z)(i,u.tf.TRANSFORMER,[r.REDSHIFT,r.BIGQUERY,r.SNOWFLAKE,r.POSTGRES]),(0,l.Z)(i,u.tf.SENSOR,[r.GENERIC,r.S3,r.GOOGLE_CLOUD_STORAGE,r.REDSHIFT,r.BIGQUERY,r.SNOWFLAKE,r.MYSQL,r.POSTGRES]),i);e.ZP=r},89706:function(n,e,t){t.d(e,{JD:function(){return h},Lu:function(){return l},PF:function(){return p},aZ:function(){return r},dT:function(){return u},n6:function(){return d},nB:function(){return v},oy:function(){return m},xF:function(){return f}});var o,i,r,l,u,c=t(82394),a=t(44425);!function(n){n.DBT="dbt"}(r||(r={})),function(n){n.CSV="csv",n.JSON="json",n.MD="md",n.PY="py",n.R="r",n.SH="sh",n.SQL="sql",n.TXT="txt",n.YAML="yaml",n.YML="yml"}(l||(l={})),function(n){n.INIT_PY="__init__.py",n.METADATA_YAML="metadata.yaml",n.REQS_TXT="requirements.txt"}(u||(u={}));var d=[l.PY,l.SQL],s=[l.JSON,l.MD,l.PY,l.R,l.SH,l.SQL,l.TXT,l.YAML,l.YML],f=new RegExp(s.map((function(n){return".".concat(n,"$")})).join("|")),p=(new RegExp(s.map((function(n){return".".concat(n,"$")})).join("|")),"charts"),m="pipelines",v=(o={},(0,c.Z)(o,l.MD,a.t6.MARKDOWN),(0,c.Z)(o,l.JSON,l.JSON),(0,c.Z)(o,l.PY,a.t6.PYTHON),(0,c.Z)(o,l.R,a.t6.R),(0,c.Z)(o,l.SQL,a.t6.SQL),(0,c.Z)(o,l.TXT,"text"),(0,c.Z)(o,l.YAML,a.t6.YAML),(0,c.Z)(o,l.YML,a.t6.YAML),o),h=(i={},(0,c.Z)(i,a.t6.MARKDOWN,l.MD),(0,c.Z)(i,a.t6.PYTHON,l.PY),(0,c.Z)(i,a.t6.R,l.R),(0,c.Z)(i,a.t6.SQL,l.SQL),(0,c.Z)(i,a.t6.YAML,l.YAML),(0,c.Z)(i,"text",l.TXT),i)},7267:function(n,e,t){var o;t.d(e,{z:function(){return o}}),function(n){n.GENERATE_BLOCK_WITH_DESCRIPTION="generate_block_with_description",n.GENERATE_COMMENT_FOR_CODE="generate_comment_for_code",n.GENERATE_DOC_FOR_BLOCK="generate_doc_for_block",n.GENERATE_DOC_FOR_PIPELINE="generate_doc_for_pipeline",n.GENERATE_PIPELINE_WITH_DESCRIPTION="generate_pipeline_with_description"}(o||(o={}))},5677:function(n,e,t){t.d(e,{NX:function(){return v},Wt:function(){return m},_G:function(){return c},c1:function(){return p},d9:function(){return f}});var o,i,r,l,u,c,a=t(82394),d=t(8454),s=(d.Q0.AVERAGE,d.Q0.CLEAN_COLUMN_NAME,d.Q0.COUNT,d.Q0.COUNT_DISTINCT,d.Q0.CUSTOM,d.Q0.DIFF,d.Q0.FIRST,d.Q0.FIX_SYNTAX_ERRORS,d.Q0.IMPUTE,d.Q0.LAST,d.Q0.MAX,d.Q0.MEDIAN,d.Q0.MIN,d.Q0.NORMALIZE,d.Q0.REFORMAT,d.Q0.REMOVE,d.Q0.REMOVE_OUTLIERS,d.Q0.SELECT,d.Q0.SHIFT_DOWN,d.Q0.SHIFT_UP,d.Q0.STANDARDIZE,d.Q0.SUM,[d.Q0.DROP_DUPLICATE,d.Q0.FILTER,d.Q0.SORT,d.Q0.REMOVE]);!function(n){n.AGGREGATE="Aggregate",n.FORMATTING="Formatting",n.COLUMN_REMOVAL="Column removal",n.SHIFT_ROWS="Shift rows in a column",n.MISC="Miscellaneous",n.FEATURE_SCALING="Feature Scaling"}(c||(c={}));var f=(i={},(0,a.Z)(i,d.qs.COLUMN,(o={},(0,a.Z)(o,c.AGGREGATE,[d.Q0.AVERAGE,d.Q0.COUNT,d.Q0.COUNT_DISTINCT,d.Q0.FIRST,d.Q0.LAST,d.Q0.MAX,d.Q0.MEDIAN,d.Q0.MIN,d.Q0.SUM]),(0,a.Z)(o,c.FORMATTING,[d.Q0.CLEAN_COLUMN_NAME,d.Q0.FIX_SYNTAX_ERRORS,d.Q0.REFORMAT]),(0,a.Z)(o,c.COLUMN_REMOVAL,[d.Q0.REMOVE,d.Q0.SELECT]),(0,a.Z)(o,c.SHIFT_ROWS,[d.Q0.SHIFT_DOWN,d.Q0.SHIFT_UP]),(0,a.Z)(o,c.MISC,[d.Q0.DIFF,d.Q0.IMPUTE,d.Q0.REMOVE_OUTLIERS]),(0,a.Z)(o,c.FEATURE_SCALING,[d.Q0.NORMALIZE,d.Q0.STANDARDIZE]),o)),(0,a.Z)(i,d.qs.ROW,(0,a.Z)({},c.MISC,[].concat(s))),i),p=Object.keys(f[d.qs.COLUMN]),m=[c.MISC],v=(u={},(0,a.Z)(u,d.qs.COLUMN,(r={},(0,a.Z)(r,d.Q0.ADD,"Add column"),(0,a.Z)(r,d.Q0.AVERAGE,"Aggregate by average value"),(0,a.Z)(r,d.Q0.CLEAN_COLUMN_NAME,"Clean column name"),(0,a.Z)(r,d.Q0.COUNT_DISTINCT,"Aggregate by distinct count"),(0,a.Z)(r,d.Q0.COUNT,"Aggregate by total count"),(0,a.Z)(r,d.Q0.DIFF,"Difference"),(0,a.Z)(r,d.Q0.FIRST,"Aggregate by first value"),(0,a.Z)(r,d.Q0.FIX_SYNTAX_ERRORS,"Fix syntax errors"),(0,a.Z)(r,d.Q0.IMPUTE,"Fill in missing values"),(0,a.Z)(r,d.Q0.NORMALIZE,"Normalize Data"),(0,a.Z)(r,d.Q0.STANDARDIZE,"Standardize Data"),(0,a.Z)(r,d.Q0.LAST,"Aggregate by last value"),(0,a.Z)(r,d.Q0.MAX,"Aggregate by maximum value"),(0,a.Z)(r,d.Q0.MEDIAN,"Aggregate by median value"),(0,a.Z)(r,d.Q0.MIN,"Aggregate by mininum value"),(0,a.Z)(r,d.Q0.REFORMAT,"Reformat"),(0,a.Z)(r,d.Q0.REMOVE_OUTLIERS,"Remove outliers"),(0,a.Z)(r,d.Q0.REMOVE,"Remove column(s)"),(0,a.Z)(r,d.Q0.SELECT,"Keep columns"),(0,a.Z)(r,d.Q0.SHIFT_DOWN,"Shift rows down in a column"),(0,a.Z)(r,d.Q0.SHIFT_UP,"Shift rows up in a column"),(0,a.Z)(r,d.Q0.SUM,"Aggregate by sum of values"),r)),(0,a.Z)(u,d.qs.ROW,(l={},(0,a.Z)(l,d.Q0.DROP_DUPLICATE,"Drop duplicates"),(0,a.Z)(l,d.Q0.FILTER,"Filter"),(0,a.Z)(l,d.Q0.SORT,"Sort"),(0,a.Z)(l,d.Q0.REMOVE,"Remove rows"),l)),u)},46732:function(n,e,t){var o=t(82394),i=t(26304),r=(t(82684),t(50724)),l=t(70374),u=t(28598),c=["children","items","open","onClickCallback","onClickOutside","parentRef","uuid","zIndex"];function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function d(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}e.Z=function(n){var e=n.children,t=n.items,o=n.open,a=n.onClickCallback,s=n.onClickOutside,f=n.parentRef,p=n.uuid,m=n.zIndex,v=(0,i.Z)(n,c),h=(0,u.jsxs)("div",{style:{position:"relative",zIndex:(s?3:2)+(m||0)},children:[(0,u.jsx)("div",{ref:f,children:e}),(0,u.jsx)(l.Z,d(d({},v),{},{items:t,onClickCallback:a,open:o,parentRef:f,uuid:p}))]});return s?(0,u.jsx)(r.Z,{onClickOutside:s,open:!0,children:h}):h}},56747:function(n,e,t){t.d(e,{Z:function(){return j}});var o=t(21124),i=t(40583),r=t(85223),l=t(45993),u=t(85854),c=t(48670),a=t(30160),d=t(44897),s=t(38626),f=t(95363),p=t(70515),m=t(42631),v=t(61896),h=t(47041),b="0.75em",g=s.default.div.withConfig({displayName:"indexstyle__MarkdownContainer",componentId:"sc-j72mol-0"})(["font-family:",";margin:0 ","px;overflow:auto;"," "," p{margin:0.5em 0;}blockquote{margin:"," 0;padding:","px 0;","}blockquote:before{content:'';font-size:","px;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em;}blockquote p{display:inline;}pre{border-radius:","px;white-space:pre;margin:"," 0;padding:","px;overflow-x:auto;"," "," span{padding:0;}}ul,ol{margin-bottom:",";padding-left:","px;}li{","}li > input[type='checkbox']{pointer-events:none;}table{"," margin:",";thead{font-family:",";","}th,td{padding:","px ","px;","}}"],f.ry,p.iI,h.w5,(function(n){return"\n    color: ".concat((n.theme||d.Z).content.active,";\n  ")}),b,p.iI,(function(n){return"\n      border-left: ".concat(.5*p.iI,"px solid ").concat((n.theme||d.Z).content.active,";\n    ")}),3*p.l4,m.BG,b,p.iI,h.w5,(function(n){return"\n      background-color: ".concat((n.theme||d.Z).interactive.defaultBorder,";\n    ")}),b,3*p.iI,v.iD,v.iD,b,f.nF,(function(n){return"\n        border-bottom: ".concat(m.YF,"px solid ").concat((n.theme||d.Z).content.active,";\n      ")}),.5*p.iI,.75*p.iI,(function(n){return"\n        border: ".concat(m.YF,"px solid ").concat((n.theme||d.Z).content.muted,";\n      ")})),x=t(28598);var j=function(n){var e=n.children;return(0,x.jsx)(g,{children:(0,x.jsx)(o.D,{components:{a:function(n){var e=n.children,t=n.href;return(0,x.jsx)(c.Z,{href:t,inline:!0,openNewWindow:!0,primary:!0,children:e})},code:function(n){var e=n.children;return(0,x.jsx)(a.ZP,{backgroundColor:d.Z.interactive.defaultBorder,inline:!0,monospace:!0,pre:!0,style:{fontSize:"13px"},children:e})},em:function(n){var e=n.children;return(0,x.jsx)(a.ZP,{inline:!0,italic:!0,children:e})},h1:function(n){var e=n.children;return(0,x.jsx)(u.Z,{level:1,children:e})},h2:function(n){var e=n.children;return(0,x.jsx)(u.Z,{level:2,children:e})},h3:function(n){var e=n.children;return(0,x.jsx)(u.Z,{level:3,children:e})},h4:function(n){var e=n.children;return(0,x.jsx)(u.Z,{level:4,children:e})},h5:function(n){var e=n.children;return(0,x.jsx)(u.Z,{level:5,children:e})},p:function(n){var e=n.children;return(0,x.jsx)(a.ZP,{children:e})},strong:function(n){var e=n.children;return(0,x.jsx)(a.ZP,{bold:!0,inline:!0,children:e})}},rehypePlugins:[i.Z,r.Z],remarkPlugins:[l.Z],children:e})})}},13507:function(n,e,t){var o=t(28598);e.Z=function(n){var e=n.fill,t=void 0===e?"white":e,i=n.size;return(0,o.jsxs)("svg",{fill:"none",height:i,viewBox:"0 0 20 20",width:i,xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_11802_82850)",children:[(0,o.jsx)("path",{d:"M15.6276 1.73378C15.97 1.96689 16.022 2.44136 15.7638 2.76532C15.5057 3.08929 15.0355 3.13958 14.69 2.91102C13.3636 2.0334 11.8126 1.54269 10.2126 1.50266C8.36175 1.45636 6.54643 2.01561 5.04253 3.09541C3.53863 4.1752 2.4284 5.71649 1.8806 7.48498C1.40702 9.01387 1.37618 10.6403 1.7837 12.1777C1.88982 12.5781 1.69185 13.0076 1.30237 13.1486C0.912892 13.2896 0.479935 13.0887 0.368517 12.6897C-0.147093 10.8435 -0.122519 8.88224 0.447763 7.04116C1.09223 4.96057 2.39838 3.14729 4.16768 1.87695C5.93697 0.606601 8.07265 -0.0513415 10.2501 0.00312922C12.1769 0.0513296 14.0431 0.655033 15.6276 1.73378Z",fill:t}),(0,o.jsx)("path",{d:"M13.2714 5.89383C13.5295 5.56986 13.4781 5.09341 13.1245 4.87771C12.2306 4.33247 11.2055 4.02828 10.15 4.00188C8.84359 3.9692 7.56218 4.36396 6.50061 5.12617C5.43903 5.88838 4.65534 6.97634 4.26866 8.22469C3.95628 9.23316 3.91679 10.3017 4.14767 11.323C4.23901 11.727 4.67403 11.928 5.06351 11.787C5.45299 11.6461 5.64766 11.216 5.57323 10.8086C5.44361 10.0989 5.48588 9.36461 5.70149 8.66852C5.9915 7.73226 6.57927 6.91628 7.37545 6.34463C8.17164 5.77297 9.13269 5.4769 10.1125 5.50141C10.841 5.51963 11.5503 5.71432 12.1813 6.06401C12.5436 6.26478 13.0133 6.2178 13.2714 5.89383Z",fill:t}),(0,o.jsx)("path",{clipRule:"evenodd",d:"M10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5ZM9 10C9 10.5523 9.44772 11 10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10Z",fill:t,fillRule:"evenodd"}),(0,o.jsx)("path",{d:"M6.87554 15.1223C6.52192 14.9066 6.47052 14.4301 6.72863 14.1062C6.98673 13.7822 7.45642 13.7352 7.81872 13.936C8.44971 14.2857 9.15897 14.4804 9.88746 14.4986C10.8673 14.5231 11.8284 14.227 12.6245 13.6554C13.4207 13.0837 14.0085 12.2677 14.2985 11.3315C14.5141 10.6354 14.5564 9.90111 14.4268 9.19144C14.3523 8.78397 14.547 8.35395 14.9365 8.21295C15.326 8.07196 15.761 8.27297 15.8523 8.67699C16.0832 9.69826 16.0437 10.7668 15.7313 11.7753C15.3447 13.0237 14.561 14.1116 13.4994 14.8738C12.4378 15.636 11.1564 16.0308 9.84995 15.9981C8.79455 15.9717 7.76942 15.6675 6.87554 15.1223Z",fill:t}),(0,o.jsx)("path",{d:"M4.23615 17.2347C3.97805 17.5586 4.03001 18.0331 4.37241 18.2662C5.95691 19.345 7.82314 19.9487 9.74992 19.9969C11.9274 20.0513 14.063 19.3934 15.8323 18.1231C17.6016 16.8527 18.9078 15.0394 19.5522 12.9588C20.1225 11.1178 20.1471 9.15647 19.6315 7.31026C19.5201 6.91131 19.0871 6.7104 18.6976 6.85139C18.3082 6.99238 18.1102 7.42188 18.2163 7.82227C18.6238 9.35971 18.593 10.9861 18.1194 12.515C17.5716 14.2835 16.4614 15.8248 14.9575 16.9046C13.4536 17.9844 11.6382 18.5436 9.78743 18.4973C8.18738 18.4573 6.63645 17.9666 5.30996 17.089C4.96451 16.8604 4.49426 16.9107 4.23615 17.2347Z",fill:t})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_11802_82850",children:(0,o.jsx)("rect",{fill:t,height:"20",width:"20"})})})]})}},94777:function(n,e,t){var o=t(75582),i=t(82684),r=t(34376),l=t(71180),u=t(55485),c=t(65956),a=t(38276),d=t(30160),s=t(89538),f=t(28598);e.Z=function(n){var e=n.shouldWarn,t=n.warningMessage,p=(0,r.useRouter)(),m=(0,i.useState)(!1),v=m[0],h=m[1],b=(0,i.useState)({isModalOpen:!1,nextRoute:null}),g=b[0],x=b[1];(0,i.useEffect)((function(){var n=function(n){if(e)return n.preventDefault(),(n||window.event).returnValue="Are you sure you want to leave?"};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e]),(0,i.useEffect)((function(){var n=function(n){if(e&&!v)throw x({isModalOpen:!0,nextRoute:n}),p.events.emit("routeChangeError"),"navigation aborted"};p.events.on("routeChangeStart",n);var t=function(){return p.events.off("routeChangeStart",n)};if(v){if(!g.nextRoute)return;return p.push(g.nextRoute),t}return t}),[g,v,p,e]);var j=(0,s.dd)((function(){return(0,f.jsxs)(c.Z,{children:[(0,f.jsx)(d.ZP,{children:t}),(0,f.jsx)(a.Z,{mt:2,children:(0,f.jsxs)(u.ZP,{alignItems:"center",children:[(0,f.jsx)(l.ZP,{onClick:function(){return h(!0)},primary:!0,children:"Leave"}),(0,f.jsx)(a.Z,{mr:1}),(0,f.jsx)(l.ZP,{onClick:function(){x({isModalOpen:!1,nextRoute:null})},secondary:!0,children:"Cancel"})]})})]})}),{},[t],{background:!0,hideCallback:function(){x({isModalOpen:!1,nextRoute:null})},uuid:"stale_pipeline_message"}),C=(0,o.Z)(j,2),O=C[0],Z=C[1];(0,i.useEffect)((function(){g.isModalOpen?O():Z()}),[Z,g.isModalOpen,O]);return{ConfirmLeaveModal:function(){return(0,f.jsx)("div",{})}}}},53405:function(n,e,t){t.d(e,{$C:function(){return Z},AP:function(){return B},I1:function(){return o},JN:function(){return W},KN:function(){return M},Kq:function(){return K},M$:function(){return g},MB:function(){return O},Nf:function(){return w},Qu:function(){return x},RP:function(){return R},UA:function(){return y},Uc:function(){return k},VZ:function(){return U},WD:function(){return j},WE:function(){return z},Wi:function(){return q},XE:function(){return _},Z5:function(){return E},bX:function(){return Q},cU:function(){return h},eH:function(){return T},iN:function(){return H},ig:function(){return I},jC:function(){return N},jO:function(){return b},p$:function(){return P},qf:function(){return A},qx:function(){return L},th:function(){return G},wx:function(){return F},zB:function(){return S}});var o,i=t(75582),r=t(82394),l=t(21831),u=t(82684),c=t(44425),a=t(57653),d=t(61599),s=t(86735),f=t(42122);function p(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function m(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?p(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function v(n,e){return function(n,e,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeAllNodes:!1},i=(0,s.HK)(t,(function(n){return n.uuid})),r=(o||{}).includeAllNodes,l=[];function u(t){if(t){var o=(t[e]||[]).reduce((function(e,t){return n.uuid===t?e:e.concat(i[t])}),[]);(0===o.length||r&&n.uuid!==t.uuid)&&l.push(t),o.forEach((function(n){u(n)}))}}return u(n),l}(n,"upstream_blocks",e,{includeAllNodes:!0})}function h(n,e){return(0,u.useMemo)((function(){return n.map((function(t){var o=function(n,e){var t=v(n,e),o=t.filter((function(e){var t=e.configuration,o=e.uuid;return(null===t||void 0===t?void 0:t.dynamic)&&o!==(null===n||void 0===n?void 0:n.uuid)})),i=t.filter((function(e){var t=e.configuration,o=e.uuid;return(null===t||void 0===t?void 0:t.reduce_output)&&o!==(null===n||void 0===n?void 0:n.uuid)}));return{dynamicUpstreamBlock:o[0],dynamicUpstreamBlocks:o,reduceOutputUpstreamBlock:i[0],reduceOutputUpstreamBlocks:i}}(t,e),i=o.dynamicUpstreamBlock,r=o.dynamicUpstreamBlocks,l=o.reduceOutputUpstreamBlock,u=o.reduceOutputUpstreamBlocks,c=(t||{}).configuration||{},a=c.dynamic,d=c.reduce_output;return{block:t,blocksToUse:n,dynamic:!!a,dynamicUpstreamBlock:i,dynamicUpstreamBlocks:r,reduceOutput:!!d,reduceOutputUpstreamBlock:l,reduceOutputUpstreamBlocks:u}}))}),[e,null===e||void 0===e?void 0:e.map((function(n){var e=n.configuration;return null===e||void 0===e?void 0:e.dynamic})),null===e||void 0===e?void 0:e.map((function(n){var e=n.configuration;return null===e||void 0===e?void 0:e.reduce_output})),null===e||void 0===e?void 0:e.map((function(n){return n.upstream_blocks}))])}function b(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=n||{},o=t.configuration,i=t.language,r=t.type,l=o||{},u=l.data_integration,d=[c.tf.DATA_LOADER,c.tf.DATA_EXPORTER].includes(r);if(a.qL.PYTHON===(null===e||void 0===e?void 0:e.type)&&d){if(c.t6.YAML===i)return!0;if(c.t6.PYTHON===i&&u)return!0}return!1}function g(n){return(null===n||void 0===n?void 0:n.stream)||(null===n||void 0===n?void 0:n.tap_stream_id)}function x(n){return null===n||void 0===n?void 0:n.parent_stream}function j(n){return[x(n),g(n)].filter((function(n){return n})).join("/")}function C(n){var e;return 0===(null===n||void 0===n||null===(e=n.breadcrumb)||void 0===e?void 0:e.length)}function O(n){var e;return(null===n||void 0===n||null===(e=n.metadata)||void 0===e?void 0:e.find(C))||{breadcrumb:[],metadata:{}}}function Z(n,e){var t=(null===e||void 0===e?void 0:e.catalog)||{streams:[]},o=(0,l.Z)((null===t||void 0===t?void 0:t.streams)||[]),i=null===o||void 0===o?void 0:o.findIndex((function(e){return j(e)===j(n)}));return i>=0?o[i]=n:o.push(n),m(m({},e),{},{catalog:m(m({},t),{},{streams:o})})}function _(n,e){var t,o,i=m({},n);null!==i&&void 0!==i&&i.metadata||(i.metadata=[]);var r=null===i||void 0===i||null===(t=i.metadata)||void 0===t?void 0:t.findIndex(C),l={breadcrumb:[],metadata:{}};r>=0&&(l=O(i)||{breadcrumb:[],metadata:{}});var u=m(m({},l),{},{metadata:m(m({},null===(o=l)||void 0===o?void 0:o.metadata),e)});return r>=0?i.metadata[r]=u:i.metadata.push(u),i}function E(n){var e,t,o=(n||{}).metadata;return null===o||void 0===o||null===(e=o.find(C))||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.selected}function k(n,e){var t=(e||{}).getAll,o=null===n||void 0===n?void 0:n.catalog,i=(null===o||void 0===o?void 0:o.streams)||[];return t?i:null===i||void 0===i?void 0:i.filter(E)}function y(n,e){var t=e||{},o=t.noParents,i=t.parents,r={noParents:{},parents:{}};return null===n||void 0===n||n.forEach((function(n){var e,t=null===n||void 0===n?void 0:n.parent_stream,l=g(n);t?null!==i&&void 0!==i&&null!==(e=i[t])&&void 0!==e&&e[l]||(r.parents[t]||(r.parents[t]={}),r.parents[t][l]=n):null!==o&&void 0!==o&&o[l]||(r.noParents[l]=n)})),r}function T(n){var e=n||{},t=e.noParents,o=void 0===t?{}:t,i=e.parents,r=void 0===i?{}:i;return Object.values(o||[]).concat(Object.values(r||[]).reduce((function(n,e){return n.concat(Object.values(e))}),[]))}function S(n,e){var t,o,i,r=null===n||void 0===n?void 0:n.parent_stream,l=g(n);return r?null===e||void 0===e||null===(o=e.parents)||void 0===o||null===(i=o[r])||void 0===i?void 0:i[l]:null===e||void 0===e||null===(t=e.noParents)||void 0===t?void 0:t[l]}function I(n,e,t){return!!S(n,e)&&!!S(n,t)}function P(n,e,t){var o=function(n,e){var t,o,r={},l=[],u={};function c(n,e){null!==r&&void 0!==r&&r[n]||(r[n]={}),r[n]=m(m({},null===r||void 0===r?void 0:r[n]),e)}var a=(null===n||void 0===n||null===(t=n.schema)||void 0===t?void 0:t.properties)||{},d=(null===e||void 0===e||null===(o=e.schema)||void 0===o?void 0:o.properties)||{};return Object.entries(a).forEach((function(n){var e=(0,i.Z)(n,2),t=e[0],o=e[1],a=null===d||void 0===d?void 0:d[t];if(a){var p=(null===o||void 0===o?void 0:o.type)||[];p=Array.isArray(p)?p:[p];var m=(null===a||void 0===a?void 0:a.type)||[];m=Array.isArray(m)?m:[m],(0,s.fS)(p,m)||c(t,{type:p});var v=null===o||void 0===o?void 0:o.format;v!==(null===a||void 0===a?void 0:a.format)&&c(t,{format:v});var h=(null===o||void 0===o?void 0:o.anyOf)||{},b=(null===a||void 0===a?void 0:a.anyOf)||{};(0,f.Xy)(h,b)||c(t,{anyOf:h}),null!==r&&void 0!==r&&r[t]&&(u[t]=o)}else l.push(t),u[t]=o})),{newColumnSettings:r,newColumns:l,stream:m(m({},e),{},{schema:m(m({},null===e||void 0===e?void 0:e.schema),{},{properties:m(m(m({},d),u),r)})})}}(S(n,e),S(n,t)),r=o||{},l=r.newColumnSettings,u=r.newColumns;if(!(0,f.Qr)(l||{})||(null===u||void 0===u?void 0:u.length)>=1)return o}function A(n,e){return[].concat((0,l.Z)(Object.values(n||{})),(0,l.Z)(Object.values(e||{}))).every((function(n){return(0,f.Qr)(n)}))}function R(n){var e,t,o=m({},(null===n||void 0===n||null===(e=n.schema)||void 0===e?void 0:e.properties)||{});return null===n||void 0===n||null===(t=n.metadata)||void 0===t||t.forEach((function(n){if(!C(n)){var e,t=null===n||void 0===n||null===(e=n.breadcrumb)||void 0===e?void 0:e.find((function(n){return n!==d.u7.PROPERTIES}));t&&null!==o&&void 0!==o&&o[t]&&(o[t]=m(m({},o[t]),{},{metadata:n}))}})),o}function w(n){var e;return null===n||void 0===n||null===(e=n.metadata)||void 0===e?void 0:e.reduce((function(n,e){if(C(e))return n;var t=D(e);return t&&(n[t]=e),n}),{})}function D(n){var e;return null===n||void 0===n||null===(e=n.breadcrumb)||void 0===e?void 0:e.find((function(n){return n!==d.u7.PROPERTIES}))}function N(n){return{breadcrumb:[d.u7.PROPERTIES,n],metadata:{inclusion:d.ks.AVAILABLE,selected:!0}}}function M(n,e){var t;return m(m({},n),{},{schema:m(m({},null===n||void 0===n?void 0:n.schema),{},{properties:m(m({},null===n||void 0===n||null===(t=n.schema)||void 0===t?void 0:t.properties),e)})})}function B(n,e){var t=O(n),o=m(m({},w(n)),e);return m(m({},n),{},{metadata:[t].concat((0,l.Z)(Object.values(o||{})))})}function L(n,e){var t=e||{},o=t.type,i=t.typesDerived,r=m({},e),u=(0,l.Z)(o),c=(0,l.Z)(i);return null===n||void 0===n||n.forEach((function(n){d.Xv===n?r.format=d.zS.DATE_TIME:d.zS.UUID===n?r.format=d.zS.UUID:(null!==u&&void 0!==u&&u.includes(n)||u.push(n),null!==c&&void 0!==c&&c.includes(n)||c.push(n))})),m(m({},r),{},{type:u,typesDerived:c})}function U(n,e){var t=e||{},o=t.format,i=t.type,r=t.typesDerived,u=m({},e),c=(0,l.Z)(i),a=(0,l.Z)(r);return null===n||void 0===n||n.forEach((function(n){if(o&&d.eL[o]===n)delete u.format;else{var e,t,i,r;if(null!==(e=c)&&void 0!==e&&e.includes(n))c=(0,l.Z)(null===(i=c)||void 0===i?void 0:i.filter((function(e){return e!==n})));if(null!==(t=a)&&void 0!==t&&t.includes(n))a=(0,l.Z)(null===(r=a)||void 0===r?void 0:r.filter((function(e){return e!==n})))}})),m(m({},u),{},{type:c,typesDerived:a})}function F(n,e){var t=e||{},o=t.format,i=t.type,r=void 0===i?[]:i,l=null===r||void 0===r?void 0:r.filter((function(n){var e;return!(null!==(e=[d.Xv,d.zS.UUID])&&void 0!==e&&e.includes(n))}));return d.eL[o]&&(null!==l&&void 0!==l&&l.includes(d.eL[o])||l.push(d.eL[o])),m(m({},e),{},{typesDerived:l,uuid:n})}function G(n){var e=n||{},t=e.noParents,o=e.parents;return[{groupHeader:null,streams:(0,s.YC)(Object.values(t),(function(n){return g(n)}))}].concat((0,l.Z)((0,s.YC)(Object.entries(o),(function(n){return(0,i.Z)(n,1)[0]})).map((function(n){var e=(0,i.Z)(n,2),t=e[0],o=e[1];return{groupHeader:t,streams:(0,s.YC)(Object.values(o),(function(n){return g(n)}))}}))))}function H(n,e,t){var o,i,l,u=(t||{}).remove,c=g(n||{}),a=x(n||{}),d=m({},e);if(a)u?null===d||void 0===d||(null===(o=d.parents)||void 0===o||(null===(i=o[a])||void 0===i||delete i[c])):d.parents=m(m({},null===d||void 0===d?void 0:d.parents),{},(0,r.Z)({},a,m(m({},null===d||void 0===d||null===(l=d.parents)||void 0===l?void 0:l[a]),{},(0,r.Z)({},c,n))));else if(c){var s;if(u)null===d||void 0===d||(null===(s=d.noParents)||void 0===s||delete s[c]);else d.noParents=m(m({},null===d||void 0===d?void 0:d.noParents),{},(0,r.Z)({},c,n))}return d}function Q(n,e){var t=[o.AUTO_ADD_NEW_FIELDS,o.DISABLE_COLUMN_TYPE_CHECK,o.REPLICATION_METHOD,o.RUN_IN_PARALLEL,o.UNIQUE_CONFLICT_METHOD],l=Object.entries(e||{}).reduce((function(n,e){var t=(0,i.Z)(e,2),o=t[0],l=t[1],u=l.selected,c=l.value;return m(m({},n),u?(0,r.Z)({},o,c):{})}),{}),u=m({},n),c=n&&T(n)||[];return null===c||void 0===c||c.forEach((function(n){u=H(function(n){var e,o=m({},n);return null===o||void 0===o||null===(e=o.schema)||void 0===e||e.properties,Object.entries(l||{}).forEach((function(n){var e=(0,i.Z)(n,2),r=e[0],l=e[1];t.includes(r)&&(o[r]=l)})),o}(n),u)})),u}function K(n,e,t){var l=[o.BOOKMARK_PROPERTIES,o.KEY_PROPERTIES,o.PARTITION_KEYS,o.UNIQUE_CONSTRAINTS],u=Object.entries(e||{}).reduce((function(n,e){var t=(0,i.Z)(e,2),o=t[0];return t[1]?n.concat(o):n}),[]),c=Object.entries(t||{}).reduce((function(n,e){var t=(0,i.Z)(e,2),o=t[0],l=t[1],u=l.selected,c=l.value;return m(m({},n),u?(0,r.Z)({},o,c):{})}),{}),a=m({},n),p=n&&T(n)||[];return null===p||void 0===p||p.forEach((function(n){a=H(function(n){var e,t=m({},n),r=(null===t||void 0===t||null===(e=t.schema)||void 0===e?void 0:e.properties)||{},a=w(n);return null===u||void 0===u||u.forEach((function(n){null!==r&&void 0!==r&&r[n]&&Object.entries(c||{}).forEach((function(e){var u=(0,i.Z)(e,2),c=u[0],p=u[1];if(o.PROPERTY_SELECTED===c){var v=(null===a||void 0===a?void 0:a[n])||N(n)||{breadcrumb:[],metadata:{}},h=m(m({},v),{},{metadata:m(m({},null===v||void 0===v?void 0:v.metadata),{},{selected:p})});a[n]=h}else if(l.includes(c)){var b;null!==t&&void 0!==t&&t[c]||(t[c]=[]);var g=null===(b=t[c])||void 0===b?void 0:b.includes(n);p&&!g?t[c].push(n):!p&&g&&(t[c]=(0,s.Od)(t[c],(function(e){return e===n})))}else if(d.D5.includes(c)){var x,j=m({},(null===r||void 0===r?void 0:r[n])||{}),C=(p?L:U)([c],F(n,j)),O=C.anyOf,Z=C.format,_=C.type;null!==t&&void 0!==t&&t.schema||(t.schema={properties:{}}),null!==t&&void 0!==t&&null!==(x=t.schema)&&void 0!==x&&x.properties||(t.schema=m(m({},null===t||void 0===t?void 0:t.schema),{},{properties:{}}));var E=(0,f.hB)({anyOf:O,format:Z,type:_});t.schema.properties[n]=E}}))})),B(t,a)}(n),a)})),a}function z(n){var e,t,o=(null===n||void 0===n||null===(e=n.schema)||void 0===e?void 0:e.properties)||{};return null===n||void 0===n||null===(t=n.metadata)||void 0===t?void 0:t.reduce((function(n,e){var t;if(C(e))return n;if(!(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.selected))return n;var i=D(e),l=null===o||void 0===o?void 0:o[i];return m(m({},n),{},(0,r.Z)({},i,m(m({},l),{},{metadata:e,uuid:i})))}),{})}function q(n,e){var t=(null===e||void 0===e?void 0:e.inputs)||{};return null===n||void 0===n?void 0:n.reduce((function(n,e){var o=null===e||void 0===e?void 0:e.uuid,i=o&&(null===t||void 0===t?void 0:t[o]);return i?n.concat({block:e,input:i}):n}),[])}function W(n){var e,t,o={},r={},l={};return null===n||void 0===n||null===(e=n.metadata)||void 0===e||e.forEach((function(n){if(!C(n)){var e,t=D(n);if(t&&null!==n&&void 0!==n&&n.metadata)l[t]=null===n||void 0===n||null===(e=n.metadata)||void 0===e?void 0:e.selected}})),Object.entries((null===n||void 0===n||null===(t=n.schema)||void 0===t?void 0:t.properties)||{}).forEach((function(n){var e=(0,i.Z)(n,2),t=e[0],u=m(m({},e[1]),{},{uuid:t});t in l?null!==l&&void 0!==l&&l[t]&&(r[t]=u):r[t]=u,o[t]=u})),{allColumns:o,selectedColumns:r}}!function(n){n.AUTO_ADD_NEW_FIELDS="auto_add_new_fields",n.BOOKMARK_PROPERTIES="bookmark_properties",n.DISABLE_COLUMN_TYPE_CHECK="disable_column_type_check",n.KEY_PROPERTIES="key_properties",n.PARTITION_KEYS="partition_keys",n.PROPERTY_SELECTED="property_selected",n.REPLICATION_METHOD="replication_method",n.RUN_IN_PARALLEL="run_in_parallel",n.UNIQUE_CONFLICT_METHOD="unique_conflict_method",n.UNIQUE_CONSTRAINTS="unique_constraints"}(o||(o={}))},65044:function(n,e,t){t.d(e,{Gr:function(){return i},Lz:function(){return o},Vc:function(){return l},gr:function(){return r}});var o=/\[__internal_output__\]/,i=/\[__internal_test__\]/,r="[__internal_output__]",l="[__internal_test__]"},58325:function(n,e,t){var o;t.d(e,{V5:function(){return r}}),function(n){n.ANDROID="Android",n.CHROME_OS="ChromeOS",n.IOS="iOS",n.LINUX="Linux",n.MAC="macOS",n.WINDOWS="Windows"}(o||(o={}));var i=o;function r(){return function(){var n,e,t,o,r,l,u,c=i.MAC,a=null===(n=window)||void 0===n||null===(e=n.navigator)||void 0===e?void 0:e.userAgent,d=(null===(t=window)||void 0===t||null===(o=t.navigator)||void 0===o||null===(r=o.userAgentData)||void 0===r?void 0:r.platform)||(null===(l=window)||void 0===l||null===(u=l.navigator)||void 0===u?void 0:u.platform);return d?["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].includes(d)?c=i.MAC:["Win32","Win64","Windows","WinCE"].includes(d)?c=i.WINDOWS:["iPhone","iPad","iPod"].includes(d)&&(c=i.IOS):a&&(a.includes("Macintosh")?c=i.MAC:a.includes("Windows")?c=i.WINDOWS:a.includes("Linux")&&a.includes("X11")?c=i.LINUX:/(iPhone|iPad)/.test(a)?c=i.IOS:a.includes("Android")&&a.includes("Mobi")?c=i.ANDROID:a.includes("CrOS")&&(c=i.CHROME_OS)),c}()===i.MAC}}}]);